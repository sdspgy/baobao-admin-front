{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-687055d8\",\"chunk-8d965cd6\"],{\"16a8\":function(e,t,l){\"use strict\";var a=l(\"7e18\"),n=l.n(a);n.a},\"3ac2\":function(e,t,l){\"use strict\";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l(\"div\",{staticClass:\"titleHead\"},[e._v(e._s(e.inputName))])},n=[],r={name:\"TitleHead\",props:{inputName:String,required:!0},components:{},data:function(){return{}},mounted:function(){},methods:{}},o=r,i=(l(\"16a8\"),l(\"2877\")),u=Object(i[\"a\"])(o,a,n,!1,null,\"111682f2\",null);t[\"default\"]=u.exports},\"3f27\":function(e,t,l){\"use strict\";l.d(t,\"a\",(function(){return a}));var a=function(e){var t=new Date(e),l=t.getDay(),a=7-l;switch(a){case 7:e+=\"(七)\";break;case 1:e+=\"(六)\";break;case 2:e+=\"(五)\";break;case 3:e+=\"(四)\";break;case 4:e+=\"(三)\";break;case 5:e+=\"(二)\";break;case 6:e+=\"(一)\";break;default:}return e}},\"4f01\":function(e,t,l){},\"7e18\":function(e,t,l){},cccc:function(e,t,l){\"use strict\";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l(\"div\",{staticStyle:{\"background-color\":\"#fff\"}},[l(\"div\",[l(\"RadioGroup\",{attrs:{type:\"button\"},on:{\"on-change\":function(t){return e.init()}},model:{value:e.phone,callback:function(t){e.phone=t},expression:\"phone\"}},[e._v(\">\\n            \"),l(\"Radio\",{staticStyle:{margin:\"10px 10px\"},attrs:{label:\"0\"}},[e._v(\" ALL\")]),l(\"Radio\",{staticStyle:{margin:\"10px 10px\"},attrs:{label:\"1\"}},[e._v(\"ANDROID\")]),l(\"Radio\",{staticStyle:{margin:\"10px 10px\"},attrs:{label:\"2\"}},[e._v(\"IOS\")])],1)],1),l(\"div\",[l(\"RadioGroup\",{attrs:{type:\"button\"},on:{\"on-change\":function(t){return e.init()}},model:{value:e.data,callback:function(t){e.data=t},expression:\"data\"}},[e._v(\">\\n            \"),l(\"Radio\",{staticStyle:{margin:\"10px 10px\"},attrs:{label:\"1\"}},[e._v(\"昨天\")]),l(\"Radio\",{staticStyle:{margin:\"10px 10px\"},attrs:{label:\"7\"}},[e._v(\"7日\")]),l(\"Radio\",{staticStyle:{margin:\"10px 10px\"},attrs:{label:\"30\"}},[e._v(\"30日\")])],1)],1),l(\"Form\",{ref:\"from\",staticStyle:{\"margin-left\":\"-80px\",position:\"absolute\",top:\"120px\",left:\"15%\",\"z-index\":\"999\"},attrs:{model:e.reportLevelForm,\"label-width\":80}},[l(\"FormItem\",{attrs:{label:\"\",prop:\"value\"}},[l(\"Select\",{staticStyle:{width:\"200px\"},on:{\"on-change\":function(t){return e.changeType()}},model:{value:e.reportLevelForm.index,callback:function(t){e.$set(e.reportLevelForm,\"index\",t)},expression:\"reportLevelForm.index\"}},e._l(e.option_levelType,(function(t){return l(\"Option\",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.text)+\"\\n                \")])})),1)],1)],1),l(\"div\",[l(\"vTitleHead\",{attrs:{inputName:e.levelTable}}),l(\"Row\",[l(\"Table\",{ref:\"table\",attrs:{loading:e.LevelLoading,height:\"440\",\"highlight-row\":\"\",border:\"\",columns:e.columsLevel,data:e.dauLevelData}})],1)],1),l(\"div\",[l(\"vTitleHead\",{attrs:{inputName:e.levelTableSum}}),l(\"Row\",[l(\"Table\",{ref:\"table\",attrs:{loading:e.LevelLoading,height:\"440\",\"highlight-row\":\"\",border:\"\",columns:e.columsLevelSum,data:e.dauLevelDataSum}})],1)],1),l(\"div\",{staticStyle:{\"margin-top\":\"20px\"}},[l(\"vTitleHead\",{attrs:{inputName:e.levelChart}}),l(\"div\",{staticStyle:{\"background-color\":\"#fff\",\"border-radius\":\"0 0 10px 10px\"},attrs:{id:\"levelChart\"}})],1)],1)},n=[],r=l(\"365c\"),o=l(\"3f27\"),i=l(\"3ac2\"),u={name:\"reportLevel\",components:{vTitleHead:i[\"default\"]},data:function(){return{LevelLoading:!0,isShowCondition:!1,levelTable:\"等级分布\",levelTableSum:\"聚合等级分布\",levelChart:\"等级分布\",defaultPhone:{all:0,android:1,ios:2},defaultData:{yestoday:1,week:7,month:30},phone:\"0\",data:\"7\",option_levelType:[{text:\"活跃等级分布\",value:0},{text:\"注册等级分布\",value:1},{text:\"付费等级分布\",value:2},{text:\"新付费等级分布\",value:3},{text:\"新注册付费等级分布\",value:4}],levelType:{dau_level:0,install_level:1,pay_level:2,new_pay_level:3,pay_install_level:4},reportLevelForm:{index:0},columnsHeadr:[{title:\"日期（星期）\",key:\"ds\",width:150,align:\"center\",fixed:\"left\"}],columsOs:[{title:\"操作系统\",key:\"os\",width:150,align:\"center\",fixed:\"left\"}],columsLevel:[],columsLevelSum:[],dauLevelData:[],dauLevelDataSum:[],chartArr:[],levelG2:{}}},methods:{enter:function(){this.isShowCondition=!0},leave:function(){this.isShowCondition=!1},init:function(){this.LevelLoading=!0,this.queryLevel()},changeType:function(){this.LevelLoading=!0,this.queryLevel()},queryLevel:function(){var e=this,t={gameid:parseInt(this.getStore(\"gameid\")),date:parseInt(this.data),levelType:parseInt(this.reportLevelForm.index),os:this.phone};Object(r[\"Sb\"])(t).then((function(t){if(e.LevelLoading=!1,t.success){var l=t.levelDau,a=t.levelDauSum;l&&a&&function(){var t=0,n=Object.keys(l).sort((function(e,t){return e<t?1:e>t?-1:0}));if(Object.keys(l).length>0&&Object.keys(a).length>0){var r=n[0],i=l[r];t=i[i.length-1].level}for(var u=[],s=1;s<=t;s++){var v=new Object;v.title=s+\"级\",v.key=s+\"level\",v.width=80,v.align=\"center\",u.push(v)}var d=[],c=[],m=function(a){var n={};n.ds=Object(o[\"a\"])(l[a][0].ds),n.os=Object(o[\"a\"])(l[a][0].os);for(var r=1;r<=t;r++)n[r+\"level\"]=0;l[a].forEach((function(t){e.reportLevelForm.index==e.levelType.dau_level?n[t.level+\"level\"]=0==t.dauNum?0:(t.dauLevelNumbers/t.dauNum*100).toFixed(2):e.reportLevelForm.index==e.levelType.install_level?n[t.level+\"level\"]=0==t.installNum?0:(t.installLevelNumbers/t.installNum*100).toFixed(2):e.reportLevelForm.index==e.levelType.pay_level?n[t.level+\"level\"]=0==t.payCount?0:(t.payLevelNumbers/t.payCount*100).toFixed(2):e.reportLevelForm.index==e.levelType.new_pay_level?n[t.level+\"level\"]=0==t.newPayCount?0:(t.newPayLevelNumbers/t.newPayCount*100).toFixed(2):e.reportLevelForm.index==e.levelType.pay_install_level&&(n[t.level+\"level\"]=0==t.payInstallCount?0:(t.payInstallLevelNumbers/t.payInstallCount*100).toFixed(2))})),d.push(n)};for(var p in l)m(p);for(var h=Math.ceil(t/10),f=[],b=[],y=1;y<=h;y++){var x=new Object;x[10*y+\"level\"]=10*y-9+\"~\"+10*y+\"级\",x.title=10*y-9+\"~\"+10*y+\"级\",x.key=10*y+\"level\",x.width=100,x.align=\"center\",b.push(x)}var L=function(t){var l={};l.ds=Object(o[\"a\"])(a[t][0].ds),l.os=Object(o[\"a\"])(a[t][0].os),a[t].forEach((function(a,n){var r=new Object;r.name=10*(n+1)-9+\"~\"+10*(n+1)+\"级\",r.time=t.substr(5,5),e.reportLevelForm.index==e.levelType.dau_level?(l[10*(n+1)+\"level\"]=0==a.dauNum?0:(a.dauLevelNumbers/a.dauNum*100).toFixed(2),r.value=0==a.dauNum?0:parseFloat((a.dauLevelNumbers/a.dauNum*100).toFixed(2))):e.reportLevelForm.index==e.levelType.install_level?(l[10*(n+1)+\"level\"]=0==a.dauNum?0:(a.dauLevelNumbers/a.installNum*100).toFixed(2),r.value=0==a.dauNum?0:parseFloat((a.dauLevelNumbers/a.installNum*100).toFixed(2))):e.reportLevelForm.index==e.levelType.pay_level?(l[10*(n+1)+\"level\"]=0==a.dauNum?0:(a.dauLevelNumbers/a.payCount*100).toFixed(2),r.value=0==a.dauNum?0:parseFloat((a.dauLevelNumbers/a.payCount*100).toFixed(2))):e.reportLevelForm.index==e.levelType.new_pay_level?(l[10*(n+1)+\"level\"]=0==a.dauNum?0:(a.dauLevelNumbers/a.newPayCount*100).toFixed(2),r.value=0==a.dauNum?0:parseFloat((a.dauLevelNumbers/a.newPayCount*100).toFixed(2))):e.reportLevelForm.index==e.levelType.pay_install_level&&(l[10*(n+1)+\"level\"]=0==a.dauNum?0:(a.dauLevelNumbers/a.payInstallCount*100).toFixed(2),r.value=0==a.dauNum?0:parseFloat((a.dauLevelNumbers/a.payInstallCount*100).toFixed(2))),f.push(r)})),c.push(l)};for(var g in a)L(g);f.sort((function(e,t){return e.time<t.time?-1:e.time>t.time?1:0})),d.sort((function(e,t){var l=e.ds,a=t.ds;return l<a?1:l>a?-1:0})),c.sort((function(e,t){var l=e.ds,a=t.ds;return l<a?1:l>a?-1:0})),e.phone==e.defaultPhone.android||e.phone==e.defaultPhone.ios?(e.columsLevel=e.columnsHeadr.concat(e.columsOs).concat(u),e.columsLevelSum=e.columnsHeadr.concat(e.columsOs).concat(b)):(e.columsLevel=e.columnsHeadr.concat(u),e.columsLevelSum=e.columnsHeadr.concat(b)),e.dauLevelData=d,e.dauLevelDataSum=c,e.chartArr=f}(),e.levelG2.changeData(e.chartArr)}}))},levelCharts:function(){this.levelG2=new G2.Chart({container:\"levelChart\",forceFit:!0,height:500}),this.levelG2.source(this.chartArr,{value:{min:0,formatter:function(e){return e+\"%\"}}}),this.levelG2.axis(\"time\",{label:{rotate:-Math.PI/2.5,textAlign:\"end\",textBaseline:\"middle\"}}),this.levelG2.intervalStack().position(\"time*value\").color(\"name\").adjust(\"stack\").shape(\"text\"),this.levelG2.render()},compares:function(e,t){var l=e.ds,a=t.ds;return l<a?1:l>a?-1:0}},mounted:function(){this.levelCharts(),this.init()}},s=u,v=(l(\"f84e\"),l(\"2877\")),d=Object(v[\"a\"])(s,a,n,!1,null,\"c22c30a6\",null);t[\"default\"]=d.exports},f84e:function(e,t,l){\"use strict\";var a=l(\"4f01\"),n=l.n(a);n.a}}]);","extractedComments":[]}