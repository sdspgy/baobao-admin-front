{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-20f018ec\"],{\"0bbe\":function(t,a,e){\"use strict\";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e(\"div\",[e(\"div\",[e(\"RadioGroup\",{attrs:{type:\"button\",size:\"large\"},on:{\"on-change\":function(a){return t.init()}},model:{value:t.data,callback:function(a){t.data=a},expression:\"data\"}},[e(\"Radio\",{attrs:{label:\"1\"}},[t._v(\"昨天\")]),e(\"Radio\",{attrs:{label:\"7\"}},[t._v(\"7日\")]),e(\"Radio\",{attrs:{label:\"30\"}},[t._v(\"30日\")])],1)],1),e(\"Row\",[e(\"Table\",{ref:\"table\",attrs:{height:\"300\",\"highlight-row\":\"\",border:\"\",columns:t.columns,data:t.tableV},on:{\"on-row-click\":t.clickOnlineTable}})],1),e(\"div\",{attrs:{id:\"onlineG2\"}})],1)},r=[],i=e(\"365c\"),o=e(\"3f27\"),u={name:\"reportOnline\",data:function(){return{defaultData:{yestoday:1,week:7,month:30},data:\"7\",columns:[{title:\"日期（星期）\",key:\"ds\",width:150,fixed:\"left\"},{title:\"持续时长\",key:\"duration\",width:150,fixed:\"left\"},{title:\"人数\",key:\"durationNumbers\",width:150,fixed:\"left\"},{title:\"留存用户数\",key:\"durationRetentionNumbers\",width:150,fixed:\"left\"}],tableV:[],charts:[],pyaGroupChart:{}}},methods:{init:function(){this.queryOnline()},queryOnline:function(){var t=this,a={gameid:parseInt(this.getStore(\"gameid\")),date:parseInt(this.data)};Object(i[\"Sb\"])(a).then((function(a){if(a.success){var e=a.onlineDurationDistributions;e.sort(t.compare);var n=[];e.forEach((function(t){t.ds=Object(o[\"a\"])(t.ds),t.ds==e[0].ds&&n.push(t)}));var r=[];n.forEach((function(t){var a=new Object;a.name=\"人数\",a.duration=t.duration,a.value=t.durationNumbers;var e=new Object;e.name=\"留存用户数\",e.duration=t.duration,e.value=t.durationRetentionNumbers,r.push(a),r.push(e)})),t.charts=r,t.tableV=e,t.pyaGroupChart.changeData(t.charts)}}))},clickOnlineTable:function(t){var a=[];this.tableV.forEach((function(e){e.ds==t.ds&&a.push(e)}));var e=[];a.forEach((function(t){var a=new Object;a.name=\"人数\",a.duration=t.duration,a.value=t.durationNumbers;var n=new Object;n.name=\"留存用户数\",n.duration=t.duration,n.value=t.durationRetentionNumbers,e.push(a),e.push(n)})),this.charts=e,this.pyaGroupChart.changeData(this.charts)},G2Online:function(){this.pyaGroupChart=new G2.Chart({container:\"onlineG2\",forceFit:!0,height:500}),this.pyaGroupChart.source(this.charts),this.pyaGroupChart.interval().position(\"duration*value\").color(\"name\").adjust([{type:\"dodge\",marginRatio:1/32}]),this.pyaGroupChart.render()},compare:function(t,a){var e=t.ds,n=a.ds;return e<n?1:e>n?-1:0}},mounted:function(){this.G2Online(),this.init()}},s=u,c=e(\"2877\"),d=Object(c[\"a\"])(s,n,r,!1,null,\"4a13f988\",null);a[\"default\"]=d.exports},\"3f27\":function(t,a,e){\"use strict\";e.d(a,\"a\",(function(){return n}));var n=function(t){var a=new Date(t),e=a.getDay(),n=7-e;switch(n){case 7:t+=\"(七)\";break;case 1:t+=\"(六)\";break;case 2:t+=\"(五)\";break;case 3:t+=\"(四)\";break;case 4:t+=\"(三)\";break;case 5:t+=\"(二)\";break;case 6:t+=\"(一)\";break;default:}return t}}}]);","extractedComments":[]}