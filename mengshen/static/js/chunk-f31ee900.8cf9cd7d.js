(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f31ee900","chunk-8d965cd6"],{"16a8":function(e,t,a){"use strict";var i=a("7e18"),n=a.n(i);n.a},"3ac2":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"titleHead"},[e._v(e._s(e.inputName))])},n=[],s={name:"TitleHead",props:{inputName:String,required:!0},components:{},data:function(){return{}},mounted:function(){},methods:{}},r=s,l=(a("16a8"),a("2877")),c=Object(l["a"])(r,i,n,!1,null,"111682f2",null);t["default"]=c.exports},"66f4":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"background-color":"#fff"}},[a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}]},[a("RadioGroup",{attrs:{type:"button"},on:{"on-change":function(t){return e.init()}},model:{value:e.searchForm.source,callback:function(t){e.$set(e.searchForm,"source",t)},expression:"searchForm.source"}},[a("Radio",{staticStyle:{margin:"10px 10px"},attrs:{label:"0"}},[e._v("用户")]),a("Radio",{staticStyle:{margin:"10px 10px"},attrs:{label:"1"}},[e._v("设备")])],1)],1),a("div",[a("RadioGroup",{attrs:{type:"button"},on:{"on-change":function(t){return e.init()}},model:{value:e.searchForm.os,callback:function(t){e.$set(e.searchForm,"os",t)},expression:"searchForm.os"}},[a("Radio",{staticStyle:{margin:"10px 10px"},attrs:{label:"0"}},[a("span",[e._v("ALL")])]),a("Radio",{staticStyle:{margin:"10px 10px"},attrs:{label:"1"}},[a("span",[e._v("ANDROID")])]),a("Radio",{staticStyle:{margin:"10px 10px"},attrs:{label:"2"}},[a("span",[e._v("IOS")])]),a("Radio",{staticStyle:{margin:"10px 10px"},attrs:{label:"-1"}},[a("span",[e._v("NONE")])])],1)],1),a("div",[a("RadioGroup",{attrs:{type:"button"},on:{"on-change":function(t){return e.init()}},model:{value:e.searchForm.day,callback:function(t){e.$set(e.searchForm,"day",t)},expression:"searchForm.day"}},[e._v(">\n                "),a("Radio",{staticStyle:{margin:"10px 10px"},attrs:{label:"0"}},[e._v("今天")]),a("Radio",{staticStyle:{margin:"10px 10px"},attrs:{label:"1"}},[e._v("昨天")]),a("Radio",{staticStyle:{margin:"10px 10px"},attrs:{label:"7"}},[e._v("7天")]),a("Radio",{staticStyle:{margin:"10px 10px"},attrs:{label:"30"}},[e._v("30天")])],1)],1),a("div",[a("RadioGroup",{attrs:{type:"button"},on:{"on-change":function(t){return e.showclients(e.key)}},model:{value:e.key,callback:function(t){e.key=t},expression:"key"}},[e._v(">\n                "),a("Radio",{staticStyle:{margin:"10px 10px"},attrs:{label:"all"}},[e._v("概况")]),a("Radio",{staticStyle:{margin:"10px 10px"},attrs:{label:"creative"}},[e._v("渠道")]),a("Radio",{staticStyle:{margin:"10px 10px"},attrs:{label:"client"}},[e._v("分服")])],1)],1),a("Form",{ref:"searchForm",staticClass:"search-form",attrs:{model:e.searchForm,inline:"","label-width":70}},[e.showcreative?a("Form-item",{attrs:{label:"",prop:"creative"}},[a("Select",{staticStyle:{width:"200px"},on:{"on-change":function(t){return e.init()}},model:{value:e.searchForm.creative,callback:function(t){e.$set(e.searchForm,"creative",t)},expression:"searchForm.creative"}},e._l(e.creativemap,(function(t){return a("Option",{key:t.key,attrs:{value:t.key}},[e._v(e._s(t.name))])})),1)],1):e._e(),e.showclient?a("Form-item",{attrs:{label:"",prop:"client"}},[a("Select",{staticStyle:{width:"200px"},on:{"on-change":function(t){return e.init()}},model:{value:e.searchForm.clientid,callback:function(t){e.$set(e.searchForm,"clientid",t)},expression:"searchForm.clientid"}},e._l(e.clientmap,(function(t){return a("Option",{key:t.key,attrs:{value:t.key}},[e._v(e._s(t.name))])})),1)],1):e._e()],1)],1),a("div",[a("vTitleHead",{attrs:{inputName:e.installChart}}),a("div",{staticStyle:{"background-color":"#fff","border-radius":"0 0 10px 10px"},attrs:{id:"surveyOneLine"}})],1),a("div",{staticStyle:{"margin-top":"20px"}},[a("vTitleHead",{attrs:{inputName:e.installTable}}),a("Row",[a("Table",{ref:"table",attrs:{height:"405",loading:e.loadingAdd,border:"",columns:e.columnspro,data:e.data,sortable:"custom"}})],1)],1),e.showcc?a("div",{staticStyle:{"margin-top":"20px"}},[a("vTitleHead",{attrs:{inputName:e.installTables}}),a("Row",[a("Table",{ref:"table",attrs:{height:"405","highlight-row":"",border:"",columns:e.columnscc,data:e.sharePayResultTypesCC}})],1)],1):e._e()])},n=[],s=a("365c"),r=a("3ac2"),l={name:"pay",components:{vTitleHead:r["default"]},comments:{},data:function(){return{loadingAdd:!0,isShow:!0,installTable:"新增数据",installTables:"新增数据(Android/iOS)",installChart:"新增趋势",columnspro:[],columns:[{title:"日期(星期)",key:"ds",align:"center",width:150},{title:"操作系统",key:"os",width:100,align:"center",checkAccess:[2]},{title:"小时",key:"dayOfHour",width:100,checkAccess:[3]},{title:"渠道",key:"creative",width:100,align:"center",checkAccess:[4]},{title:"服",key:"clientid",width:100,align:"center",checkAccess:[1]},{title:"注册数",key:"installNum",align:"center",width:80},{title:"新付费率（%）",key:"payInstallRate",align:"center",width:130},{title:"新付费ARPU",key:"payInstallARPU",align:"center",width:120},{title:"新付费ARPPU",key:"payInstallARPPU",align:"center",width:120},{title:"新付费人数",key:"payInstallCount",align:"center",width:100},{title:"新付费总额",key:"payInstallAmount",align:"center",width:100},{title:"新付费次数",key:"payInstallTimes"}],columnscc:[{title:"日期(星期)",key:"ds",align:"center",width:120},{title:"操作系统",key:"os",align:"center",width:100},{title:"注册数",key:"installNum",align:"center",width:80},{title:"新付费率（%）",key:"payInstallRate",align:"center",width:130},{title:"新付费ARPU",key:"payInstallARPU",align:"center",width:120},{title:"新付费ARPPU",key:"payInstallARPPU",align:"center",width:120},{title:"新付费人数",key:"payInstallCount",align:"center",width:100},{title:"新付费总额",key:"payInstallAmount",align:"center",width:100},{title:"新付费次数",key:"payInstallTimes"}],data:[],searchForm:{source:"0",creativeid:"",clientid:"",gameid:parseInt(this.getStore("gameid")),day:"7",os:"0",page:1},total:0,games:[],sharePayResultTypesCC:[],creatives:[],clients:[],clientmap:[],creativemap:[],surveyOneLine:{},datas:[],key:"all",showcreative:!1,showclient:!1,showcc:!0}},methods:{init:function(){this.loadingAdd=!0,0==this.getStore("parentId")?this.isShow=!0:this.isShow=!1,this.queryAllServer()},handleSearch:function(){this.queryAllServer()},queryAllServer:function(){var e=this;this.columnspro=JSON.parse(JSON.stringify(this.columns)),0!=this.searchForm.day&&1!=this.searchForm.day&&this.handleColumns(3),0==this.searchForm.os&&""==this.searchForm.clientid&&null==this.searchForm.creative&&this.handleColumns(2),""==this.searchForm.clientid&&this.handleColumns(1),null==this.searchForm.creative&&this.handleColumns(4),Object(s["Nb"])(this.searchForm).then((function(t){if(e.loadingAdd=!1,t.success){e.sharePayResultTypesCC=t.sharePayResultTypesCC,e.creatives=t.creatives,e.clients=t.clients,e.creativemap=t.creatives.map((function(e){return{key:e.creativeid,name:e.creativeName}}));var a=new Object;a.key="0",a.name="全渠道",e.creativemap.unshift(a);var i=new Map;e.creativemap.forEach((function(e,t){i.set(e.key,e.name)})),e.clientmap=t.clients.map((function(e){return{key:e.serverid,name:e.serverName}}));var n=new Object;n.key="-1",n.name="所有服",e.clientmap.unshift(n);var s=new Map;e.clientmap.forEach((function(e,t){s.set(e.key,e.name)})),e.data=e.tableDataProcess(t.msg,i,s),e.sharePayResultTypesCC=e.tableDataProcess(t.sharePayResultTypesCC,i,s);var r=[];e.data.forEach((function(e){r.push(e.installNum)})),e.datas=e.f2DI(r,e.searchForm.day,e.data,0),e.surveyOneLine.changeData(e.datas)}}))},showclients:function(e){"all"==this.key?(this.showcreative=!1,this.showclient=!1,this.showcc=!0,delete this.searchForm.creative,this.searchForm.clientid="",this.init()):"creative"==this.key?(this.showcreative=!0,this.showclient=!1,this.showcc=!1,this.searchForm.creative="0",this.searchForm.clientid="",this.init()):(this.showcreative=!1,this.showclient=!0,this.showcc=!1,delete this.searchForm.creative,this.searchForm.clientid="-1",this.init())},handleColumns:function(e){var t=this;this.columnspro.map((function(a,i){var n=a.checkAccess;n&&(n-Number(e)==0?t.columnspro.splice(i,1):console.log(i))}))},weekFunction:function(e){var t=new Date(e),a=t.getDay(),i=7-a;switch(i){case 7:e+="(七)";break;case 1:e+="(六)";break;case 2:e+="(五)";break;case 3:e+="(四)";break;case 4:e+="(三)";break;case 5:e+="(二)";break;case 6:e+="(一)";break;default:}return e},surveyOneLineChart:function(){this.surveyOneLine=new G2.Chart({container:"surveyOneLine",forceFit:!0,height:300}),this.surveyOneLine.source(this.datas,{}),this.surveyOneLine.scale("value",{min:0,alias:"人数"}),this.surveyOneLine.scale("time",{tickCount:9}),this.surveyOneLine.tooltip({crosshairs:{type:"line"}}),this.surveyOneLine.axis("time",{label:{rotate:-Math.PI/4,textAlign:"end",textBaseline:"middle"}}),this.surveyOneLine.line().position("time*value").shape("smooth"),this.surveyOneLine.point().position("time*value").size(4).shape("circle").style({stroke:"#fff",lineWidth:1}).color("l(0) 0:#1E90FF 0.5:#1E90FF 1:#1E90FF"),this.surveyOneLine.area().position("time*value").shape("smooth"),this.surveyOneLine.render()},f2DI:function(e,t,a,i){var n=[];return 0==t||1==t?a.forEach((function(e){var t=new Object;t.value=0==i?e.dauNum:e.installNum,t.time=e.dayOfHour+"时",n.push(t)})):a.forEach((function(e,t){var a=new Object;a.time=e.ds.substr(5,5),a.value=e.installNum,n.push(a)})),"7"!=t&&"30"!=t&&"0"!=t||n.reverse(),n},getTime:function(e){var t=new Date;t.setTime(t.getTime()-864e5*(e+1));var a=t.getMonth()+1+"-"+t.getDate();return a},tableDataProcess:function(e,t,a){var i=this;return e&&e.forEach((function(e){e.ds=i.weekFunction(e.ds),e.client=void 0===a.get(String(e.clientid))?e.client:a.get(String(e.clientid)),e.creative=void 0===t.get(e.creative)?e.creative:t.get(e.creative),e.payInstallRate=0==e.installNum?0:(100*e.payInstallCount/e.installNum).toFixed(2),e.payInstallARPU=0==e.installNum?0:(e.payInstallAmount/e.installNum).toFixed(2),e.payInstallARPPU=0==e.payInstallCount?0:(e.payInstallAmount/e.payInstallCount).toFixed(2),e.payInstallAmount=e.payInstallAmount/i.getStore("currencyRate")})),e}},mounted:function(){this.init(),this.surveyOneLineChart()}},c=l,o=a("2877"),h=Object(o["a"])(c,i,n,!1,null,"5fadac9c",null);t["default"]=h.exports},"7e18":function(e,t,a){}}]);