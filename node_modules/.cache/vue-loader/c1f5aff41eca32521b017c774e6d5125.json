{"remainingRequest":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/reportData/reportVisit/reportVisit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/reportData/reportVisit/reportVisit.vue","mtime":1585555403593},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {queryVisit} from '@/api/index';\nimport {weekChange} from '@/libs/changeWeek';\n\nexport default {\n    name: \"reportVisit\",\n    data() {\n        return {\n            defaultData: {\n                yestoday: 1,\n                week: 7,\n                month: 30\n            },\n            data: \"7\",\n            value_visitType: {\n                index: 0\n            },\n            defaultVisitType: [\n                {\n                    name: 'visits',\n                    value: 0\n                },\n                {\n                    name: 'averageVisits',\n                    value: 1,\n                }, {\n                    name: 'averageStayTime',\n                    value: 2\n                }\n            ],\n            visitType: [\n                {\n                    text: '访问次数',\n                    value: 0\n                },\n                {\n                    text: '平均访问次数',\n                    value: 1\n                },\n                {\n                    text: '平均停留时间',\n                    value: 2\n                }\n            ],\n            columns: [\n                {\n                    title: '日期（星期）',\n                    key: 'ds',\n                    width: 150,\n                    align: 'center',\n                    fixed: 'left'\n                },\n                {\n                    title: '访问次数',\n                    key: 'visits',\n                    width: 150,\n                    align: 'center',\n                    fixed: 'left'\n                },\n                {\n                    title: '平均访问次数',\n                    key: 'averageVisits',\n                    width: 150,\n                    align: 'center',\n                    fixed: 'left'\n                },\n                {\n                    title: '平均停留时间（S）',\n                    key: 'averageStayTime',\n                    width: 150,\n                    align: 'center',\n                    fixed: 'left'\n                },\n            ],\n            visitG2: {},\n            tableV: [],\n            charts: [],\n        }\n    },\n    methods: {\n        init() {\n            this.queryVisit();\n        },\n        queryVisit() {\n            const that = this;\n            let params = {\n                gameid: parseInt(that.getStore('gameid')),\n                date: parseInt(that.data)\n            }\n            queryVisit(params).then(e => {\n                if (e.success) {\n                    let visits = e.visitTrendings;\n                    visits.forEach(item => {\n                        item.ds = weekChange(item.ds);\n                        item.averageVisits = Number(item.averageVisits).toFixed(2);\n                        item.averageStayTime = Number(item.averageStayTime).toFixed(2);\n                    })\n                    let typeString = '';\n                    for (let key in that.visitType) {\n                        if (that.defaultVisitType[key].value == that.value_visitType.index.toString()) {\n                            typeString = that.defaultVisitType[key].name;\n                            break;\n                        }\n                    }\n                    let charts = [];\n                    visits.forEach(item => {\n                        let chartObject = new Object();\n                        chartObject.ds = item.ds.substr(5, 5);\n                        chartObject.value = Number(item[typeString]);\n                        charts.push(chartObject);\n                    })\n                    that.tableV = visits;\n                    that.charts = charts;\n                    that.visitG2.changeData(that.charts);\n                }\n            })\n        },\n        visitG2F() {\n            this.visitG2 = new G2.Chart({\n                container: 'visitChart',\n                forceFit: true,\n                height: 270\n            });\n            this.visitG2.source(this.charts, {});\n            this.visitG2.scale('value', {\n                min: 0,\n                // alias: '',\n            });\n            this.visitG2.scale('ds', {\n                // range: [0, 1]\n                tickCount: 6,\n            });\n            this.visitG2.tooltip({\n                crosshairs: {\n                    type: 'line'\n                }\n            });\n            // 坐标轴文本旋转\n            this.visitG2.axis('ds', {\n                label: {\n                    rotate: -Math.PI / 2.5,\n                    textAlign: 'end',\n                    textBaseline: 'middle'\n                }\n            });\n            this.visitG2.line().position('ds*value').shape('smooth');\n            this.visitG2.point().position('ds*value')\n                .size(4)\n                .shape('circle')\n                .style({\n                    stroke: '#fff',\n                    lineWidth: 1\n                })\n                .color('l(0) 0:#1E90FF 0.5:#1E90FF 1:#1E90FF');\n            this.visitG2.area().position('ds*value').shape('smooth');\n            this.visitG2.render();\n        },\n        changeType() {\n            this.init();\n        }\n    },\n    mounted() {\n        this.visitG2F();\n        this.init();\n    }\n    ,\n}\n",{"version":3,"sources":["reportVisit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"reportVisit.vue","sourceRoot":"src/views/reportData/reportVisit","sourcesContent":["<template>\n    <div style=\"background-color:#fff; height: 1000px\">\n        <!--时间-->\n        <div>\n            <RadioGroup v-model=\"data\" type=\"button\"  @on-change=\"init()\">\n                <Radio style=\"margin: 10px 10px\" label=\"1\">昨天</Radio>\n                <Radio style=\"margin: 10px 10px\" label=\"7\">7日</Radio>\n                <Radio style=\"margin: 10px 10px\" label=\"30\">30日</Radio>\n            </RadioGroup>\n        </div>\n\n        <Row style=\"width: 40%;background-color:#fff; margin-top: 50px;position: absolute\">\n            <Table height=\"330\" highlight-row border :columns=\"columns\" :data=\"tableV\"\n                   ref=\"table\"></Table>\n        </Row>\n\n        <div style=\"position: relative;left: 47%;top: 50px;background-color:#fff;border-radius: 10px 10px 10px 10px;width: 40%\">\n            <!--        类型-->\n            <Form ref=\"from\" class=\"\" :model=\"value_visitType\" :label-width=\"80\">\n                <FormItem label=\"\" prop=\"value\">\n                    <Select v-model=\"value_visitType.index\" style=\"width:200px\"\n                            @on-change=\"changeType()\">\n                        <Option v-for=\"item in visitType\" :value=\"item.value\"\n                                :key=\"item.value\">{{ item.text }}\n                        </Option>\n                    </Select>\n                </FormItem>\n            </Form>\n            <div id=\"visitChart\"></div>\n        </div>\n    </div>\n</template>\n\n<script>\n    import {queryVisit} from '@/api/index';\n    import {weekChange} from '@/libs/changeWeek';\n\n    export default {\n        name: \"reportVisit\",\n        data() {\n            return {\n                defaultData: {\n                    yestoday: 1,\n                    week: 7,\n                    month: 30\n                },\n                data: \"7\",\n                value_visitType: {\n                    index: 0\n                },\n                defaultVisitType: [\n                    {\n                        name: 'visits',\n                        value: 0\n                    },\n                    {\n                        name: 'averageVisits',\n                        value: 1,\n                    }, {\n                        name: 'averageStayTime',\n                        value: 2\n                    }\n                ],\n                visitType: [\n                    {\n                        text: '访问次数',\n                        value: 0\n                    },\n                    {\n                        text: '平均访问次数',\n                        value: 1\n                    },\n                    {\n                        text: '平均停留时间',\n                        value: 2\n                    }\n                ],\n                columns: [\n                    {\n                        title: '日期（星期）',\n                        key: 'ds',\n                        width: 150,\n                        align: 'center',\n                        fixed: 'left'\n                    },\n                    {\n                        title: '访问次数',\n                        key: 'visits',\n                        width: 150,\n                        align: 'center',\n                        fixed: 'left'\n                    },\n                    {\n                        title: '平均访问次数',\n                        key: 'averageVisits',\n                        width: 150,\n                        align: 'center',\n                        fixed: 'left'\n                    },\n                    {\n                        title: '平均停留时间（S）',\n                        key: 'averageStayTime',\n                        width: 150,\n                        align: 'center',\n                        fixed: 'left'\n                    },\n                ],\n                visitG2: {},\n                tableV: [],\n                charts: [],\n            }\n        },\n        methods: {\n            init() {\n                this.queryVisit();\n            },\n            queryVisit() {\n                const that = this;\n                let params = {\n                    gameid: parseInt(that.getStore('gameid')),\n                    date: parseInt(that.data)\n                }\n                queryVisit(params).then(e => {\n                    if (e.success) {\n                        let visits = e.visitTrendings;\n                        visits.forEach(item => {\n                            item.ds = weekChange(item.ds);\n                            item.averageVisits = Number(item.averageVisits).toFixed(2);\n                            item.averageStayTime = Number(item.averageStayTime).toFixed(2);\n                        })\n                        let typeString = '';\n                        for (let key in that.visitType) {\n                            if (that.defaultVisitType[key].value == that.value_visitType.index.toString()) {\n                                typeString = that.defaultVisitType[key].name;\n                                break;\n                            }\n                        }\n                        let charts = [];\n                        visits.forEach(item => {\n                            let chartObject = new Object();\n                            chartObject.ds = item.ds.substr(5, 5);\n                            chartObject.value = Number(item[typeString]);\n                            charts.push(chartObject);\n                        })\n                        that.tableV = visits;\n                        that.charts = charts;\n                        that.visitG2.changeData(that.charts);\n                    }\n                })\n            },\n            visitG2F() {\n                this.visitG2 = new G2.Chart({\n                    container: 'visitChart',\n                    forceFit: true,\n                    height: 270\n                });\n                this.visitG2.source(this.charts, {});\n                this.visitG2.scale('value', {\n                    min: 0,\n                    // alias: '',\n                });\n                this.visitG2.scale('ds', {\n                    // range: [0, 1]\n                    tickCount: 6,\n                });\n                this.visitG2.tooltip({\n                    crosshairs: {\n                        type: 'line'\n                    }\n                });\n                // 坐标轴文本旋转\n                this.visitG2.axis('ds', {\n                    label: {\n                        rotate: -Math.PI / 2.5,\n                        textAlign: 'end',\n                        textBaseline: 'middle'\n                    }\n                });\n                this.visitG2.line().position('ds*value').shape('smooth');\n                this.visitG2.point().position('ds*value')\n                    .size(4)\n                    .shape('circle')\n                    .style({\n                        stroke: '#fff',\n                        lineWidth: 1\n                    })\n                    .color('l(0) 0:#1E90FF 0.5:#1E90FF 1:#1E90FF');\n                this.visitG2.area().position('ds*value').shape('smooth');\n                this.visitG2.render();\n            },\n            changeType() {\n                this.init();\n            }\n        },\n        mounted() {\n            this.visitG2F();\n            this.init();\n        }\n        ,\n    }\n</script>\n\n<style scoped>\n\n</style>\n"]}]}