{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-aa3b22fa\"],{\"3f27\":function(e,t,a){\"use strict\";a.d(t,\"a\",(function(){return r}));var r=function(e){var t=new Date(e),a=t.getDay(),r=7-a;switch(r){case 7:e+=\"(七)\";break;case 1:e+=\"(六)\";break;case 2:e+=\"(五)\";break;case 3:e+=\"(四)\";break;case 4:e+=\"(三)\";break;case 5:e+=\"(二)\";break;case 6:e+=\"(一)\";break;default:}return e}},ad50:function(e,t,a){\"use strict\";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"div\",[a(\"RadioGroup\",{attrs:{type:\"button\",size:\"large\"},on:{\"on-change\":function(t){return e.init()}},model:{value:e.data,callback:function(t){e.data=t},expression:\"data\"}},[a(\"Radio\",{attrs:{label:\"1\"}},[e._v(\"昨天\")]),a(\"Radio\",{attrs:{label:\"7\"}},[e._v(\"7日\")]),a(\"Radio\",{attrs:{label:\"30\"}},[e._v(\"30日\")])],1)],1),a(\"div\",{attrs:{id:\"payChartGroup\"}}),a(\"div\",{attrs:{id:\"payChart\"}}),a(\"Row\",[a(\"Table\",{ref:\"table\",attrs:{height:\"300\",\"highlight-row\":\"\",border:\"\",columns:e.columnsPay,data:e.payBehavs}})],1),a(\"Row\",[a(\"Table\",{ref:\"table\",attrs:{height:\"300\",\"highlight-row\":\"\",border:\"\",columns:e.columnsPayPeople,data:e.payBehavs}})],1)],1)},n=[],i=a(\"365c\"),o=a(\"3f27\"),s={name:\"reportPayBehav\",data:function(){return{defaultData:{yestoday:1,week:7,month:30},data:\"7\",payBehavs:[],payBehavesChart:[],charts:[],columnsPay:[{title:\"日期（星期）\",key:\"ds\",width:150,fixed:\"left\"},{title:\"[0,10}\",key:\"one\",width:150},{title:\"(10,50]\",key:\"two\",width:150},{title:\"(50,100]\",key:\"three\",width:150},{title:\"(100,200]\",key:\"foure\",width:150},{title:\"(200,500]\",key:\"five\",width:150},{title:\"(500,1000]\",key:\"six\",width:150},{title:\"1000以上\",key:\"seven\",width:150}],columnsPayPeople:[{title:\"日期（星期）\",key:\"ds\",width:150,fixed:\"left\"},{title:\"[0,10}\",key:\"onePeople\",width:150},{title:\"(10,50]\",key:\"twoPeople\",width:150},{title:\"(50,100]\",key:\"threePeople\",width:150},{title:\"(100,200]\",key:\"fourePeople\",width:150},{title:\"(200,500]\",key:\"fivePeople\",width:150},{title:\"(500,1000]\",key:\"sixPeople\",width:150},{title:\"1000以上\",key:\"sevenPeople\",width:150}],pyaGroupChart:{},surveyOneLine:{}}},methods:{init:function(){this.queryPay()},queryPay:function(){var e=this,t={gameid:parseInt(this.getStore(\"gameid\")),date:parseInt(this.data)};Object(i[\"Ub\"])(t).then((function(t){if(t.success){var a=t.shareDailyResultTypes,r=t.payBehavMap,n=[],i=new Map,s=function(t){var a=0;for(var s in r[t])a+=r[t][s].length;i.set(t,a);var u=new Object;u.ds=Object(o[\"a\"])(t);var h=0,c=0,l=0,p=0,d=0,v=0,y=0,f=new Set,m=new Set,w=new Set,b=new Set,O=new Set,P=new Set,k=new Set;r[t].collectOne.forEach((function(e){h+=e.amount,f.add(e.userid)}));var g=f.size;u.one=h/e.getStore(\"currencyRate\"),u.onePeople=g,r[t].collectTwo.forEach((function(e){c+=e.amount,m.add(e.userid)}));var C=m.size;u.two=c/e.getStore(\"currencyRate\"),u.twoPeople=C,r[t].collectThree.forEach((function(e){l+=e.amount,w.add(e.userid)}));var j=w.size;u.three=l/e.getStore(\"currencyRate\"),u.threePeople=j,r[t].collectFoure.forEach((function(e){p+=e.amount,b.add(e.userid)}));var R=b.size;u.foure=p/e.getStore(\"currencyRate\"),u.fourePeople=R,r[t].collectFive.forEach((function(e){d+=e.amount,O.add(e.userid)}));var N=O.size;u.five=d/e.getStore(\"currencyRate\"),u.fivePeople=N,r[t].collectSix.forEach((function(e){v+=e.amount,P.add(e.userid)}));var S=P.size;u.six=v/e.getStore(\"currencyRate\"),u.sixPeople=S,r[t].collectSeven.forEach((function(e){y+=e.amount,k.add(e.userid)}));var x=k.size;u.seven=y/e.getStore(\"currencyRate\"),u.sevenPeople=x,n.push(u)};for(var u in r)s(u);var h=[];a.sort(e.compareR),a.forEach((function(e){var t=0==e.dauNum?0:((i.get(e.ds)||0)/e.dauNum).toFixed(3),a=new Object;a.ds=e.ds.substr(5,5),a.value=t,h.push(a)})),n.sort(e.compare);var c=0,l=0,p=0,d=0,v=0,y=0,f=0,m=0,w=0,b=0,O=0,P=0,k=0,g=0;n.forEach((function(e){c+=e.one,l+=e.onePeople,p+=e.two,d+=e.twoPeople,v+=e.three,y+=e.threePeople,f+=e.foure,m+=e.fourePeople,w+=e.five,b+=e.fivePeople,O+=e.six,P+=e.sixPeople,k+=e.seven,g+=e.sevenPeople}));var C=[],j=new Object;j.name=\"付费额\",j.payNum=\"[0,10]\",j.value=c,C.push(j);var R=new Object;R.name=\"付费人数\",R.payNum=\"[0,10]\",R.value=l,C.push(R);var N=new Object;N.name=\"付费额\",N.payNum=\"(10,50]\",N.value=p,C.push(N);var S=new Object;S.name=\"付费人数\",S.payNum=\"(10,50]\",S.value=d,C.push(S);var x=new Object;x.name=\"付费额\",x.payNum=\"(50,100]\",x.value=v,C.push(x);var L=new Object;L.name=\"付费人数\",L.payNum=\"(50,100]\",L.value=y,C.push(L);var E=new Object;E.name=\"付费额\",E.payNum=\"(100,200]\",E.value=f,C.push(E);var B=new Object;B.name=\"付费人数\",B.payNum=\"(100,200]\",B.value=m,C.push(B);var F=new Object;F.name=\"付费额\",F.payNum=\"(200,500]\",F.value=w,C.push(F);var G=new Object;G.name=\"付费人数\",G.payNum=\"(200,500]\",G.value=b,C.push(G);var z=new Object;z.name=\"付费额\",z.payNum=\"(500,1000]\",z.value=O,C.push(z);var D=new Object;D.name=\"付费人数\",D.payNum=\"(500,1000]\",D.value=P,C.push(D);var T=new Object;T.name=\"付费额\",T.payNum=\"1000以上\",T.value=k,C.push(T);var _=new Object;_.name=\"付费人数\",_.payNum=\"1000以上\",_.value=g,C.push(_),e.payBehavs=n,e.payBehavesChart=C,e.charts=h,e.surveyOneLine.changeData(e.charts),e.pyaGroupChart.changeData(e.payBehavesChart)}}))},reportLineChart:function(){this.pyaGroupChart=new G2.Chart({container:\"payChartGroup\",forceFit:!0,height:500}),this.pyaGroupChart.source(this.payBehavesChart),this.pyaGroupChart.interval().position(\"payNum*value\").color(\"name\").adjust([{type:\"dodge\",marginRatio:1/32}]),this.pyaGroupChart.render(),this.surveyOneLine=new G2.Chart({container:\"payChart\",forceFit:!0,height:500}),this.surveyOneLine.source(this.handelRetentionOne,{}),this.surveyOneLine.scale(\"value\",{min:0,alias:\"人均付费次数\"}),this.surveyOneLine.scale(\"ds\",{tickCount:6}),this.surveyOneLine.tooltip({crosshairs:{type:\"line\"}}),this.surveyOneLine.axis(\"ds\",{label:{rotate:-Math.PI/2.5,textAlign:\"end\",textBaseline:\"middle\"}}),this.surveyOneLine.line().position(\"ds*value\").shape(\"smooth\").color(\"l(0) 0:#F2C587 0.5:#ED7973 1:#8659AF\"),this.surveyOneLine.point().position(\"ds*value\").size(4).shape(\"circle\").style({stroke:\"#fff\",lineWidth:1}).color(\"l(0) 0:#F2C587 0.5:#ED7973 1:#8659AF\"),this.surveyOneLine.area().position(\"ds*value\").shape(\"smooth\").color(\"l(0) 0:#F2C587 0.5:#ED7973 1:#8659AF\"),this.surveyOneLine.render()},compare:function(e,t){var a=e.ds,r=t.ds;return a<r?1:a>r?-1:0},compareR:function(e,t){var a=e.ds,r=t.ds;return a<r?-1:a>r?1:0}},mounted:function(){this.reportLineChart(),this.init()}},u=s,h=a(\"2877\"),c=Object(h[\"a\"])(u,r,n,!1,null,\"32fad600\",null);t[\"default\"]=c.exports}}]);","extractedComments":[]}