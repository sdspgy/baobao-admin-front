{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-2d237ca6\"],{fd2d:function(e,r,t){\"use strict\";t.r(r);var s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t(\"div\",[t(\"Form\",{ref:\"searchForm\",staticClass:\"search-form\",attrs:{model:e.searchForm,inline:\"\",\"label-width\":70}},[t(\"Form-item\",{attrs:{label:\"游戏ID\",prop:\"gameid\"}},[t(\"Select\",{staticStyle:{width:\"200px\"},model:{value:e.searchForm.gameid,callback:function(r){e.$set(e.searchForm,\"gameid\",r)},expression:\"searchForm.gameid\"}},e._l(e.games,(function(r){return t(\"Option\",{key:r.gameid,attrs:{value:r.gameid}},[e._v(e._s(r.name))])})),1)],1),t(\"Form-item\",{attrs:{label:\"分服码\",prop:\"serverid\"}},[t(\"Input\",{staticStyle:{width:\"200px\"},attrs:{type:\"text\",clearable:\"\",placeholder:\"请输入分服码\"},model:{value:e.searchForm.serverid,callback:function(r){e.$set(e.searchForm,\"serverid\",r)},expression:\"searchForm.serverid\"}})],1)],1),t(\"Button\",{attrs:{type:\"primary\",icon:\"ios-search\"},on:{click:e.handleSearch}},[e._v(\"搜索\")]),t(\"Button\",{directives:[{name:\"show\",rawName:\"v-show\",value:this.$route.meta.permTypes.includes(\"add\"),expression:\"this.$route.meta.permTypes.includes('add')\"}],staticStyle:{margin:\"10px 10px\"},attrs:{type:\"primary\",icon:\"md-add\"},on:{click:e.add}},[e._v(\"添加新服\\n    \")]),t(\"Row\",[t(\"Table\",{ref:\"table\",attrs:{loading:e.loading,border:\"\",columns:e.columns,data:e.data,sortable:\"custom\"}})],1),t(\"Row\",{staticClass:\"page\",attrs:{type:\"flex\",justify:\"end\"}},[t(\"Page\",{attrs:{current:e.searchForm.pageNumber,total:e.total,\"page-size\":e.searchForm.pageSize,\"page-size-opts\":[10,20,50],size:\"small\",\"show-total\":\"\",\"show-elevator\":\"\",\"show-sizer\":\"\"},on:{\"on-change\":e.changePage,\"on-page-size-change\":e.changePageSize}})],1),t(\"Modal\",{attrs:{title:e.modalTitle,\"mask-closable\":!1,width:500},model:{value:e.serverModalVisible,callback:function(r){e.serverModalVisible=r},expression:\"serverModalVisible\"}},[t(\"Form\",{ref:\"serverForm\",attrs:{model:e.serverForm,\"label-width\":80,rules:e.serverFormValidate}},[t(\"FormItem\",{attrs:{label:\"游戏名称\",prop:\"gameid\"}},[t(\"Select\",{staticStyle:{width:\"200px\"},model:{value:e.serverForm.gameid,callback:function(r){e.$set(e.serverForm,\"gameid\",r)},expression:\"serverForm.gameid\"}},e._l(e.games,(function(r){return t(\"Option\",{key:r.gameid,attrs:{value:r.gameid}},[e._v(e._s(r.name))])})),1)],1),t(\"FormItem\",{attrs:{label:\"分服码\",prop:\"serverid\",error:e.errorServerid}},[t(\"Input\",{model:{value:e.serverForm.serverid,callback:function(r){e.$set(e.serverForm,\"serverid\",r)},expression:\"serverForm.serverid\"}})],1),t(\"FormItem\",{attrs:{label:\"分服名称\",prop:\"serverName\",error:e.errorServerName}},[t(\"Input\",{model:{value:e.serverForm.serverName,callback:function(r){e.$set(e.serverForm,\"serverName\",r)},expression:\"serverForm.serverName\"}})],1)],1),t(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[t(\"Button\",{attrs:{type:\"text\"},on:{click:e.cancelServer}},[e._v(\"取消\")]),t(\"Button\",{attrs:{type:\"primary\",loading:e.submitLoading},on:{click:e.submitServer}},[e._v(\"提交\")])],1)],1)],1)},i=[],a=t(\"365c\"),o={name:\"gameServer\",comments:{},data:function(){var e=this;return{columns:[{type:\"selection\",width:60,align:\"center\",fixed:\"left\"},{type:\"index\",width:60,align:\"center\",fixed:\"left\"},{title:\"游戏ID\",key:\"gameid\",width:150},{title:\"分服码\",key:\"serverid\",width:150},{title:\"分服名称\",key:\"serverName\",width:150},{title:\"操作\",key:\"action\",width:200,align:\"center\",render:function(r,t){var s=r(\"Button\",{props:{type:\"primary\",size:\"small\",disabled:!e.$route.meta.permTypes.includes(\"edit\")},style:{marginRight:\"5px\"},on:{click:function(){e.edit(t.row)}}},\"编辑\"),i=r(\"Button\",{props:{type:\"error\",size:\"small\",disabled:!e.$route.meta.permTypes.includes(\"delete\")},on:{click:function(){e.remove(t.row)}}},\"删除\");return r(\"div\",[s,i])}}],data:[],searchForm:{gameid:\"\",serverid:\"\",pageNumber:1,pageSize:10},total:0,submitLoading:!1,serverModalVisible:!1,serverForm:{id:\"\",gameid:\"\",serverid:\"\",serverName:\"\"},games:[]}},methods:{init:function(){this.queryAllServer()},handleSearch:function(){this.queryAllServer()},queryAllServer:function(){var e=this;Object(a[\"Kb\"])(this.searchForm).then((function(r){r.success&&(e.data=r.result[1].records,e.games=r.result[0].records,e.total=r.result.total)}))},changePage:function(e){this.searchForm.pageNumber=e,this.queryAllServer(),this.clearSelectAll()},changePageSize:function(e){this.searchForm.pageSize=e,this.queryAllServer()},clearSelectAll:function(){this.$refs.table.selectAll(!1)},submitServer:function(){var e=this;this.$refs.serverForm.validate((function(r){if(r)if(0==e.modalType){if(delete e.serverForm.id,\"\"==e.serverForm.serverid||void 0==e.serverForm.serverid)return void(e.errorServerid=\"分服码不能为空\");if(\"\"==e.serverForm.serverName||void 0==e.serverForm.serverName)return void(e.errorServerName=\"分服名称不能为空\");e.submitLoading=!0,Object(a[\"b\"])({gameid:e.serverForm.gameid,serverid:e.serverForm.serverid,serverName:e.serverForm.serverName}).then((function(r){e.submitLoading=!1,r.success&&(e.$Message.success(\"操作成功\"),e.queryAllServer(),e.serverModalVisible=!1)}))}else e.submitLoading=!0,Object(a[\"I\"])({id:e.serverForm.id,gameid:e.serverForm.gameid,serverid:e.serverForm.serverid,serverName:e.serverForm.serverName}).then((function(r){e.submitLoading=!1,r.success&&(e.$Message.success(\"操作成功\"),e.queryAllServer(),e.serverModalVisible=!1)}))}))},cancelAdvert:function(){this.serverModalVisible=!1},add:function(){this.modalType=0,this.modalTitle=\"添加分服\",this.$refs.serverForm.resetFields(),this.serverModalVisible=!0},edit:function(e){for(var r in this.modalType=1,this.modalTitle=\"编辑分服\",this.$refs.serverForm.resetFields(),e)null==e[r]&&(e[r]=\"\");var t=JSON.stringify(e),s=JSON.parse(t);this.serverForm=s,this.serverModalVisible=!0},remove:function(e){var r=this;this.$Modal.confirm({title:\"确认删除\",content:\"您确认要删除分服名为： \"+e.serverName+\"?\",loading:!0,onOk:function(){Object(a[\"u\"])(e.id).then((function(e){r.$Modal.remove(),e.success&&(r.$Message.success(\"删除成功\"),r.queryAllServer())}))}})}},mounted:function(){this.init()}},l=o,n=t(\"2877\"),m=Object(n[\"a\"])(l,s,i,!1,null,\"0b2fe4f2\",null);r[\"default\"]=m.exports}}]);","extractedComments":[]}