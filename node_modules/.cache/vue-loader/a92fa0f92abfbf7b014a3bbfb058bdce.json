{"remainingRequest":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/reportdata/reportRetention/reportRetention.vue?vue&type=style&index=0&id=4881d0ee&scoped=true&lang=css&","dependencies":[{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/reportdata/reportRetention/reportRetention.vue","mtime":1585732964150},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.ivu-table .demo-table-info-cell-address {\n    background-color: #187;\n    color: #fff;\n}\n\n.conditionHead {\n    position: fixed;\n    left: 35%;\n    top: 120px;\n    z-index: 999;\n}\n\n.smillPeople {\n    width: 45px;\n    height: 35px;\n    background-image: url(../../../assets/smillPeople.jpg);\n    background-size: 300px 35px;\n    animation: walk1 1s steps(7) infinite;\n}\n\n@keyframes walk1 {\n    0% {\n        background-position: 0;\n    }\n\n    100% {\n        background-position: 300px;\n    }\n}\n\n.reportChaet {\n    /*position: absolute;*/\n}\n\n.retentionTable {\n    position: relative;\n    left: 52%;\n\n}\n\n.isshowLine {\n    position: absolute;\n}\n",{"version":3,"sources":["reportRetention.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkmCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA","file":"reportRetention.vue","sourceRoot":"src/views/reportdata/reportRetention","sourcesContent":["<template>\n    <div style=\"background-color:#fff;\">\n        <div v-show=\"isShow\">\n            <RadioGroup v-model=\"isDevice\" type=\"button\" @on-change=\"init()\">\n                <Radio style=\"margin: 10px 10px\" label=\"0\">用户</Radio>\n                <Radio style=\"margin: 10px 10px\" label=\"1\">设备</Radio>\n            </RadioGroup>\n        </div>\n        <div>\n            <RadioGroup v-model=\"phone\" type=\"button\" @on-change=\"init()\">\n                <Radio style=\"margin: 10px 10px\" label=\"0\">\n                    <!--                    <Icon type=\"logo-windows\"></Icon>-->\n                    <span>ALL</span>\n                </Radio>\n                <Radio style=\"margin: 10px 10px\" label=\"1\">\n                    <!--                    <Icon type=\"logo-android\"></Icon>-->\n                    <span>ANDROID</span>\n                </Radio>\n                <Radio style=\"margin: 10px 10px\" label=\"2\">\n                    <!--                    <Icon type=\"logo-apple\"></Icon>-->\n                    <span>IOS</span>\n                </Radio>\n                <Radio style=\"margin: 10px 10px\" label=\"3\">\n                    <!--                    <Icon type=\"ios-bookmark\"></Icon>-->\n                    <span>NONE</span>\n                </Radio>\n            </RadioGroup>\n        </div>\n        <div>\n            <RadioGroup v-model=\"data\" type=\"button\" @on-change=\"init()\">\n                <Radio style=\"margin: 10px 10px\" label=\"0\">今天</Radio>\n                <Radio style=\"margin: 10px 10px\" label=\"1\">昨天</Radio>\n                <Radio style=\"margin: 10px 10px\" label=\"7\">7日</Radio>\n                <Radio style=\"margin: 10px 10px\" label=\"30\">30日</Radio>\n            </RadioGroup>\n        </div>\n        <div>\n            <RadioGroup v-model=\"creativeOrClient\" type=\"button\" @on-change=\"creativeOrClientChange()\">\n                <Radio style=\"margin: 10px 10px\" label=\"2\">概况</Radio>\n                <Radio style=\"margin: 10px 10px\" label=\"0\">渠道</Radio>\n                <Radio style=\"margin: 10px 10px\" label=\"1\">分服</Radio>\n            </RadioGroup>\n        </div>\n\n        <Form v-show=\"showCreativeOrClient\" ref=\"from\" class=\"\" :model=\"reportRetentionForm\" :label-width=\"80\">\n            <FormItem label=\"\" prop=\"key\">\n                <Select v-model=\"reportRetentionForm.index\" style=\"width:200px\"\n                        @on-change=\"changeCreativeOrClient()\">\n                    <Option v-for=\"item in creativeOrClients\" :value=\"item.key\"\n                            :key=\"item.key\">{{ item.name }}\n                    </Option>\n                </Select>\n            </FormItem>\n        </Form>\n\n        <!--        <div @mouseleave=\"leave()\" style=\"width: 45px\" class=\"conditionHead\">-->\n        <!--            <div style=\"width: 45px;height: 35px;\" class=\"smillPeople\"-->\n        <!--                 @mouseenter=\"enter\"></div>-->\n        <!--            <div v-show=\"isShowCondition\"-->\n        <!--                 style=\"width: 270px;height: 150px;background-color:#EAEAEA;z-index: 999;opacity: 0.9;border-radius: 10px 10px 10px 10px;\">-->\n        <!--               -->\n        <!--            </div>-->\n        <!--        </div>-->\n\n        <div style=\"width:50%;height: 405px;\"\n             :class=\"{'isshowLine': isretentionLine}\">\n            <vTitleHead :inputName=\"retentionTitle\"></vTitleHead>\n            <div style=\"background-color:#fff; border-radius: 0 0 10px 10px\" id=\"reportLine\"></div>\n        </div>\n        <!--        <div style=\"position: absolute;width: 10px;height: 10px\"></div>-->\n        <div v-show=\"isretentionLine\" style=\"width:50%;height: 405px ;position: relative;left: 50%\"\n             class=\"reportChaet\">\n            <vTitleHead :inputName=\"retentionsTitle\"></vTitleHead>\n            <div style=\"background-color:#fff; border-radius: 0 0 10px 10px\" id=\"retentionLine\"></div>\n        </div>\n\n        <!--        <div style=\"width:47%;height: 405px\" class=\"retentionTable\">-->\n        <div style=\"margin-top: 70px\">\n            <vTitleHead :inputName=\"retentionTableTitle\"></vTitleHead>\n            <Row>\n                <Table :loading=\"loadRetention\" height=\"445\" highlight-row @on-row-click=\"clickRetention\"\n                       :row-class-name=\"retentionListClass\" border\n                       :columns=\"columns\"\n                       :data=\"retentionList\" ref=\"table\"></Table>\n            </Row>\n        </div>\n\n        <!--        <div style=\"width:50%;height: 405px;margin-top: 100px;position: absolute\">-->\n        <div>\n            <vTitleHead :inputName=\"installPayRetentionTableTitle\"></vTitleHead>\n            <Row>\n                <Table height=\"405\" highlight-row border :columns=\"payColumns\" :data=\"payInstallRetenTable\"\n                       ref=\"table\"></Table>\n            </Row>\n\n        </div>\n        <!--        <div style=\"width:47%;height: 405px;position: relative;left: 52%;top:100px\">-->\n        <div>\n            <vTitleHead :inputName=\"payRetentionTableTitle\"></vTitleHead>\n            <Row>\n                <Table height=\"405\" highlight-row border :columns=\"payColumns\" :data=\"payRentenTable\"\n                       ref=\"table\"></Table>\n            </Row>\n        </div>\n    </div>\n</template>\n\n<script>\n    import {queryRetention, queryPayRetention} from '@/api/index';\n    import {weekChange} from '@/libs/changeWeek';\n    import vTitleHead from '../../game/template/TitleHead';\n\n    export default {\n        name: \"reportRetention\",\n        components: {vTitleHead},\n        data() {\n            return {\n                loadRetention:true,\n                isretentionLine: true,\n                isShowCondition: false,\n                isShow: true,\n                defaultIsDeviceDef: {\n                    user: 0,\n                    device: 1\n                },\n                defaultPhone: {\n                    all: 0,\n                    android: 1,\n                    ios: 2,\n                    none: 3\n                },\n                defaultData: {\n                    today: 0,\n                    yestoday: 1,\n                    week: 7,\n                    month: 30\n                },\n                defaultCreativeOrClient: {\n                    survey: 2,\n                    creative: 0,\n                    client: 1\n                },\n\n                isDevice: \"0\",\n                phone: \"0\",\n                data: \"7\",\n                creativeOrClient: \"2\",\n                isOs: 0,\n                indexStatu: 2,\n                index: \"0\",\n\n                reportRetentionForm: {\n                    index: \"0\"\n                },\n                showCreativeOrClient: true,\n                creativeOrClients: [],\n                columns: [],\n                payColumns: [],\n                columnsHeadr: [\n                    {\n                        title: '日期（星期）',\n                        key: 'ds',\n                        width: 150,\n                        align: 'center',\n                        fixed: 'left'\n                    }\n                ],\n                columnsReal: [\n                    {\n                        title: '～时',\n                        key: 'dayOfHour',\n                        width: 150,\n                        align: 'center',\n                        fixed: 'left'\n                    }\n                ],\n                columsOs: [\n                    {\n                        title: '操作系统',\n                        key: 'os',\n                        width: 120,\n                        align: 'center',\n                        fixed: 'left'\n                    }\n                ],\n                columsCreative:\n                    [\n                        {\n                            title: '渠道',\n                            key: 'creative',\n                            width: 100,\n                            align: 'center',\n                            fixed: 'left'\n                        }\n                    ],\n                columsClient:\n                    [\n                        {\n                            title: '分服',\n                            key: 'client',\n                            width: 100,\n                            align: 'center',\n                            fixed: 'left'\n                        }\n                    ],\n                retentionTable:\n                    [\n                        {\n                            title: '注册数',\n                            key: 'installNum',\n                            align: 'center',\n                            width: 80\n                        },\n                        {\n                            title: '1日',\n                            key: 'oneRetentionPercentage',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '2日',\n                            key: 'twoRetentionPercentage',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '3日',\n                            key: 'threeRetentionPercentage',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '4日',\n                            key: 'fourRetentionPercentage',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '5日',\n                            key: 'fiveRetentionPercentage',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '6日',\n                            key: 'sixRetentionPercentage',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '7日',\n                            key: 'sevenRetentionPercentage',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '8日',\n                            key: 'eightRetentionPercentage',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '9日',\n                            key: 'nineRetentionPercentage',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '10日',\n                            key: 'tenRetentionPercentage',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '11日',\n                            key: 'elevenRetentionPercentage',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '12日',\n                            key: 'twelveRetentionPercentage',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '13日',\n                            key: 'thirteenRetentionPercentage',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '14日',\n                            key: 'fourteenRetentionPercentage',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '15日',\n                            key: 'fifteenRetentionPercentage',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '16日',\n                            key: 'sixteenRetentionPercentage',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '17日',\n                            key: 'seventeenRetentionPercentage',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '18日',\n                            key: 'eighteenRetentionPercentage',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '19日',\n                            key: 'nineteenRetentionPercentage',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '20日',\n                            key: 'twentyteenRetentionPercentage',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '21日',\n                            key: 'twentyOneteenRetentionPercentage',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '22日',\n                            key: 'twentyTwoRetentionPercentage',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '23日',\n                            key: 'twentyThreeRetentionPercentage',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '24日',\n                            key: 'twentyFourRetentionPercentage',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '25日',\n                            key: 'twentyFiveRetentionPercentage',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '26日',\n                            key: 'twentySixRetentionPercentage',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '27日',\n                            key: 'twentySevenRetentionPercentage',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '28日',\n                            key: 'twentyEightRetentionPercentage',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '29日',\n                            key: 'twentyNineRetentionPercentage',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '30日',\n                            key: 'thirtyRetentionPercentage',\n                            width: 80,\n                            align: 'center'\n                        }\n                    ],\n                payRenDayTitles:\n                    [\n                        {\n                            title: '付费人数',\n                            key: 'payCount',\n                            width: 100,\n                            align: 'center'\n                        },\n                        {\n                            title: '付费率',\n                            key: 'pays',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '1日',\n                            key: '1day',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '2日',\n                            key: '2day',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '3日',\n                            key: '3day',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '4日',\n                            key: '4day',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '5日',\n                            key: '5day',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '6日',\n                            key: '6day',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '7日',\n                            key: '7day',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '8日',\n                            key: '8day',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '9日',\n                            key: '9day',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '10日',\n                            key: '10day',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '11日',\n                            key: '11day',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '12日',\n                            key: '12day',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '13日',\n                            key: '13day',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '14日',\n                            key: '14day',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '15日',\n                            key: '15day',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '16日',\n                            key: '16day',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '17日',\n                            key: '17day',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '18日',\n                            key: '18day',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '19日',\n                            key: '19day',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '20日',\n                            key: '20day',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '21日',\n                            key: '21day',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '22日',\n                            key: '22day',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '23日',\n                            key: '23day',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '24日',\n                            key: '24day',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '25日',\n                            key: '25day',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '26日',\n                            key: '26day',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '27日',\n                            key: '27day',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '28日',\n                            key: '28day',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '29日',\n                            key: '29day',\n                            width: 80,\n                            align: 'center'\n                        },\n                        {\n                            title: '30日',\n                            key: '30day',\n                            width: 80,\n                            align: 'center'\n                        }\n                    ],\n                retentionList:\n                    [],\n                payRentenTable: [],\n                handelRetentionOne:\n                    [],\n                surveyOneLine: {},\n                retentionLine: {},\n                arrayCreate:\n                    [],\n                creatives:\n                    [],\n                creativeMap:\n                    [],\n                arrayClient:\n                    [],\n                clients:\n                    [],\n                clientMap:\n                    [],\n                payInstallRetenTable:\n                    [],\n                retentionTitle: '',\n                retentionsTitle: '留存平均值',\n                retentionAverage: [],\n                installPayRetentionTableTitle: '注册付费留存(%)',\n                retentionTableTitle: '留存数据(%)',\n                payRetentionTableTitle: '付费留存(%)',\n            }\n                ;\n        },\n        methods: {\n            enter() {\n                this.isShowCondition = true;\n            },\n            leave() {\n                this.isShowCondition = false;\n            },\n            init() {\n                this.loadRetention = true;\n                if (this.getStore('parentId') == 0) {\n                    this.isShow = true\n                } else {\n                    this.isShow = false\n                }\n\n                // show渠道/服选择器\n                if (parseInt(this.creativeOrClient) == this.defaultCreativeOrClient.creative || parseInt(this.creativeOrClient) == this.defaultCreativeOrClient.client) {\n                    this.showCreativeOrClient = true;\n                } else {\n                    this.showCreativeOrClient = false;\n                }\n\n                if (this.creativeOrClient == \"2\") {\n                    this.isretentionLine = true\n                } else {\n                    this.isretentionLine = false\n                }\n\n                if (this.phone == this.defaultPhone.none) {\n                    this.isOs = 1;\n                } else {\n                    this.isOs = 0;\n                }\n\n                // 处理表头\n                let colum = this.columnsHeadr;\n                let payColum = [];\n                if (this.phone != this.defaultPhone.none && !(this.phone == this.defaultPhone.all && this.creativeOrClient == this.defaultCreativeOrClient.survey)) {\n                    colum = colum.concat(this.columsOs);\n\n                }\n                if (this.data == this.defaultData.today || this.data == this.defaultData.yestoday) {\n                    colum = colum.concat(this.columnsReal);\n                }\n                this.indexStatu = 2;\n                if (this.creativeOrClient == this.defaultCreativeOrClient.client) {\n                    colum = colum.concat(this.columsClient);\n                    this.indexStatu = 1;\n                }\n                if (this.creativeOrClient == this.defaultCreativeOrClient.creative) {\n                    colum = colum.concat(this.columsCreative);\n                    this.indexStatu = 0;\n                }\n                payColum = colum;\n                payColum = payColum.concat(this.payRenDayTitles);\n                colum = colum.concat(this.retentionTable);\n                this.columns = colum;\n                this.payColumns = payColum;\n\n                this.queryRetention();\n            },\n            queryRetention() {\n                let params = {\n                    gameid: parseInt(this.getStore('gameid')),\n                    deviceType: this.isDevice,\n                    osType: this.phone,\n                    isOs: this.isOs,\n                    data: this.data,\n                    ccType: this.indexStatu,\n                    ccNum: this.reportRetentionForm.index,\n                    page: 1,\n                }\n                if (this.indexStatu == 1) {\n                    params.ccNum = this.reportRetentionForm.index;\n                }\n                if (this.indexStatu == 0) {\n                    params.ccNum = this.reportRetentionForm.index;\n                }\n                queryRetention(params).then(e => {\n                    this.loadRetention = false;\n                    if (e.success) {\n                        let retentionList = [];\n                        retentionList = this.saturday(e.shareRetentionList);\n                        //放入Map,creativeid为key\n                        let creativeMap = new Map();\n                        (e.creatives).forEach((item, index) => {\n                            creativeMap.set(item.creativeid, item.creativeName)\n                        })\n\n                        let clients = (e.clients).map(item => ({\n                            key: item.serverid,\n                            name: item.serverName,\n                        }));\n\n                        let object = new Object();\n                        object.key = '-1';\n                        object.name = '所有服';\n                        clients.unshift(object);\n\n                        let clientMap = new Map();\n                        (clients).forEach((item, index) => {\n                            clientMap.set(item.key, item.name)\n                        })\n\n                        retentionList.forEach(item => {\n                            item.creative = creativeMap.get(item.creative) === undefined ? item.creative : creativeMap.get(item.creative);\n                            item.client = clientMap.get(String(item.clientid)) === undefined ? item.client : clientMap.get(String(item.clientid));\n                        })\n                        let handelRetentionOne = this.makeRetentionOne(retentionList[5]);\n                        this.retentionList = retentionList;\n                        this.handelRetentionOne = handelRetentionOne;\n                        this.retentionTitle = retentionList[5].ds + '留存趋势';\n                        this.surveyOneLine.changeData(handelRetentionOne);\n                        this.retentionLine.changeData(this.retentionAverage);\n                    }\n                });\n\n                let payRentenData = {\n                    gameid: parseInt(this.getStore('gameid')),\n                    date: parseInt(this.data),\n                    device: parseInt(this.isDevice) == this.defaultIsDeviceDef.user ? false : true,\n                }\n                if (this.phone != this.defaultPhone.none) {\n                    payRentenData.os = this.phone;\n                }\n                if (this.indexStatu == this.defaultCreativeOrClient.client) {\n                    payRentenData.clientid = this.reportRetentionForm.index;\n                    this.creativeOrClients = this.clients;\n                }\n                if (this.indexStatu == this.defaultCreativeOrClient.creative) {\n                    payRentenData.creative = this.reportRetentionForm.index;\n                    this.creativeOrClients = this.creatives;\n                }\n                queryPayRetention(payRentenData).then(e => {\n                    if (e.success) {\n                        const payReten = e.sharePayRetentionMap;\n                        const installPayReten = e.shareInstallPayRetentionMap;\n                        /**\n                         * 渠道信息\n                         * @param creativeMap 替换表格数据\n                         * @param creativeNames 替换选择头\n                         */\n                        let creatives = (e.creatives).map(item => ({\n                            key: item.creativeid,\n                            name: item.creativeName,\n                        }));\n\n                        let clients = (e.clients).map(item => ({\n                            key: item.serverid,\n                            name: item.serverName,\n                        }));\n\n                        let creativeNames = [];\n                        creativeNames.push('全渠道');\n                        (e.creatives).forEach(item => {\n                            creativeNames.push(item.creativeName);\n                        });\n\n                        let allObject = new Object();\n                        allObject.key = '0';\n                        allObject.name = '全渠道';\n                        creatives.unshift(allObject);\n                        //放入Map,creativeid为key\n                        let creativeMap = new Map();\n                        creatives.forEach((item, index) => {\n                            creativeMap.set(item.key, item.name)\n                        })\n\n                        let clientNames = [];\n                        clientNames.push('所有服');\n                        (e.clients).forEach(item => {\n                            clientNames.push(item.serverName);\n                        });\n\n                        let object = new Object();\n                        object.key = '0';\n                        object.name = '所有服';\n                        clients.unshift(object);\n\n                        let clientMap = new Map();\n                        clients.forEach((item, indx) => {\n                            clientMap.set(item.key, item.name)\n                        })\n                        this.arrayCreate = creativeNames;\n                        this.creatives = creatives;\n                        this.creativeMap = creativeMap;\n                        this.arrayClient = clientNames;\n                        this.clients = clients;\n                        this.clientMap = clientMap;\n                        /**\n                         * -----------------安装付费留存-------------\n                         */\n                        if (installPayReten) {\n                            let payInstallRetenArray = [];\n                            for (let key in installPayReten) {\n                                let payInstallRentenObj = {};\n                                payInstallRentenObj.ds = weekChange(installPayReten[key][0].ds);\n                                payInstallRentenObj.os = installPayReten[key][0].os;\n                                payInstallRentenObj.creative = creativeMap.get(installPayReten[key][0].creative) === undefined ? installPayReten[key][0].creative : creativeMap.get(installPayReten[key][0].creative);\n                                payInstallRentenObj.client = clientMap.get(String(installPayReten[key][0].clientid));\n                                payInstallRentenObj.payCount = installPayReten[key][0].payInstallCount;\n                                payInstallRentenObj.pays = installPayReten[key][0].payCount == 0 ? 0 : (installPayReten[key][0].payInstallCount / installPayReten[key][0].payCount * 100).toFixed(2);\n                                for (let i = 1; i <= 30; i++) {\n                                    payInstallRentenObj[i + 'day'] = 0;\n                                }\n                                installPayReten[key].forEach(item => {\n                                    payInstallRentenObj[item.dr + 'day'] = item.payInstallCount == 0 ? 0 : (item.retention / item.payInstallCount * 100).toFixed(2);\n                                })\n                                payInstallRetenArray.push(payInstallRentenObj);\n                            }\n                            payInstallRetenArray.sort(this.compare);\n                            this.payInstallRetenTable = payInstallRetenArray;\n                        }\n                        /**\n                         * -------------付费留存---------------\n                         */\n                        if (payReten) {\n                            let payRetenArray = [];\n                            for (let key in payReten) {\n                                let payRentenObj = {};\n                                payRentenObj.ds = weekChange(payReten[key][0].ds);\n                                payRentenObj.os = payReten[key][0].os;\n                                payRentenObj.creative = creativeMap.get(payReten[key][0].creative) === undefined ? payReten[key][0].creative : creativeMap.get(payReten[key][0].creative);\n                                payRentenObj.client = clientMap.get(String(payReten[key][0].clientid));\n                                payRentenObj.payCount = payReten[key][0].payCount;\n                                payRentenObj.pays = (payReten[key][0].payCount / payReten[key][0].dauNum * 100).toFixed(2);\n                                for (let i = 1; i <= 30; i++) {\n                                    payRentenObj[i + 'day'] = 0;\n                                }\n                                payReten[key].forEach(item => {\n                                    payRentenObj[item.dr + 'day'] = item.payCount == 0 ? 0 : (item.retention / item.payCount * 100).toFixed(2);\n                                })\n                                payRetenArray.push(payRentenObj);\n                            }\n                            payRetenArray.sort(this.compare);\n                            this.payRentenTable = payRetenArray;\n                        }\n                    }\n                })\n            },\n            creativeOrClientChange() {\n                // 还原\n                this.reportRetentionForm.index = \"0\";\n                this.init();\n            },\n            changeCreativeOrClient() {\n                this.init();\n            },\n            clickRetention(data) {\n                this.retentionTitle = data.ds + '留存趋势';\n                this.surveyOneLine.changeData(this.makeRetentionOne(data));\n            }\n            ,\n            makeRetentionOne: function (data) {\n                let handelRetentionOne = [];\n                if (data) {\n                    let info1 = new Object();\n                    info1.time = 1;\n                    info1.value = parseFloat(data.oneRetentionPercentage);\n                    handelRetentionOne.push(info1);\n                    let info2 = new Object();\n                    info2.time = 2;\n                    info2.value = parseFloat(data.twoRetentionPercentage);\n                    handelRetentionOne.push(info2);\n                    let info3 = new Object();\n                    info3.time = 3;\n                    info3.value = parseFloat(data.threeRetentionPercentage);\n                    handelRetentionOne.push(info3);\n                    let info4 = new Object();\n                    info4.time = 4;\n                    info4.value = parseFloat(data.fourRetentionPercentage);\n                    handelRetentionOne.push(info4);\n                    let info5 = new Object();\n                    info5.time = 5;\n                    info5.value = parseFloat(data.fiveRetentionPercentage);\n                    handelRetentionOne.push(info5);\n                    let info6 = new Object();\n                    info6.time = 6;\n                    info6.value = parseFloat(data.sixRetentionPercentage);\n                    handelRetentionOne.push(info6);\n                    let info7 = new Object();\n                    info7.time = 7;\n                    info7.value = parseFloat(data.sevenRetentionPercentage);\n                    handelRetentionOne.push(info7);\n                    let info8 = new Object();\n                    info8.time = 8;\n                    info8.value = parseFloat(data.eightRetentionPercentage);\n                    handelRetentionOne.push(info8);\n                    let info9 = new Object();\n                    info9.time = 9;\n                    info9.value = parseFloat(data.nineRetentionPercentage);\n                    handelRetentionOne.push(info9);\n                    let info10 = new Object();\n                    info10.time = 10;\n                    info10.value = parseFloat(data.tenRetentionPercentage);\n                    handelRetentionOne.push(info10);\n                    let info11 = new Object();\n                    info11.time = 11;\n                    info11.value = parseFloat(data.elevenRetentionPercentage);\n                    handelRetentionOne.push(info11);\n                    let info12 = new Object();\n                    info12.time = 12;\n                    info12.value = parseFloat(data.twelveRetentionPercentage);\n                    handelRetentionOne.push(info12);\n                    let info13 = new Object();\n                    info13.time = 13;\n                    info13.value = parseFloat(data.thirteenRetentionPercentage);\n                    handelRetentionOne.push(info13);\n                    let info14 = new Object();\n                    info14.time = 14;\n                    info14.value = parseFloat(data.fourteenRetentionPercentage);\n                    handelRetentionOne.push(info14);\n                    let info15 = new Object();\n                    info15.time = 15;\n                    info15.value = parseFloat(data.fifteenRetentionPercentage);\n                    handelRetentionOne.push(info15);\n                }\n                return handelRetentionOne;\n            }\n            ,\n            retentionLineChart() {\n                this.retentionLine = new G2.Chart({\n                    container: 'retentionLine',\n                    forceFit: true,\n                    height: 400\n                });\n                this.retentionLine.source(this.retentionAverage);\n                this.retentionLine.coord('rect').transpose().scale(1, -1);\n                this.retentionLine.intervalSymmetric().position('action*pv')\n                    .shape('pyramid')\n                    .color('action', ['#0050B3', '#9AFF9A', '#AB82FF', '#53868B', '#D2691E', '#EEA2AD', '#FFFF00'])\n                    .label('action*pv', (action, pv) => {\n                        return action + ' ' + pv;\n                    }, {\n                        offset: 35,\n                        labelLine: {\n                            lineWidth: 1,\n                            stroke: 'rgba(0, 0, 0, 0.15)'\n                        }\n                    });\n                this.retentionLine.render();\n            },\n            reportLineChart() {\n                /*---------------------单折线图-------------------*/\n                this.surveyOneLine = new G2.Chart({\n                    container: 'reportLine',\n                    forceFit: true,\n                    height: 400\n                });\n                this.surveyOneLine.source(this.handelRetentionOne, {});\n                this.surveyOneLine.scale('value', {\n                    min: 0,\n                    alias: '留存率',\n                });\n                this.surveyOneLine.scale('time', {\n                    // range: [0, 1]\n                    tickCount: 8,\n                });\n                this.surveyOneLine.tooltip({\n                    crosshairs: {\n                        type: 'line'\n                    }\n                });\n                // 坐标轴文本旋转\n                this.surveyOneLine.axis('time', {\n                    label: {\n                        rotate: -Math.PI / 2.5,\n                        textAlign: 'end',\n                        textBaseline: 'middle'\n                    }\n                });\n                this.surveyOneLine.line().position('time*value').shape('smooth');\n                this.surveyOneLine.point().position('time*value')\n                    .size(4)\n                    .shape('circle')\n                    .style({\n                        stroke: '#fff',\n                        lineWidth: 1\n                    })\n                    .color('l(0) 0:#1E90FF 0.5:#1E90FF 1:#1E90FF');\n                this.surveyOneLine.area().position('time*value').shape('smooth');\n                this.surveyOneLine.render();\n            },\n            saturday: function (data) {\n                if (data) {\n                    let retentionAverage = [],\n                        oneRetentionPercentageSum = 0,\n                        twoRetentionPercentageSum = 0,\n                        threeRetentionPercentageSum = 0,\n                        fourRetentionPercentageSum = 0,\n                        fiveRetentionPercentageSum = 0,\n                        sixRetentionPercentageSum = 0,\n                        sevenRetentionPercentageSum = 0;\n                    data.forEach((item, index) => {\n                        /*做留存的平均处理*/\n                        oneRetentionPercentageSum += parseInt(item.oneRetentionPercentage);\n                        twoRetentionPercentageSum += parseInt(item.twoRetentionPercentage);\n                        threeRetentionPercentageSum += parseInt(item.threeRetentionPercentage);\n                        fourRetentionPercentageSum += parseInt(item.fourRetentionPercentage);\n                        fiveRetentionPercentageSum += parseInt(item.fiveRetentionPercentage);\n                        sixRetentionPercentageSum += parseInt(item.sixRetentionPercentage);\n                        sevenRetentionPercentageSum += parseInt(item.sevenRetentionPercentage);\n                        let week = new Date(item.ds);\n                        let dateweek = week.getDay();\n                        let i = 7 - dateweek;\n                        let saturdays = [];\n                        switch (i) {\n                            case 7:\n                                saturdays = ['oneRetentionPercentage', 'eightRetentionPercentage', 'fifteenRetentionPercentage'];\n                                break\n                            case 1:\n                                saturdays = ['sevenRetentionPercentage', 'fourteenRetentionPercentage'];\n                                break\n                            case 2:\n                                saturdays = ['sixRetentionPercentage', 'thirteenRetentionPercentage'];\n                                break\n                            case 3:\n                                saturdays = ['fiveRetentionPercentage', 'twelveRetentionPercentage'];\n                                break\n                            case 4:\n                                saturdays = ['fourRetentionPercentage', 'elevenRetentionPercentage'];\n                                break\n                            case 5:\n                                saturdays = ['threeRetentionPercentage', 'tenRetentionPercentage'];\n                                break\n                            case 6:\n                                saturdays = ['twoRetentionPercentage', 'nineRetentionPercentage'];\n                                break\n                            default:\n                        }\n                        ;\n                        item.special = saturdays;\n                        item.oneSpecial = saturdays[0];\n                        item.twoSpecial = saturdays[1];\n                        item.ds = weekChange(item.ds);\n                    })\n                    if (this.data == \"7\" || this.data == \"30\") {\n                        let retentionAverageD1 = new Object();\n                        retentionAverageD1.action = 'D1';\n                        retentionAverageD1.pv = Number((oneRetentionPercentageSum / parseInt(this.data)).toFixed(2));\n                        retentionAverage.push(retentionAverageD1);\n\n                        let retentionAverageD2 = new Object();\n                        retentionAverageD2.action = 'D2';\n                        retentionAverageD2.pv = Number((twoRetentionPercentageSum / (parseInt(this.data) - 1)).toFixed(2));\n                        retentionAverage.push(retentionAverageD2);\n\n                        let retentionAverageD3 = new Object();\n                        retentionAverageD3.action = 'D3';\n                        retentionAverageD3.pv = Number((threeRetentionPercentageSum / (parseInt(this.data) - 2)).toFixed(2));\n                        retentionAverage.push(retentionAverageD3);\n\n                        let retentionAverageD4 = new Object();\n                        retentionAverageD4.action = 'D4';\n                        retentionAverageD4.pv = Number((fourRetentionPercentageSum / (parseInt(this.data) - 3)).toFixed(2));\n                        retentionAverage.push(retentionAverageD4);\n\n                        let retentionAverageD5 = new Object();\n                        retentionAverageD5.action = 'D5';\n                        retentionAverageD5.pv = Number((fiveRetentionPercentageSum / (parseInt(this.data) - 4)).toFixed(2));\n                        retentionAverage.push(retentionAverageD5);\n\n                        let retentionAverageD6 = new Object();\n                        retentionAverageD6.action = 'D6';\n                        retentionAverageD6.pv = Number((sixRetentionPercentageSum / (parseInt(this.data) - 5)).toFixed(2));\n                        retentionAverage.push(retentionAverageD6);\n\n                        let retentionAverageD7 = new Object();\n                        retentionAverageD7.action = 'D7';\n                        retentionAverageD7.pv = Number((sevenRetentionPercentageSum / (parseInt(this.data) - 6)).toFixed(2));\n                        retentionAverage.push(retentionAverageD7);\n                        this.retentionAverage = retentionAverage;\n                    }\n                    return data;\n                }\n            }\n            ,\n            compare: function (obj1, obj2) {\n                var val1 = obj1.ds;\n                var val2 = obj2.ds;\n                if (val1 < val2) {\n                    return 1;\n                } else if (val1 > val2) {\n                    return -1;\n                } else {\n                    return 0;\n                }\n            }\n            ,\n            retentionListClass(row, index) {\n\n            }\n            ,\n        },\n        mounted() {\n            this.reportLineChart();\n            this.retentionLineChart();\n            this.init();\n        }\n    }\n</script>\n\n<style scoped>\n    .ivu-table .demo-table-info-cell-address {\n        background-color: #187;\n        color: #fff;\n    }\n\n    .conditionHead {\n        position: fixed;\n        left: 35%;\n        top: 120px;\n        z-index: 999;\n    }\n\n    .smillPeople {\n        width: 45px;\n        height: 35px;\n        background-image: url(../../../assets/smillPeople.jpg);\n        background-size: 300px 35px;\n        animation: walk1 1s steps(7) infinite;\n    }\n\n    @keyframes walk1 {\n        0% {\n            background-position: 0;\n        }\n\n        100% {\n            background-position: 300px;\n        }\n    }\n\n    .reportChaet {\n        /*position: absolute;*/\n    }\n\n    .retentionTable {\n        position: relative;\n        left: 52%;\n\n    }\n\n    .isshowLine {\n        position: absolute;\n    }\n</style>\n"]}]}