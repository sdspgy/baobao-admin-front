{"remainingRequest":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/reportdata/reportDevice/reportDevice.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/reportdata/reportDevice/reportDevice.vue","mtime":1586836225602},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { queryDevice } from '@/api/index';\nimport { weekChange } from '@/libs/changeWeek';\nexport default {\n  name: 'reportDevice',\n  data: function data() {\n    return {\n      type: '0',\n      chartDevice: [],\n      G2Device: {},\n      data: \"7\"\n    };\n  },\n  methods: {\n    init: function init() {\n      this.queryDevices();\n    },\n    queryDevices: function queryDevices() {\n      var _this = this;\n\n      var params = {\n        gameid: parseInt(this.getStore('gameid')),\n        type: parseInt(this.type),\n        data: parseInt(this.data)\n      };\n      queryDevice(params).then(function (e) {\n        if (e.success) {\n          var devices = e.deviceDis;\n          var dailyInstallNum = e.shareDailyResultTypes[0].installNum,\n              dailyDauNum = e.shareDailyResultTypes[0].dauNum;\n          var chartDevice = [];\n          var i = devices.length > 30 ? 30 : devices.length;\n\n          if (_this.type == '0') {\n            for (; i > 0; i--) {\n              var deviceObj = new Object();\n              deviceObj.name = devices[i].device;\n              deviceObj.value = devices[i].deviceInstallNumbers;\n              deviceObj.precentage = dailyInstallNum == 0 ? 0 : (devices[i].deviceInstallNumbers / dailyInstallNum).toFixed(2);\n              chartDevice.push(deviceObj);\n            }\n          } else {\n            for (; i > 0; i--) {\n              var _deviceObj = new Object();\n\n              _deviceObj.name = devices[i].device;\n              _deviceObj.value = devices[i].deviceDauNumbers;\n              _deviceObj.precentage = dailyDauNum == 0 ? 0 : (devices[i].deviceDauNumbers / dailyDauNum).toFixed(2);\n              chartDevice.push(_deviceObj);\n            }\n          }\n\n          _this.chartDevice = chartDevice.sort(_this.compares);\n\n          _this.G2Device.changeData(_this.chartDevice);\n        }\n      });\n    },\n    compares: function compares(obj1, obj2) {\n      var val1 = obj1.value;\n      var val2 = obj2.value;\n\n      if (val1 < val2) {\n        return 1;\n      } else if (val1 > val2) {\n        return -1;\n      } else {\n        return 0;\n      }\n    },\n    defaultG2: function defaultG2() {\n      this.G2Device = new G2.Chart({\n        container: 'deviceG2',\n        forceFit: true,\n        width: 800,\n        height: 400\n      });\n      this.G2Device.source(this.chartDevice, {});\n      this.G2Device.coord(); // 坐标轴文本旋转\n\n      this.G2Device.axis('name', {\n        label: {\n          rotate: Math.PI / 0.3,\n          textAlign: 'end',\n          textBaseline: 'middle'\n        }\n      }); // this.G2Device.tooltip({\n      //     // showCrosshairs: true, //纵坐标线\n      //     // showItemMarker: false, //去小原点\n      //     onShow: function onShow(ev) {\n      //         const items = ev.items;\n      //         items[0].name = null;\n      //         items[0].name = items[0].title;\n      //         items[0].value = '' + items[0].value + ';' + items[0].origin.precentage + '%';\n      //     },\n      //     offsetX: -30\n      // });\n\n      this.G2Device.interval().position('name*value').label('value', {\n        offset: 10,\n        style: {\n          fill: '#595959',\n          fontSize: 12\n        }\n      });\n      this.G2Device.scale('value', {\n        alias: '数量'\n      }); // 柱状图添加文本\n      // this.chartDevice.forEach(function (obj) {\n      //     this.G2Device.guide().text({\n      //         position: [obj.name, obj.value],\n      //         content: obj.value,\n      //         style: {\n      //             textAlign: 'center',\n      //             textBaseline: 'bottom'\n      //         },\n      //         offsetY: 5,\n      //         offsetX: 7,\n      //     });\n      // });\n\n      this.G2Device.render();\n    }\n  },\n  mounted: function mounted() {\n    this.defaultG2();\n    this.init();\n  }\n};",{"version":3,"sources":["reportDevice.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAmBA,SAAA,WAAA,QAAA,aAAA;AACA,SAAA,UAAA,QAAA,mBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,cADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,GADA;AAEA,MAAA,WAAA,EAAA,EAFA;AAGA,MAAA,QAAA,EAAA,EAHA;AAIA,MAAA,IAAA,EAAA;AAJA,KAAA;AAMA,GATA;AAUA,EAAA,OAAA,EAAA;AACA,IAAA,IADA,kBACA;AACA,WAAA,YAAA;AACA,KAHA;AAIA,IAAA,YAJA,0BAIA;AAAA;;AACA,UAAA,MAAA,GAAA;AACA,QAAA,MAAA,EAAA,QAAA,CAAA,KAAA,QAAA,CAAA,QAAA,CAAA,CADA;AAEA,QAAA,IAAA,EAAA,QAAA,CAAA,KAAA,IAAA,CAFA;AAGA,QAAA,IAAA,EAAA,QAAA,CAAA,KAAA,IAAA;AAHA,OAAA;AAKA,MAAA,WAAA,CAAA,MAAA,CAAA,CAAA,IAAA,CAAA,UAAA,CAAA,EAAA;AACA,YAAA,CAAA,CAAA,OAAA,EAAA;AACA,cAAA,OAAA,GAAA,CAAA,CAAA,SAAA;AACA,cAAA,eAAA,GAAA,CAAA,CAAA,qBAAA,CAAA,CAAA,EAAA,UAAA;AAAA,cACA,WAAA,GAAA,CAAA,CAAA,qBAAA,CAAA,CAAA,EAAA,MADA;AAEA,cAAA,WAAA,GAAA,EAAA;AACA,cAAA,CAAA,GAAA,OAAA,CAAA,MAAA,GAAA,EAAA,GAAA,EAAA,GAAA,OAAA,CAAA,MAAA;;AACA,cAAA,KAAA,CAAA,IAAA,IAAA,GAAA,EAAA;AACA,mBAAA,CAAA,GAAA,CAAA,EAAA,CAAA,EAAA,EAAA;AACA,kBAAA,SAAA,GAAA,IAAA,MAAA,EAAA;AACA,cAAA,SAAA,CAAA,IAAA,GAAA,OAAA,CAAA,CAAA,CAAA,CAAA,MAAA;AACA,cAAA,SAAA,CAAA,KAAA,GAAA,OAAA,CAAA,CAAA,CAAA,CAAA,oBAAA;AACA,cAAA,SAAA,CAAA,UAAA,GAAA,eAAA,IAAA,CAAA,GAAA,CAAA,GAAA,CAAA,OAAA,CAAA,CAAA,CAAA,CAAA,oBAAA,GAAA,eAAA,EAAA,OAAA,CAAA,CAAA,CAAA;AACA,cAAA,WAAA,CAAA,IAAA,CAAA,SAAA;AACA;AACA,WARA,MAQA;AACA,mBAAA,CAAA,GAAA,CAAA,EAAA,CAAA,EAAA,EAAA;AACA,kBAAA,UAAA,GAAA,IAAA,MAAA,EAAA;;AACA,cAAA,UAAA,CAAA,IAAA,GAAA,OAAA,CAAA,CAAA,CAAA,CAAA,MAAA;AACA,cAAA,UAAA,CAAA,KAAA,GAAA,OAAA,CAAA,CAAA,CAAA,CAAA,gBAAA;AACA,cAAA,UAAA,CAAA,UAAA,GAAA,WAAA,IAAA,CAAA,GAAA,CAAA,GAAA,CAAA,OAAA,CAAA,CAAA,CAAA,CAAA,gBAAA,GAAA,WAAA,EAAA,OAAA,CAAA,CAAA,CAAA;AACA,cAAA,WAAA,CAAA,IAAA,CAAA,UAAA;AACA;AACA;;AACA,UAAA,KAAA,CAAA,WAAA,GAAA,WAAA,CAAA,IAAA,CAAA,KAAA,CAAA,QAAA,CAAA;;AACA,UAAA,KAAA,CAAA,QAAA,CAAA,UAAA,CAAA,KAAA,CAAA,WAAA;AACA;AACA,OA3BA;AA4BA,KAtCA;AAuCA,IAAA,QAvCA,oBAuCA,IAvCA,EAuCA,IAvCA,EAuCA;AACA,UAAA,IAAA,GAAA,IAAA,CAAA,KAAA;AACA,UAAA,IAAA,GAAA,IAAA,CAAA,KAAA;;AACA,UAAA,IAAA,GAAA,IAAA,EAAA;AACA,eAAA,CAAA;AACA,OAFA,MAEA,IAAA,IAAA,GAAA,IAAA,EAAA;AACA,eAAA,CAAA,CAAA;AACA,OAFA,MAEA;AACA,eAAA,CAAA;AACA;AACA,KAjDA;AAkDA,IAAA,SAlDA,uBAkDA;AACA,WAAA,QAAA,GAAA,IAAA,EAAA,CAAA,KAAA,CAAA;AACA,QAAA,SAAA,EAAA,UADA;AAEA,QAAA,QAAA,EAAA,IAFA;AAGA,QAAA,KAAA,EAAA,GAHA;AAIA,QAAA,MAAA,EAAA;AAJA,OAAA,CAAA;AAMA,WAAA,QAAA,CAAA,MAAA,CAAA,KAAA,WAAA,EAAA,EAAA;AACA,WAAA,QAAA,CAAA,KAAA,GARA,CASA;;AACA,WAAA,QAAA,CAAA,IAAA,CAAA,MAAA,EAAA;AACA,QAAA,KAAA,EAAA;AACA,UAAA,MAAA,EAAA,IAAA,CAAA,EAAA,GAAA,GADA;AAEA,UAAA,SAAA,EAAA,KAFA;AAGA,UAAA,YAAA,EAAA;AAHA;AADA,OAAA,EAVA,CAiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,WAAA,QAAA,CAAA,QAAA,GACA,QADA,CACA,YADA,EAEA,KAFA,CAEA,OAFA,EAEA;AACA,QAAA,MAAA,EAAA,EADA;AAEA,QAAA,KAAA,EAAA;AACA,UAAA,IAAA,EAAA,SADA;AAEA,UAAA,QAAA,EAAA;AAFA;AAFA,OAFA;AASA,WAAA,QAAA,CAAA,KAAA,CAAA,OAAA,EAAA;AACA,QAAA,KAAA,EAAA;AADA,OAAA,EArCA,CAwCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,WAAA,QAAA,CAAA,MAAA;AACA;AAxGA,GAVA;AAoHA,EAAA,OApHA,qBAoHA;AACA,SAAA,SAAA;AACA,SAAA,IAAA;AACA;AAvHA,CAAA","sourcesContent":["<template>\n\t<div style=\"background-color:#fff;\">\n\t\t<RadioGroup style=\"margin-left: 10px\" type=\"button\" v-model=\"type\" @on-change=\"init()\">\n\t\t\t<Radio label=\"0\" style=\"margin: 10px 10px\"><span>安装</span></Radio>\n\t\t\t<Radio label=\"1\" style=\"margin: 10px 10px\"><span>活跃</span></Radio>\n\t\t</RadioGroup>\n\t\t<!--时间-->\n\t\t<div>\n\t\t\t<RadioGroup  style=\"margin-left: 10px\" v-model=\"data\" type=\"button\" @on-change=\"init()\">\n\t\t\t\t<Radio style=\"margin: 10px 10px\" label=\"1\">昨天</Radio>\n\t\t\t\t<Radio style=\"margin: 10px 10px\" label=\"7\">7日</Radio>\n\t\t\t\t<Radio style=\"margin: 10px 10px\" label=\"30\">30日</Radio>\n\t\t\t</RadioGroup>\n\t\t</div>\n\t\t<div class=\"deviceG2\"><div id=\"deviceG2\"></div></div>\n\t</div>\n</template>\n\n<script>\nimport { queryDevice } from '@/api/index';\nimport { weekChange } from '@/libs/changeWeek';\n\nexport default {\n\tname: 'reportDevice',\n\tdata() {\n\t\treturn {\n\t\t\ttype: '0',\n\t\t\tchartDevice: [],\n\t\t\tG2Device: {},\n\t\t\tdata: \"7\"\n\t\t};\n\t},\n\tmethods: {\n\t\tinit() {\n\t\t\tthis.queryDevices();\n\t\t},\n\t\tqueryDevices() {\n\t\t\tlet params = {\n\t\t\t\tgameid: parseInt(this.getStore('gameid')),\n\t\t\t\ttype: parseInt(this.type),\n\t\t\t\tdata: parseInt(this.data)\n\t\t\t};\n\t\t\tqueryDevice(params).then(e => {\n\t\t\t\tif (e.success) {\n\t\t\t\t\tlet devices = e.deviceDis;\n\t\t\t\t\tlet dailyInstallNum = e.shareDailyResultTypes[0].installNum,\n\t\t\t\t\t\tdailyDauNum = e.shareDailyResultTypes[0].dauNum;\n\t\t\t\t\tlet chartDevice = [];\n\t\t\t\t\tlet i = devices.length > 30 ? 30 : devices.length;\n\t\t\t\t\tif (this.type == '0') {\n\t\t\t\t\t\tfor (; i > 0; i--) {\n\t\t\t\t\t\t\tlet deviceObj = new Object();\n\t\t\t\t\t\t\tdeviceObj.name = devices[i].device;\n\t\t\t\t\t\t\tdeviceObj.value = devices[i].deviceInstallNumbers;\n\t\t\t\t\t\t\tdeviceObj.precentage = dailyInstallNum == 0 ? 0 : (devices[i].deviceInstallNumbers / dailyInstallNum).toFixed(2);\n\t\t\t\t\t\t\tchartDevice.push(deviceObj);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor (; i > 0; i--) {\n\t\t\t\t\t\t\tlet deviceObj = new Object();\n\t\t\t\t\t\t\tdeviceObj.name = devices[i].device;\n\t\t\t\t\t\t\tdeviceObj.value = devices[i].deviceDauNumbers;\n\t\t\t\t\t\t\tdeviceObj.precentage = dailyDauNum == 0 ? 0 : (devices[i].deviceDauNumbers / dailyDauNum).toFixed(2);\n\t\t\t\t\t\t\tchartDevice.push(deviceObj);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.chartDevice = chartDevice.sort(this.compares);\n\t\t\t\t\tthis.G2Device.changeData(this.chartDevice);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tcompares(obj1, obj2) {\n\t\t\tvar val1 = obj1.value;\n\t\t\tvar val2 = obj2.value;\n\t\t\tif (val1 < val2) {\n\t\t\t\treturn 1;\n\t\t\t} else if (val1 > val2) {\n\t\t\t\treturn -1;\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t},\n\t\tdefaultG2() {\n\t\t\tthis.G2Device = new G2.Chart({\n\t\t\t\tcontainer: 'deviceG2',\n\t\t\t\tforceFit: true,\n\t\t\t\twidth: 800,\n\t\t\t\theight: 400\n\t\t\t});\n\t\t\tthis.G2Device.source(this.chartDevice, {});\n\t\t\tthis.G2Device.coord();\n\t\t\t// 坐标轴文本旋转\n\t\t\tthis.G2Device.axis('name', {\n\t\t\t\tlabel: {\n\t\t\t\t\trotate: Math.PI / 0.3,\n\t\t\t\t\ttextAlign: 'end',\n\t\t\t\t\ttextBaseline: 'middle'\n\t\t\t\t}\n\t\t\t});\n\t\t\t// this.G2Device.tooltip({\n\t\t\t//     // showCrosshairs: true, //纵坐标线\n\t\t\t//     // showItemMarker: false, //去小原点\n\t\t\t//     onShow: function onShow(ev) {\n\t\t\t//         const items = ev.items;\n\t\t\t//         items[0].name = null;\n\t\t\t//         items[0].name = items[0].title;\n\t\t\t//         items[0].value = '' + items[0].value + ';' + items[0].origin.precentage + '%';\n\t\t\t//     },\n\t\t\t//     offsetX: -30\n\t\t\t// });\n\t\t\tthis.G2Device.interval()\n\t\t\t\t.position('name*value')\n\t\t\t\t.label('value', {\n\t\t\t\t\toffset: 10,\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\tfill: '#595959',\n\t\t\t\t\t\tfontSize: 12\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\tthis.G2Device.scale('value', {\n\t\t\t\talias: '数量'\n\t\t\t});\n\t\t\t// 柱状图添加文本\n\t\t\t// this.chartDevice.forEach(function (obj) {\n\t\t\t//     this.G2Device.guide().text({\n\t\t\t//         position: [obj.name, obj.value],\n\t\t\t//         content: obj.value,\n\t\t\t//         style: {\n\t\t\t//             textAlign: 'center',\n\t\t\t//             textBaseline: 'bottom'\n\t\t\t//         },\n\t\t\t//         offsetY: 5,\n\t\t\t//         offsetX: 7,\n\t\t\t//     });\n\t\t\t// });\n\t\t\tthis.G2Device.render();\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.defaultG2();\n\t\tthis.init();\n\t}\n};\n</script>\n\n<style scoped>\n.deviceG2 {\n\tpadding: 0px 0px 0px 50px;\n\tborder-radius: 10px 10px 10px 10px;\n\tbackground-color: #fff;\n\twidth: 80%;\n\tmargin: 10px 10px;\n}\n</style>\n"],"sourceRoot":"src/views/reportdata/reportDevice"}]}