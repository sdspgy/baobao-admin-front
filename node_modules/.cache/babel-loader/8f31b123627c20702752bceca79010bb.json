{"remainingRequest":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/thread-loader/dist/cjs.js!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/game/gameentry/gameentry.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/game/gameentry/gameentry.vue","mtime":1578658935843},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { queryAllGameReq, addGame, editGame, deleteGame } from '@/api/index';\nexport default {\n  name: 'game',\n  comments: {},\n  data: function data() {\n    var _this = this;\n\n    return {\n      columns: [{\n        type: 'selection',\n        width: 60,\n        align: 'center',\n        fixed: 'left'\n      }, // {\n      // \ttype: 'expand',\n      // \twidth: 50,\n      // \tfixed: 'left',\n      // \trender: (h, params) => {\n      // \t\treturn h(expandRow, {\n      // \t\t\tprops: {\n      // \t\t\t\trow: params.row\n      // \t\t\t}\n      // \t\t});\n      // \t}\n      // },\n      {\n        type: 'index',\n        width: 60,\n        align: 'center',\n        fixed: 'left'\n      }, {\n        title: '游戏ID',\n        key: 'gameid',\n        width: 150 // sortable: true,\n        // fixed: 'left'\n\n      }, {\n        title: '游戏名',\n        key: 'name',\n        width: 150 // sortable: true\n\n      }, {\n        title: '游戏别名',\n        key: 'alias',\n        width: 150 // sortable: true\n\n      }, {\n        title: '游戏logo，服务器图片地址',\n        key: 'logo',\n        width: 150 // sortable: true\n\n      }, {\n        title: '月KPI',\n        key: 'monthKpi',\n        width: 150 // sortable: true\n\n      }, {\n        title: '年KPI',\n        key: 'yearKpi',\n        width: 150 // sortable: true\n\n      }, {\n        title: '当前月总收入',\n        key: 'currMonthKpi',\n        width: 150 // sortable: true\n\n      }, {\n        title: '当年总收入',\n        key: 'currYearKpi',\n        width: 150 // sortable: true\n\n      }, {\n        title: '货币类型',\n        key: 'currency',\n        width: 150 // sortable: true\n\n      }, {\n        title: '货币汇率',\n        key: 'currencyRate',\n        width: 150 // sortable: true\n\n      }, {\n        title: '是否开启etl',\n        key: 'stats',\n        width: 150 // sortable: true\n\n      }, {\n        title: '世界时区',\n        key: 'timeZone',\n        width: 150 // sortable: true\n\n      }, {\n        title: '安装总用户',\n        key: 'install',\n        width: 150 // sortable: true\n\n      }, {\n        title: '付费总额',\n        key: 'payAmount',\n        width: 150 // sortable: true\n\n      }, {\n        title: '统计几日留存',\n        key: 'retention',\n        width: 150 // sortable: true\n\n      }, {\n        title: '上线时间',\n        key: 'onlineDate',\n        width: 150 // sortable: true\n\n      }, {\n        title: 'etl触发时间',\n        key: 'etlTriggerTime',\n        width: 150 // sortable: true\n\n      }, {\n        title: 'etl触发id',\n        key: 'etlTriggerId',\n        width: 150 // sortable: true\n\n      }, {\n        title: 'etl当前状态',\n        key: 'etlStatus',\n        width: 150 // sortable: true\n\n      }, {\n        title: '统计优先级',\n        key: 'etlOrder',\n        width: 150 // sortable: true\n\n      }, // {\n      // \ttitle: '创建时间',\n      // \tkey: 'createTime',\n      // \tsortable: true,\n      // \tsortType: 'desc',\n      // \twidth: 150\n      // },\n      {\n        title: '操作',\n        key: 'action',\n        width: 200,\n        align: 'center',\n        // fixed: 'right',\n        render: function render(h, params) {\n          var enableOrDisable = '';\n          var editButton = h('Button', {\n            props: {\n              type: 'primary',\n              size: 'small',\n              disabled: !_this.$route.meta.permTypes.includes('edit')\n            },\n            style: {\n              marginRight: '5px'\n            },\n            on: {\n              click: function click() {\n                _this.edit(params.row);\n              }\n            }\n          }, '编辑');\n          var deleteButton = h('Button', {\n            props: {\n              type: 'error',\n              size: 'small',\n              disabled: !_this.$route.meta.permTypes.includes('delete')\n            },\n            on: {\n              click: function click() {\n                _this.remove(params.row);\n              }\n            }\n          }, '删除');\n          return h('div', [editButton, deleteButton]);\n        }\n      }],\n      data: [],\n      searchForm: {\n        gameid: '',\n        name: '',\n        pageNumber: 1,\n        pageSize: 10\n      },\n      total: 0,\n      submitLoading: false,\n      serverModalVisible: false,\n      gameForm: {\n        parentId: '',\n        gameid: '',\n        name: '',\n        alias: '',\n        logo: '',\n        monthKpi: '',\n        yearKpi: '',\n        currMonthKpi: '',\n        currYearKpi: '',\n        currency: '',\n        currencyRate: '',\n        stats: '',\n        timeZone: '',\n        install: '',\n        payAmount: '',\n        retention: '',\n        onlineDate: new Date(),\n        etlTriggerTime: new Date(),\n        etlTriggerId: '',\n        etlStatus: '',\n        etlOrder: ''\n      },\n      hide: false,\n      games: []\n    };\n  },\n  methods: {\n    init: function init() {\n      this.queryAllGame();\n    },\n    handleSearch: function handleSearch() {\n      this.queryAllGame();\n    },\n    queryAllGame: function queryAllGame() {\n      var _this2 = this;\n\n      queryAllGameReq(this.searchForm).then(function (res) {\n        // this.loading = false;\n        if (res.success) {\n          _this2.data = res.result.records;\n          _this2.games = res.result.records;\n          _this2.total = res.result.total;\n        }\n      });\n    },\n    changePage: function changePage(v) {\n      this.searchForm.pageNumber = v;\n      this.queryAllGame();\n      this.clearSelectAll();\n    },\n    changePageSize: function changePageSize(v) {\n      this.searchForm.pageSize = v;\n      this.queryAllGame();\n    },\n    clearSelectAll: function clearSelectAll() {\n      this.$refs.table.selectAll(false);\n    },\n    submitServer: function submitServer() {\n      var _this3 = this;\n\n      this.$refs.gameForm.validate(function (valid) {\n        if (valid) {\n          if (_this3.modalType == 0) {\n            // 添加 避免编辑后传入id\n            if (_this3.gameForm.parentId == '' || _this3.gameForm.parentId == undefined) {\n              _this3.errorid = '编号id不能为空';\n              return;\n            }\n\n            if (_this3.gameForm.gameid == '' || _this3.gameForm.gameid == undefined) {\n              _this3.errorGameid = '游戏id不能为空';\n              return;\n            }\n\n            if (_this3.gameForm.name == '' || _this3.gameForm.name == undefined) {\n              _this3.errorGameName = '游戏名不能为空';\n              return;\n            }\n\n            if (_this3.gameForm.alias == '' || _this3.gameForm.alias == undefined) {\n              _this3.errorAlias = '游戏别名不能为空';\n              return;\n            }\n\n            if (_this3.gameForm.logo == '' || _this3.gameForm.logo == undefined) {\n              _this3.errorLogo = '游戏Logo不能为空';\n              return;\n            }\n\n            if (_this3.gameForm.monthKpi == '' || _this3.gameForm.monthKpi == undefined) {\n              _this3.errorMonthKpi = '游戏月KPI不能为空';\n              return;\n            }\n\n            if (_this3.gameForm.yearKpi == '' || _this3.gameForm.yearKpi == undefined) {\n              _this3.errorYearKpi = '游戏年KPI不能为空';\n              return;\n            }\n\n            if (_this3.gameForm.currMonthKpi == '' || _this3.gameForm.currMonthKpi == undefined) {\n              _this3.errorCurrMonthKpi = '游戏当月总收入不能为空';\n              return;\n            }\n\n            if (_this3.gameForm.currYearKpi == '' || _this3.gameForm.currYearKpi == undefined) {\n              _this3.errorCurrYearKpi = '游戏当年总收入不能为空';\n              return;\n            }\n\n            if (_this3.gameForm.currency == '' || _this3.gameForm.currency == undefined) {\n              _this3.errorCurrency = '游戏货币类型不能为空';\n              return;\n            }\n\n            if (_this3.gameForm.currencyRate == '' || _this3.gameForm.currencyRate == undefined) {\n              _this3.errorCurrencyRate = '游戏货币汇率不能为空';\n              return;\n            }\n\n            if (_this3.gameForm.stats == '' || _this3.gameForm.stats == undefined) {\n              _this3.errorSstats = '游戏是否开启elt状态不能为空';\n              return;\n            }\n\n            if (_this3.gameForm.timeZone == '' || _this3.gameForm.timeZone == undefined) {\n              _this3.errorTimeZone = '游戏世界时区不能为空';\n              return;\n            }\n\n            if (_this3.gameForm.install == '' || _this3.gameForm.install == undefined) {\n              _this3.errorInstall = '游戏总安装数不能为空';\n              return;\n            }\n\n            if (_this3.gameForm.payAmount == '' || _this3.gameForm.payAmount == undefined) {\n              _this3.errorPayAmount = '游戏总付费额不能为空';\n              return;\n            }\n\n            if (_this3.gameForm.onlineDate == '' || _this3.gameForm.onlineDate == undefined) {\n              _this3.errorOnlineDate = '游戏上线时间不能为空';\n              return;\n            }\n\n            if (_this3.gameForm.etlTriggerTime == '' || _this3.gameForm.etlTriggerTime == undefined) {\n              _this3.EtlTriggerTime = '游戏elt触发时间不能为空';\n              return;\n            }\n\n            _this3.submitLoading = true;\n            addGame({\n              parentId: _this3.gameForm.parentId,\n              gameid: _this3.gameForm.gameid,\n              name: _this3.gameForm.name,\n              alias: _this3.gameForm.alias,\n              logo: _this3.gameForm.alias,\n              monthKpi: _this3.gameForm.monthKpi,\n              yearKpi: _this3.gameForm.yearKpi,\n              currMonthKpi: _this3.gameForm.currMonthKpi,\n              currYearKpi: _this3.gameForm.currYearKpi,\n              currency: _this3.gameForm.currency,\n              currencyRate: _this3.gameForm.currencyRate,\n              stats: _this3.gameForm.stats,\n              timeZone: _this3.gameForm.timeZone,\n              install: _this3.gameForm.install,\n              payAmount: _this3.gameForm.payAmount,\n              retention: _this3.gameForm.retention,\n              onlineDate: _this3.gameForm.onlineDate,\n              etlTriggerTime: _this3.gameForm.etlTriggerTime,\n              etlTriggerId: _this3.gameForm.etlTriggerId,\n              etlStatus: _this3.gameForm.etlStatus,\n              etlOrder: _this3.gameForm.etlOrder\n            }).then(function (res) {\n              _this3.submitLoading = false;\n\n              if (res.success) {\n                _this3.$Message.success('操作成功');\n\n                _this3.queryAllGame();\n\n                _this3.serverModalVisible = false;\n              }\n            });\n          } else {\n            // 编辑\n            _this3.submitLoading = true;\n            editGame({\n              parentId: _this3.gameForm.parentId,\n              gameid: _this3.gameForm.gameid,\n              name: _this3.gameForm.name,\n              alias: _this3.gameForm.alias,\n              logo: _this3.gameForm.alias,\n              monthKpi: _this3.gameForm.monthKpi,\n              yearKpi: _this3.gameForm.yearKpi,\n              currMonthKpi: _this3.gameForm.currMonthKpi,\n              currYearKpi: _this3.gameForm.currYearKpi,\n              currency: _this3.gameForm.currency,\n              currencyRate: _this3.gameForm.currencyRate,\n              stats: _this3.gameForm.stats,\n              timeZone: _this3.gameForm.timeZone,\n              install: _this3.gameForm.install,\n              payAmount: _this3.gameForm.payAmount,\n              retention: _this3.gameForm.retention,\n              onlineDate: _this3.gameForm.onlineDate,\n              etlTriggerTime: _this3.gameForm.etlTriggerTime,\n              etlTriggerId: _this3.gameForm.etlTriggerId,\n              etlStatus: _this3.gameForm.etlStatus,\n              etlOrder: _this3.gameForm.etlOrder\n            }).then(function (res) {\n              _this3.submitLoading = false;\n\n              if (res.success) {\n                _this3.$Message.success('操作成功');\n\n                _this3.queryAllGame();\n\n                _this3.serverModalVisible = false;\n              }\n            });\n          }\n        }\n      });\n    },\n    cancelAdvert: function cancelAdvert() {\n      this.serverModalVisible = false;\n    },\n    add: function add() {\n      this.modalType = 0;\n      this.modalTitle = '添加游戏';\n      this.$refs.gameForm.resetFields();\n      this.serverModalVisible = true;\n      this.hide = true;\n    },\n    edit: function edit(v) {\n      this.modalType = 1;\n      this.modalTitle = '编辑游戏';\n      this.$refs.gameForm.resetFields(); // 转换null为\"\"\n\n      for (var attr in v) {\n        if (v[attr] == null) {\n          v[attr] = '';\n        }\n      }\n\n      var str = JSON.stringify(v);\n      var data = JSON.parse(str);\n      this.gameForm = data;\n      this.serverModalVisible = true;\n      this.hide = false;\n    },\n    remove: function remove(v) {\n      var _this4 = this;\n\n      this.$Modal.confirm({\n        title: '确认删除',\n        content: '您确认要删除游戏名为： ' + v.name + '?',\n        loading: true,\n        onOk: function onOk() {\n          deleteGame(v.parentId).then(function (res) {\n            _this4.$Modal.remove();\n\n            if (res.success) {\n              _this4.$Message.success('删除成功');\n\n              _this4.queryAllGame();\n            }\n          });\n        }\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.init();\n  }\n};",null]}