{"remainingRequest":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/thread-loader/dist/cjs.js!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/report/report/report.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/report/report/report.vue","mtime":1586858666677},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { queryAllAdvertReq, queryRpc, queryTableConsoleGames, downloadReportReq, queryIpAddress } from '@/api/index';\nimport { Scene, PolygonLayer, LineLayer } from '@antv/l7';\nimport { GaodeMap } from '@antv/l7-maps';\nimport $ from 'jquery';\nimport '../../../../node_modules/echarts/map/js/china.js'; // 引入中国地图数据\n\nexport default {\n  name: \"report\",\n  data: function data() {\n    return {\n      games: [],\n      searchForm: {\n        gameid: ''\n      },\n      rpc: {\n        gameid: ''\n      },\n      time: [],\n      date: \"\",\n      data: [{\n        genre: 'Sports',\n        sold: 275\n      }, {\n        genre: 'Strategy',\n        sold: 115\n      }, {\n        genre: 'Action',\n        sold: 120\n      }, {\n        genre: 'Shooter',\n        sold: 350\n      }, {\n        genre: 'Other',\n        sold: 150\n      }],\n      chart: {},\n      dauIpAddress: []\n    };\n  },\n  methods: {\n    init: function init() {\n      this.getGames(); // this.antvG2Text();\n\n      this.antvL();\n    },\n    changeAntvData: function changeAntvData() {\n      var data = [{\n        genre: 'Sports',\n        sold: 105\n      }, {\n        genre: 'Strategy',\n        sold: 105\n      }, {\n        genre: 'Action',\n        sold: 105\n      }, {\n        genre: 'Shooter',\n        sold: 105\n      }, {\n        genre: 'Other',\n        sold: 105\n      }];\n      this.chart.changeData(data);\n    },\n    antvG2Text: function antvG2Text() {\n      this.chart = new G2.Chart({\n        container: 'c1',\n        // 指定图表容器 ID\n        width: 600,\n        // 指定图表宽度\n        height: 300 // 指定图表高度\n\n      }); // Step 2: 载入数据源\n\n      this.chart.source(this.data); // Step 3：创建图形语法，绘制柱状图，由 genre 和 sold 两个属性决定图形位置，genre 映射至 x 轴，sold 映射至 y 轴\n\n      this.chart.interval().position('genre*sold').color('genre'); // Step 4: 渲染图表\n\n      this.chart.render();\n    },\n    antvL: function antvL() {\n      var scene = new Scene({\n        id: 'map',\n        map: new GaodeMap({\n          pitch: 0,\n          style: 'light',\n          center: [107.042225, 37.66565],\n          zoom: 3.87\n        })\n      });\n      scene.on('loaded', function () {\n        fetch('https://gw.alipayobjects.com/os/rmsportal/JToMOWvicvJOISZFCkEI.json').then(function (res) {\n          return res.json();\n        }).then(function (data) {\n          debugger;\n          var colors = ['#D7F9F0', '#A6E1E0', '#72BED6', '#5B8FF9', '#3474DB', '#005CBE', '#00419F', '#00287E'];\n          var layer = new PolygonLayer({}).source(data).color('name', colors).shape('fill').active(true).style({\n            opacity: 0.9\n          });\n          var layer2 = new LineLayer({\n            zIndex: 2\n          }).source(data).color('#fff').size(0.3).style({\n            opacity: 1\n          });\n          scene.addLayer(layer);\n          scene.addLayer(layer2);\n        });\n      });\n    },\n    getGames: function getGames() {\n      var _this = this;\n\n      queryTableConsoleGames().then(function (res) {\n        if (res.success) {\n          _this.games = res.result;\n        }\n      });\n    },\n    selectRpc: function selectRpc() {\n      this.startRpc();\n    },\n    startRpc: function startRpc() {\n      var param = {\n        gameid: this.rpc.gameid.toString(),\n        ds: this.timeUtil(this.date).toString(),\n        snid: \"1\"\n      };\n      queryRpc(param).then(function (res) {\n        if (res.success) {\n          alert(\"success\");\n        }\n      });\n    },\n    download: function download() {\n      var t = this.time;\n\n      if (this.searchForm.gameid == '' || undefined) {\n        alert('请选择游戏');\n        return;\n      }\n\n      if (this.time[0] == '') {\n        alert(\"请输入时间\");\n        return;\n      }\n\n      var gameid = this.searchForm.gameid,\n          beginData = this.timeUtil(this.time[0]),\n          overData = this.timeUtil(this.time[1]); // let url = `https://report.nuojuekeji.com/api/report/generateReport?startDs=${beginData}&endDs=${overData}&gameId=${gameid}`;\n\n      window.location.href = \"https://report.nuojuekeji.com/api/report/generateReport?startDs=\".concat(beginData, \"&endDs=\").concat(overData, \"&gameId=\").concat(gameid, \"&snid=1\"); //\n      // let url = 'https://report.nuojuekeji.com/api/report/generateReport?startDs=2019-11-18&endDs=2019-12-16&gameId=8';\n      // downloadReportReq(url).then(res => {\n      //     debugger\n      //     // const blob = new Blob([response.data]);\n      //     // const fileName = 'user.xls';\n      //     // const linkNode = document.createElement('a');\n      //     //\n      //     // linkNode.download = fileName; //a标签的download属性规定下载文件的名称\n      //     // linkNode.style.display = 'none';\n      //     // linkNode.href = URL.createObjectURL(blob); //生成一个Blob URL\n      //     // document.body.appendChild(linkNode);\n      //     // linkNode.click();  //模拟在按钮上的一次鼠标单击\n      //     //\n      //     // URL.revokeObjectURL(linkNode.href); // 释放URL 对象\n      //     // document.body.removeChild(linkNode);\n      //\n      // });\n    },\n    timeUtil: function timeUtil(time) {\n      return time.getFullYear() + \"-\" + (time.getMonth() + 1 < 10 ? \"0\" + (time.getMonth() + 1) : time.getMonth() + 1) + \"-\" + (time.getDate() < 10 ? \"0\" + time.getDate() : time.getDate());\n    },\n    compute: function compute(datas) {\n      var data = datas.map(function (info) {\n        return {\n          name: info.province.replace(\"省\", \"\"),\n          value: info.provinceNum\n        };\n      });\n      return data;\n    }\n  },\n  mounted: function mounted() {\n    this.init();\n  }\n};",null]}