{"remainingRequest":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/reportdata/reportOnline/reportOnline.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/reportdata/reportOnline/reportOnline.vue","mtime":1586855880627},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {queryOnline, queryDaily} from '@/api/index';\nimport {weekChange} from '@/libs/changeWeek';\n\nexport default {\n    name: \"reportOnline\",\n    data() {\n        return {\n            loadingOnline:true,\n            defaultData: {\n                yestoday: 1,\n                week: 7,\n                month: 30\n            },\n            data: \"7\",\n            columns: [\n                {\n                    title: '日期（星期）',\n                    key: 'ds',\n                    width: 150,\n                    fixed: 'left',\n                    align: 'center'\n                }, {\n                    title: '0-1分钟',\n                    width: 150,\n                    align: 'center',\n                    children: [\n                        {\n                            title: '人数',\n                            key: '01durationNumbers',\n                            align: 'center',\n                            width: 100\n                        }, {\n                            title: '留存用户数',\n                            key: '01durationRetentionNumbers',\n                            align: 'center',\n                            width: 100\n                        }, {\n                            title: '新增率（%）',\n                            key: '01installPeople',\n                            align: 'center',\n                            width: 130\n                        }, {\n                            title: '留存率（%）',\n                            key: '01installRention',\n                            align: 'center',\n                            width: 130\n                        }\n                    ]\n                }, {\n                    title: '1-5分钟',\n                    width: 150,\n                    align: 'center',\n                    children: [\n                        {\n                            title: '人数',\n                            key: '15durationNumbers',\n                            align: 'center',\n                            width: 100\n                        }, {\n                            title: '留存用户数',\n                            key: '15durationRetentionNumbers',\n                            align: 'center',\n                            width: 100\n                        }, {\n                            title: '新增率（%）',\n                            key: '15installPeople',\n                            align: 'center',\n                            width: 130\n                        }, {\n                            title: '留存率（%）',\n                            key: '15installRention',\n                            align: 'center',\n                            width: 130\n                        }\n                    ]\n                }, {\n                    title: '5-10分钟',\n                    width: 150,\n                    align: 'center',\n                    children: [\n                        {\n                            title: '人数',\n                            key: '510durationNumbers',\n                            align: 'center',\n                            width: 100\n                        }, {\n                            title: '留存用户数',\n                            key: '510durationRetentionNumbers',\n                            align: 'center',\n                            width: 100\n                        }, {\n                            title: '新增率（%）',\n                            key: '510installPeople',\n                            align: 'center',\n                            width: 130\n                        }, {\n                            title: '留存率（%）',\n                            key: '510installRention',\n                            align: 'center',\n                            width: 130\n                        }\n                    ]\n                },\n                {\n                    title: '10-20分钟',\n                    width: 150,\n                    align: 'center',\n                    children: [\n                        {\n                            title: '人数',\n                            key: '1020durationNumbers',\n                            align: 'center',\n                            width: 100\n                        }, {\n                            title: '留存用户数',\n                            key: '1020durationRetentionNumbers',\n                            align: 'center',\n                            width: 100\n                        }, {\n                            title: '新增率（%）',\n                            key: '1020installPeople',\n                            align: 'center',\n                            width: 130\n                        }, {\n                            title: '留存率（%）',\n                            key: '1020installRention',\n                            align: 'center',\n                            width: 130\n                        }\n                    ]\n                },\n                {\n                    title: '20-30分钟',\n                    width: 150,\n                    align: 'center',\n                    children: [\n                        {\n                            title: '人数',\n                            key: '2030durationNumbers',\n                            align: 'center',\n                            width: 100\n                        }, {\n                            title: '留存用户数',\n                            key: '2030durationRetentionNumbers',\n                            align: 'center',\n                            width: 100\n                        }, {\n                            title: '新增率（%）',\n                            key: '2030installPeople',\n                            align: 'center',\n                            width: 130\n                        }, {\n                            title: '留存率（%）',\n                            key: '2030installRention',\n                            align: 'center',\n                            width: 130\n                        }\n                    ]\n                }, {\n                    title: '大于30分钟',\n                    width: 150,\n                    align: 'center',\n                    children: [\n                        {\n                            title: '人数',\n                            key: '30durationNumbers',\n                            align: 'center',\n                            width: 100\n                        }, {\n                            title: '留存用户数',\n                            key: '30durationRetentionNumbers',\n                            align: 'center',\n                            width: 100\n                        }, {\n                            title: '新增率（%）',\n                            key: '30installPeople',\n                            align: 'center',\n                            width: 130\n                        }, {\n                            title: '留存率（%）',\n                            key: '30installRention',\n                            align: 'center',\n                            width: 130\n                        }\n                    ]\n                },\n            ],\n            tableV: [],\n            charts: [],\n            pyaGroupChart: {},\n            shareDailyResultTypes: []\n        }\n    },\n    methods: {\n        init() {\n            this.loadingOnline = true;\n            this.queryOnline();\n\n        },\n        queryOnline() {\n\n            let paramss = {\n                gameid: parseInt(this.getStore('gameid')),\n                deviceType: 0,\n                osType: 0,\n                data: parseInt(this.data),\n                hxType: 0,\n            }\n            queryDaily(paramss).then(e => {\n                this.loadingOnline = false;\n                if (e.success) {\n                    let install = new Map   ();\n                    this.shareDailyResultTypes = (e.shareDailyResultTypes).forEach(item => {\n                        // item.ds = weekChange(item.ds)\n                        install.set(item.ds, item.installNum)\n                    })\n                    let params = {\n                        gameid: parseInt(this.getStore('gameid')),\n                        date: parseInt(this.data)\n                    }\n                    queryOnline(params).then(e => {\n                        if (e.success) {\n                            let onlines = e.onlineDurationDistributions;\n                            let tables = [];\n                            for (let info in onlines) {\n                                let tablesObject = new Object();\n                                onlines[info].forEach(item => {\n                                    tablesObject.ds = weekChange(item.installDs);\n                                    if (item.duration == '0-1分钟') {\n                                        tablesObject['01durationNumbers'] = item.durationNumbers;\n                                        tablesObject['01durationRetentionNumbers'] = item.durationRetentionNumbers;\n                                        tablesObject['01installPeople'] = install.get(item.installDs) == '' ? '' : (item.durationNumbers / install.get(item.installDs) * 100).toFixed(2);\n                                        tablesObject['01installRention'] = install.get(item.installDs) == '' ? '' : (item.durationRetentionNumbers / install.get(item.installDs) * 100).toFixed(2);\n                                    } else if (item.duration == '1-5分钟') {\n                                        tablesObject['15durationNumbers'] = item.durationNumbers;\n                                        tablesObject['15durationRetentionNumbers'] = item.durationRetentionNumbers;\n                                        tablesObject['15installPeople'] = install.get(item.installDs) == '' ? '' : (item.durationNumbers / install.get(item.installDs) * 100).toFixed(2);\n                                        tablesObject['15installRention'] = install.get(item.installDs) == '' ? '' : (item.durationRetentionNumbers / install.get(item.installDs) * 100).toFixed(2);\n                                    } else if (item.duration == '5-10分钟') {\n                                        tablesObject['510durationNumbers'] = item.durationNumbers;\n                                        tablesObject['510durationRetentionNumbers'] = item.durationRetentionNumbers;\n                                        tablesObject['510installPeople'] = install.get(item.installDs) == '' ? '' : (item.durationNumbers / install.get(item.installDs) * 100).toFixed(2);\n                                        tablesObject['510installRention'] = install.get(item.installDs) == '' ? '' : (item.durationRetentionNumbers / install.get(item.installDs) * 100).toFixed(2);\n                                    } else if (item.duration == '10-20分钟') {\n                                        tablesObject['1020durationNumbers'] = item.durationNumbers;\n                                        tablesObject['1020durationRetentionNumbers'] = item.durationRetentionNumbers;\n                                        tablesObject['1020installPeople'] = install.get(item.installDs) == '' ? '' : (item.durationNumbers / install.get(item.installDs) * 100).toFixed(2);\n                                        tablesObject['1020installRention'] = install.get(item.installDs) == '' ? '' : (item.durationRetentionNumbers / install.get(item.installDs) * 100).toFixed(2);\n                                    } else if (item.duration == '20-30分钟') {\n                                        tablesObject['2030durationNumbers'] = item.durationNumbers;\n                                        tablesObject['2030durationRetentionNumbers'] = item.durationRetentionNumbers;\n                                        tablesObject['2030installPeople'] = install.get(item.installDs) == '' ? '' : (item.durationNumbers / install.get(item.installDs) * 100).toFixed(2);\n                                        tablesObject['2030installRention'] = install.get(item.installDs) == '' ? '' : (item.durationRetentionNumbers / install.get(item.installDs) * 100).toFixed(2);\n                                    } else if (item.duration == '大于30分钟')\n                                    {\n                                        tablesObject['30durationNumbers'] = item.durationNumbers;\n                                        tablesObject['30durationRetentionNumbers'] = item.durationRetentionNumbers;\n                                        tablesObject['30installPeople'] = install.get(item.installDs) == '' ? '' : (item.durationNumbers / install.get(item.installDs) * 100).toFixed(2);\n                                        tablesObject['30installRention'] = install.get(item.installDs) == '' ? '' : (item.durationRetentionNumbers / install.get(item.installDs) * 100).toFixed(2);\n                                    }\n                                })\n                                tables.push(tablesObject)\n                            }\n                            tables.sort(this.compare);\n                            // let firstData = [];\n                            // onlines.forEach(item => {\n                            //     item.ds = weekChange(item.ds);\n                            //     item.installPeople = (item.durationNumbers / install.get(item.ds) * 100).toFixed(2) + '%';\n                            //     item.installRention = (item.durationRetentionNumbers / install.get(item.ds) * 100).toFixed(2) + '%';\n                            //     //取出最近一天的\n                            //     if (item.ds == onlines[0].ds) {\n                            //         firstData.push(item);\n                            //     }\n                            // })\n                            // //处理分组柱状图数据\n                            // let charts = [];\n                            // firstData.forEach(item => {\n                            //     let peoplesObj = new Object();\n                            //     peoplesObj.name = '人数';\n                            //     peoplesObj.duration = item.duration;\n                            //     peoplesObj.value = item.durationNumbers;\n                            //     let dauNumObj = new Object();\n                            //     dauNumObj.name = '留存用户数';\n                            //     dauNumObj.duration = item.duration;\n                            //     dauNumObj.value = item.durationRetentionNumbers;\n                            //     charts.push(peoplesObj);\n                            //     charts.push(dauNumObj);\n                            // })\n                            // this.charts = charts;\n                            this.tableV = tables;\n                            // this.pyaGroupChart.changeData(this.charts);\n                        }\n                    })\n                }\n            })\n\n\n        },\n        // clickOnlineTable(data) {\n        //     let firstData = [];\n        //     this.tableV.forEach(item => {\n        //         if (item.ds == data.ds) {\n        //             firstData.push(item);\n        //         }\n        //         }\n        //     })\n        //     let charts = [];\n        //     firstData.forEach(item => {\n        //         let peoplesObj = new Object();\n        //         peoplesObj.name = '人数';\n        //         peoplesObj.duration = item.duration;\n        //         peoplesObj.value = item.durationNumbers;\n        //         let dauNumObj = new Object();\n        //         dauNumObj.name = '留存用户数';\n        //         dauNumObj.duration = item.duration;\n        //         dauNumObj.value = item.durationRetentionNumbers;\n        //         charts.push(peoplesObj);\n        //         charts.push(dauNumObj);\n        //     })\n        //     this.charts = charts;\n        //     this.pyaGroupChart.changeData(this.charts);\n        // },\n        // G2Online() {\n        //     // 分组柱状图\n        //     this.pyaGroupChart = new G2.Chart({\n        //         container: 'onlineG2',\n        //         forceFit: true,\n        //         height: 350\n        //     });\n        //     this.pyaGroupChart.source(this.charts);\n        //     this.pyaGroupChart.interval().position('duration*value').color('name')\n        //         .adjust([{\n        //             type: 'dodge',\n        //             marginRatio: 1 / 32\n        //         }]);\n        //     this.pyaGroupChart.render();\n        // },\n        compare: function (obj1, obj2) {\n            var val1 = obj1.ds;\n            var val2 = obj2.ds;\n            if (val1 < val2) {\n                return 1;\n            } else if (val1 > val2) {\n                return -1;\n            } else {\n                return 0;\n            }\n        },\n    },\n    mounted() {\n        // this.G2Online();\n        this.init();\n    }\n    ,\n}\n",{"version":3,"sources":["reportOnline.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAoBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"reportOnline.vue","sourceRoot":"src/views/reportdata/reportOnline","sourcesContent":["<template>\n    <div style=\"background-color:#fff;height: 1000px\">\n        <!--时间-->\n        <div>\n            <RadioGroup v-model=\"data\" type=\"button\" @on-change=\"init()\">\n                <Radio style=\"margin: 10px 10px\" label=\"1\">昨天</Radio>\n                <Radio style=\"margin: 10px 10px\" label=\"7\">7日</Radio>\n                <Radio style=\"margin: 10px 10px\" label=\"30\">30日</Radio>\n            </RadioGroup>\n        </div>\n        <Row style=\"margin-top: 20px\">\n            <Table :loading=\"loadingOnline\" height=\"435\" highlight-row @on-row-click=\"clickOnlineTable\" border :columns=\"columns\" :data=\"tableV\"\n                   ref=\"table\"></Table>\n        </Row>\n        <!--        <div style=\"background-color:#fff;border-radius: 10px 10px 10px 10px\"-->\n        <!--             id=\"onlineG2\"></div>-->\n    </div>\n</template>\n\n<script>\n    import {queryOnline, queryDaily} from '@/api/index';\n    import {weekChange} from '@/libs/changeWeek';\n\n    export default {\n        name: \"reportOnline\",\n        data() {\n            return {\n                loadingOnline:true,\n                defaultData: {\n                    yestoday: 1,\n                    week: 7,\n                    month: 30\n                },\n                data: \"7\",\n                columns: [\n                    {\n                        title: '日期（星期）',\n                        key: 'ds',\n                        width: 150,\n                        fixed: 'left',\n                        align: 'center'\n                    }, {\n                        title: '0-1分钟',\n                        width: 150,\n                        align: 'center',\n                        children: [\n                            {\n                                title: '人数',\n                                key: '01durationNumbers',\n                                align: 'center',\n                                width: 100\n                            }, {\n                                title: '留存用户数',\n                                key: '01durationRetentionNumbers',\n                                align: 'center',\n                                width: 100\n                            }, {\n                                title: '新增率（%）',\n                                key: '01installPeople',\n                                align: 'center',\n                                width: 130\n                            }, {\n                                title: '留存率（%）',\n                                key: '01installRention',\n                                align: 'center',\n                                width: 130\n                            }\n                        ]\n                    }, {\n                        title: '1-5分钟',\n                        width: 150,\n                        align: 'center',\n                        children: [\n                            {\n                                title: '人数',\n                                key: '15durationNumbers',\n                                align: 'center',\n                                width: 100\n                            }, {\n                                title: '留存用户数',\n                                key: '15durationRetentionNumbers',\n                                align: 'center',\n                                width: 100\n                            }, {\n                                title: '新增率（%）',\n                                key: '15installPeople',\n                                align: 'center',\n                                width: 130\n                            }, {\n                                title: '留存率（%）',\n                                key: '15installRention',\n                                align: 'center',\n                                width: 130\n                            }\n                        ]\n                    }, {\n                        title: '5-10分钟',\n                        width: 150,\n                        align: 'center',\n                        children: [\n                            {\n                                title: '人数',\n                                key: '510durationNumbers',\n                                align: 'center',\n                                width: 100\n                            }, {\n                                title: '留存用户数',\n                                key: '510durationRetentionNumbers',\n                                align: 'center',\n                                width: 100\n                            }, {\n                                title: '新增率（%）',\n                                key: '510installPeople',\n                                align: 'center',\n                                width: 130\n                            }, {\n                                title: '留存率（%）',\n                                key: '510installRention',\n                                align: 'center',\n                                width: 130\n                            }\n                        ]\n                    },\n                    {\n                        title: '10-20分钟',\n                        width: 150,\n                        align: 'center',\n                        children: [\n                            {\n                                title: '人数',\n                                key: '1020durationNumbers',\n                                align: 'center',\n                                width: 100\n                            }, {\n                                title: '留存用户数',\n                                key: '1020durationRetentionNumbers',\n                                align: 'center',\n                                width: 100\n                            }, {\n                                title: '新增率（%）',\n                                key: '1020installPeople',\n                                align: 'center',\n                                width: 130\n                            }, {\n                                title: '留存率（%）',\n                                key: '1020installRention',\n                                align: 'center',\n                                width: 130\n                            }\n                        ]\n                    },\n                    {\n                        title: '20-30分钟',\n                        width: 150,\n                        align: 'center',\n                        children: [\n                            {\n                                title: '人数',\n                                key: '2030durationNumbers',\n                                align: 'center',\n                                width: 100\n                            }, {\n                                title: '留存用户数',\n                                key: '2030durationRetentionNumbers',\n                                align: 'center',\n                                width: 100\n                            }, {\n                                title: '新增率（%）',\n                                key: '2030installPeople',\n                                align: 'center',\n                                width: 130\n                            }, {\n                                title: '留存率（%）',\n                                key: '2030installRention',\n                                align: 'center',\n                                width: 130\n                            }\n                        ]\n                    }, {\n                        title: '大于30分钟',\n                        width: 150,\n                        align: 'center',\n                        children: [\n                            {\n                                title: '人数',\n                                key: '30durationNumbers',\n                                align: 'center',\n                                width: 100\n                            }, {\n                                title: '留存用户数',\n                                key: '30durationRetentionNumbers',\n                                align: 'center',\n                                width: 100\n                            }, {\n                                title: '新增率（%）',\n                                key: '30installPeople',\n                                align: 'center',\n                                width: 130\n                            }, {\n                                title: '留存率（%）',\n                                key: '30installRention',\n                                align: 'center',\n                                width: 130\n                            }\n                        ]\n                    },\n                ],\n                tableV: [],\n                charts: [],\n                pyaGroupChart: {},\n                shareDailyResultTypes: []\n            }\n        },\n        methods: {\n            init() {\n                this.loadingOnline = true;\n                this.queryOnline();\n\n            },\n            queryOnline() {\n\n                let paramss = {\n                    gameid: parseInt(this.getStore('gameid')),\n                    deviceType: 0,\n                    osType: 0,\n                    data: parseInt(this.data),\n                    hxType: 0,\n                }\n                queryDaily(paramss).then(e => {\n                    this.loadingOnline = false;\n                    if (e.success) {\n                        let install = new Map   ();\n                        this.shareDailyResultTypes = (e.shareDailyResultTypes).forEach(item => {\n                            // item.ds = weekChange(item.ds)\n                            install.set(item.ds, item.installNum)\n                        })\n                        let params = {\n                            gameid: parseInt(this.getStore('gameid')),\n                            date: parseInt(this.data)\n                        }\n                        queryOnline(params).then(e => {\n                            if (e.success) {\n                                let onlines = e.onlineDurationDistributions;\n                                let tables = [];\n                                for (let info in onlines) {\n                                    let tablesObject = new Object();\n                                    onlines[info].forEach(item => {\n                                        tablesObject.ds = weekChange(item.installDs);\n                                        if (item.duration == '0-1分钟') {\n                                            tablesObject['01durationNumbers'] = item.durationNumbers;\n                                            tablesObject['01durationRetentionNumbers'] = item.durationRetentionNumbers;\n                                            tablesObject['01installPeople'] = install.get(item.installDs) == '' ? '' : (item.durationNumbers / install.get(item.installDs) * 100).toFixed(2);\n                                            tablesObject['01installRention'] = install.get(item.installDs) == '' ? '' : (item.durationRetentionNumbers / install.get(item.installDs) * 100).toFixed(2);\n                                        } else if (item.duration == '1-5分钟') {\n                                            tablesObject['15durationNumbers'] = item.durationNumbers;\n                                            tablesObject['15durationRetentionNumbers'] = item.durationRetentionNumbers;\n                                            tablesObject['15installPeople'] = install.get(item.installDs) == '' ? '' : (item.durationNumbers / install.get(item.installDs) * 100).toFixed(2);\n                                            tablesObject['15installRention'] = install.get(item.installDs) == '' ? '' : (item.durationRetentionNumbers / install.get(item.installDs) * 100).toFixed(2);\n                                        } else if (item.duration == '5-10分钟') {\n                                            tablesObject['510durationNumbers'] = item.durationNumbers;\n                                            tablesObject['510durationRetentionNumbers'] = item.durationRetentionNumbers;\n                                            tablesObject['510installPeople'] = install.get(item.installDs) == '' ? '' : (item.durationNumbers / install.get(item.installDs) * 100).toFixed(2);\n                                            tablesObject['510installRention'] = install.get(item.installDs) == '' ? '' : (item.durationRetentionNumbers / install.get(item.installDs) * 100).toFixed(2);\n                                        } else if (item.duration == '10-20分钟') {\n                                            tablesObject['1020durationNumbers'] = item.durationNumbers;\n                                            tablesObject['1020durationRetentionNumbers'] = item.durationRetentionNumbers;\n                                            tablesObject['1020installPeople'] = install.get(item.installDs) == '' ? '' : (item.durationNumbers / install.get(item.installDs) * 100).toFixed(2);\n                                            tablesObject['1020installRention'] = install.get(item.installDs) == '' ? '' : (item.durationRetentionNumbers / install.get(item.installDs) * 100).toFixed(2);\n                                        } else if (item.duration == '20-30分钟') {\n                                            tablesObject['2030durationNumbers'] = item.durationNumbers;\n                                            tablesObject['2030durationRetentionNumbers'] = item.durationRetentionNumbers;\n                                            tablesObject['2030installPeople'] = install.get(item.installDs) == '' ? '' : (item.durationNumbers / install.get(item.installDs) * 100).toFixed(2);\n                                            tablesObject['2030installRention'] = install.get(item.installDs) == '' ? '' : (item.durationRetentionNumbers / install.get(item.installDs) * 100).toFixed(2);\n                                        } else if (item.duration == '大于30分钟')\n                                        {\n                                            tablesObject['30durationNumbers'] = item.durationNumbers;\n                                            tablesObject['30durationRetentionNumbers'] = item.durationRetentionNumbers;\n                                            tablesObject['30installPeople'] = install.get(item.installDs) == '' ? '' : (item.durationNumbers / install.get(item.installDs) * 100).toFixed(2);\n                                            tablesObject['30installRention'] = install.get(item.installDs) == '' ? '' : (item.durationRetentionNumbers / install.get(item.installDs) * 100).toFixed(2);\n                                        }\n                                    })\n                                    tables.push(tablesObject)\n                                }\n                                tables.sort(this.compare);\n                                // let firstData = [];\n                                // onlines.forEach(item => {\n                                //     item.ds = weekChange(item.ds);\n                                //     item.installPeople = (item.durationNumbers / install.get(item.ds) * 100).toFixed(2) + '%';\n                                //     item.installRention = (item.durationRetentionNumbers / install.get(item.ds) * 100).toFixed(2) + '%';\n                                //     //取出最近一天的\n                                //     if (item.ds == onlines[0].ds) {\n                                //         firstData.push(item);\n                                //     }\n                                // })\n                                // //处理分组柱状图数据\n                                // let charts = [];\n                                // firstData.forEach(item => {\n                                //     let peoplesObj = new Object();\n                                //     peoplesObj.name = '人数';\n                                //     peoplesObj.duration = item.duration;\n                                //     peoplesObj.value = item.durationNumbers;\n                                //     let dauNumObj = new Object();\n                                //     dauNumObj.name = '留存用户数';\n                                //     dauNumObj.duration = item.duration;\n                                //     dauNumObj.value = item.durationRetentionNumbers;\n                                //     charts.push(peoplesObj);\n                                //     charts.push(dauNumObj);\n                                // })\n                                // this.charts = charts;\n                                this.tableV = tables;\n                                // this.pyaGroupChart.changeData(this.charts);\n                            }\n                        })\n                    }\n                })\n\n\n            },\n            // clickOnlineTable(data) {\n            //     let firstData = [];\n            //     this.tableV.forEach(item => {\n            //         if (item.ds == data.ds) {\n            //             firstData.push(item);\n            //         }\n            //         }\n            //     })\n            //     let charts = [];\n            //     firstData.forEach(item => {\n            //         let peoplesObj = new Object();\n            //         peoplesObj.name = '人数';\n            //         peoplesObj.duration = item.duration;\n            //         peoplesObj.value = item.durationNumbers;\n            //         let dauNumObj = new Object();\n            //         dauNumObj.name = '留存用户数';\n            //         dauNumObj.duration = item.duration;\n            //         dauNumObj.value = item.durationRetentionNumbers;\n            //         charts.push(peoplesObj);\n            //         charts.push(dauNumObj);\n            //     })\n            //     this.charts = charts;\n            //     this.pyaGroupChart.changeData(this.charts);\n            // },\n            // G2Online() {\n            //     // 分组柱状图\n            //     this.pyaGroupChart = new G2.Chart({\n            //         container: 'onlineG2',\n            //         forceFit: true,\n            //         height: 350\n            //     });\n            //     this.pyaGroupChart.source(this.charts);\n            //     this.pyaGroupChart.interval().position('duration*value').color('name')\n            //         .adjust([{\n            //             type: 'dodge',\n            //             marginRatio: 1 / 32\n            //         }]);\n            //     this.pyaGroupChart.render();\n            // },\n            compare: function (obj1, obj2) {\n                var val1 = obj1.ds;\n                var val2 = obj2.ds;\n                if (val1 < val2) {\n                    return 1;\n                } else if (val1 > val2) {\n                    return -1;\n                } else {\n                    return 0;\n                }\n            },\n        },\n        mounted() {\n            // this.G2Online();\n            this.init();\n        }\n        ,\n    }\n</script>\n\n<style scoped>\n\n</style>\n"]}]}