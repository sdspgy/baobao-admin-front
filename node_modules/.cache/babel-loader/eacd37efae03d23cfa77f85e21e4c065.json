{"remainingRequest":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/reportdata/reportOnline/reportOnline.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/reportdata/reportOnline/reportOnline.vue","mtime":1590218196038},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { queryOnline as _queryOnline, queryDaily } from '@/api/index';\nimport { weekChange } from '@/libs/changeWeek';\nexport default {\n  name: \"reportOnline\",\n  data: function data() {\n    return {\n      loadingOnline: true,\n      defaultData: {\n        yestoday: 1,\n        week: 7,\n        month: 30\n      },\n      data: \"7\",\n      columns: [{\n        title: '日期（星期）',\n        key: 'ds',\n        width: 150,\n        fixed: 'left',\n        align: 'center'\n      }, {\n        title: '0-1分钟',\n        width: 150,\n        align: 'center',\n        children: [{\n          title: '人数',\n          key: '01durationNumbers',\n          align: 'center',\n          width: 100\n        }, {\n          title: '留存用户数',\n          key: '01durationRetentionNumbers',\n          align: 'center',\n          width: 100\n        }, {\n          title: '新增率（%）',\n          key: '01installPeople',\n          align: 'center',\n          width: 130\n        }, {\n          title: '留存率（%）',\n          key: '01installRention',\n          align: 'center',\n          width: 130\n        }]\n      }, {\n        title: '1-5分钟',\n        width: 150,\n        align: 'center',\n        children: [{\n          title: '人数',\n          key: '15durationNumbers',\n          align: 'center',\n          width: 100\n        }, {\n          title: '留存用户数',\n          key: '15durationRetentionNumbers',\n          align: 'center',\n          width: 100\n        }, {\n          title: '新增率（%）',\n          key: '15installPeople',\n          align: 'center',\n          width: 130\n        }, {\n          title: '留存率（%）',\n          key: '15installRention',\n          align: 'center',\n          width: 130\n        }]\n      }, {\n        title: '5-10分钟',\n        width: 150,\n        align: 'center',\n        children: [{\n          title: '人数',\n          key: '510durationNumbers',\n          align: 'center',\n          width: 100\n        }, {\n          title: '留存用户数',\n          key: '510durationRetentionNumbers',\n          align: 'center',\n          width: 100\n        }, {\n          title: '新增率（%）',\n          key: '510installPeople',\n          align: 'center',\n          width: 130\n        }, {\n          title: '留存率（%）',\n          key: '510installRention',\n          align: 'center',\n          width: 130\n        }]\n      }, {\n        title: '10-20分钟',\n        width: 150,\n        align: 'center',\n        children: [{\n          title: '人数',\n          key: '1020durationNumbers',\n          align: 'center',\n          width: 100\n        }, {\n          title: '留存用户数',\n          key: '1020durationRetentionNumbers',\n          align: 'center',\n          width: 100\n        }, {\n          title: '新增率（%）',\n          key: '1020installPeople',\n          align: 'center',\n          width: 130\n        }, {\n          title: '留存率（%）',\n          key: '1020installRention',\n          align: 'center',\n          width: 130\n        }]\n      }, {\n        title: '20-30分钟',\n        width: 150,\n        align: 'center',\n        children: [{\n          title: '人数',\n          key: '2030durationNumbers',\n          align: 'center',\n          width: 100\n        }, {\n          title: '留存用户数',\n          key: '2030durationRetentionNumbers',\n          align: 'center',\n          width: 100\n        }, {\n          title: '新增率（%）',\n          key: '2030installPeople',\n          align: 'center',\n          width: 130\n        }, {\n          title: '留存率（%）',\n          key: '2030installRention',\n          align: 'center',\n          width: 130\n        }]\n      }, {\n        title: '大于30分钟',\n        width: 150,\n        align: 'center',\n        children: [{\n          title: '人数',\n          key: '30durationNumbers',\n          align: 'center',\n          width: 100\n        }, {\n          title: '留存用户数',\n          key: '30durationRetentionNumbers',\n          align: 'center',\n          width: 100\n        }, {\n          title: '新增率（%）',\n          key: '30installPeople',\n          align: 'center',\n          width: 130\n        }, {\n          title: '留存率（%）',\n          key: '30installRention',\n          align: 'center',\n          width: 130\n        }]\n      }],\n      tableV: [],\n      charts: [],\n      pyaGroupChart: {},\n      shareDailyResultTypes: [],\n      timeSection: [],\n      startTime: 0,\n      overTime: 0,\n      options: {\n        disabledDate: function disabledDate(date) {\n          return date && date.valueOf() >= Date.now() - 86400000;\n        }\n      }\n    };\n  },\n  methods: {\n    dayEvent: function dayEvent() {\n      this.timeSection = [];\n      this.startTime = 0;\n      this.overTime = 0;\n      this.init();\n    },\n    timeSectionEvent: function timeSectionEvent() {\n      var nowTime = new Date();\n      this.overTime = 0;\n      this.startTime = 0;\n\n      if (nowTime - this.timeSection[0] > 0) {\n        this.startTime = parseInt((nowTime - this.timeSection[0]) / (24 * 60 * 60 * 1000));\n      }\n\n      if (nowTime - this.timeSection[1] > 0) {\n        this.overTime = parseInt((nowTime - this.timeSection[1]) / (24 * 60 * 60 * 1000));\n      }\n\n      this.init();\n    },\n    init: function init() {\n      this.loadingOnline = true;\n      this.queryOnline();\n    },\n    queryOnline: function queryOnline() {\n      var _this = this;\n\n      var paramss = {\n        gameid: parseInt(this.getStore('gameid')),\n        deviceType: 0,\n        osType: 0,\n        data: parseInt(this.data),\n        hxType: 0\n      };\n\n      if (this.startTime !== 0) {\n        paramss.data = this.startTime;\n        this.data = this.startTime;\n      }\n\n      if (this.overTime !== 0) {\n        paramss.overTime = this.overTime;\n      }\n\n      queryDaily(paramss).then(function (e) {\n        _this.loadingOnline = false;\n\n        if (e.success) {\n          var install = new Map();\n          _this.shareDailyResultTypes = e.shareDailyResultTypes.forEach(function (item) {\n            // item.ds = weekChange(item.ds)\n            install.set(item.ds, item.installNum);\n          });\n          var params = {\n            gameid: parseInt(_this.getStore('gameid')),\n            date: parseInt(_this.data)\n          };\n\n          _queryOnline(params).then(function (e) {\n            if (e.success) {\n              var onlines = e.onlineDurationDistributions;\n              var tables = [];\n\n              var _loop = function _loop(info) {\n                var tablesObject = new Object();\n                onlines[info].forEach(function (item) {\n                  tablesObject.ds = weekChange(item.installDs);\n\n                  if (item.duration == '0-1分钟') {\n                    tablesObject['01durationNumbers'] = item.durationNumbers;\n                    tablesObject['01durationRetentionNumbers'] = item.durationRetentionNumbers;\n                    tablesObject['01installPeople'] = install.get(item.installDs) == '' ? '' : (item.durationNumbers / install.get(item.installDs) * 100).toFixed(2);\n                    tablesObject['01installRention'] = install.get(item.installDs) == '' ? '' : (item.durationRetentionNumbers / item.durationNumbers * 100).toFixed(2);\n                  } else if (item.duration == '1-5分钟') {\n                    tablesObject['15durationNumbers'] = item.durationNumbers;\n                    tablesObject['15durationRetentionNumbers'] = item.durationRetentionNumbers;\n                    tablesObject['15installPeople'] = install.get(item.installDs) == '' ? '' : (item.durationNumbers / install.get(item.installDs) * 100).toFixed(2);\n                    tablesObject['15installRention'] = install.get(item.installDs) == '' ? '' : (item.durationRetentionNumbers / item.durationNumbers * 100).toFixed(2);\n                  } else if (item.duration == '5-10分钟') {\n                    tablesObject['510durationNumbers'] = item.durationNumbers;\n                    tablesObject['510durationRetentionNumbers'] = item.durationRetentionNumbers;\n                    tablesObject['510installPeople'] = install.get(item.installDs) == '' ? '' : (item.durationNumbers / install.get(item.installDs) * 100).toFixed(2);\n                    tablesObject['510installRention'] = install.get(item.installDs) == '' ? '' : (item.durationRetentionNumbers / item.durationNumbers * 100).toFixed(2);\n                  } else if (item.duration == '10-20分钟') {\n                    tablesObject['1020durationNumbers'] = item.durationNumbers;\n                    tablesObject['1020durationRetentionNumbers'] = item.durationRetentionNumbers;\n                    tablesObject['1020installPeople'] = install.get(item.installDs) == '' ? '' : (item.durationNumbers / install.get(item.installDs) * 100).toFixed(2);\n                    tablesObject['1020installRention'] = install.get(item.installDs) == '' ? '' : (item.durationRetentionNumbers / item.durationNumbers * 100).toFixed(2);\n                  } else if (item.duration == '20-30分钟') {\n                    tablesObject['2030durationNumbers'] = item.durationNumbers;\n                    tablesObject['2030durationRetentionNumbers'] = item.durationRetentionNumbers;\n                    tablesObject['2030installPeople'] = install.get(item.installDs) == '' ? '' : (item.durationNumbers / install.get(item.installDs) * 100).toFixed(2);\n                    tablesObject['2030installRention'] = install.get(item.installDs) == '' ? '' : (item.durationRetentionNumbers / item.durationNumbers * 100).toFixed(2);\n                  } else if (item.duration == '大于30分钟') {\n                    tablesObject['30durationNumbers'] = item.durationNumbers;\n                    tablesObject['30durationRetentionNumbers'] = item.durationRetentionNumbers;\n                    tablesObject['30installPeople'] = install.get(item.installDs) == '' ? '' : (item.durationNumbers / install.get(item.installDs) * 100).toFixed(2);\n                    tablesObject['30installRention'] = install.get(item.installDs) == '' ? '' : (item.durationRetentionNumbers / item.durationNumbers * 100).toFixed(2);\n                  }\n                });\n                tables.push(tablesObject);\n              };\n\n              for (var info in onlines) {\n                _loop(info);\n              }\n\n              tables.sort(_this.compare); // let firstData = [];\n              // onlines.forEach(item => {\n              //     item.ds = weekChange(item.ds);\n              //     item.installPeople = (item.durationNumbers / install.get(item.ds) * 100).toFixed(2) + '%';\n              //     item.installRention = (item.durationRetentionNumbers / install.get(item.ds) * 100).toFixed(2) + '%';\n              //     //取出最近一天的\n              //     if (item.ds == onlines[0].ds) {\n              //         firstData.push(item);\n              //     }\n              // })\n              // //处理分组柱状图数据\n              // let charts = [];\n              // firstData.forEach(item => {\n              //     let peoplesObj = new Object();\n              //     peoplesObj.name = '人数';\n              //     peoplesObj.duration = item.duration;\n              //     peoplesObj.value = item.durationNumbers;\n              //     let dauNumObj = new Object();\n              //     dauNumObj.name = '留存用户数';\n              //     dauNumObj.duration = item.duration;\n              //     dauNumObj.value = item.durationRetentionNumbers;\n              //     charts.push(peoplesObj);\n              //     charts.push(dauNumObj);\n              // })\n              // this.charts = charts;\n\n              _this.tableV = tables; // this.pyaGroupChart.changeData(this.charts);\n            }\n          });\n        }\n      });\n    },\n    // clickOnlineTable(data) {\n    //     let firstData = [];\n    //     this.tableV.forEach(item => {\n    //         if (item.ds == data.ds) {\n    //             firstData.push(item);\n    //         }\n    //         }\n    //     })\n    //     let charts = [];\n    //     firstData.forEach(item => {\n    //         let peoplesObj = new Object();\n    //         peoplesObj.name = '人数';\n    //         peoplesObj.duration = item.duration;\n    //         peoplesObj.value = item.durationNumbers;\n    //         let dauNumObj = new Object();\n    //         dauNumObj.name = '留存用户数';\n    //         dauNumObj.duration = item.duration;\n    //         dauNumObj.value = item.durationRetentionNumbers;\n    //         charts.push(peoplesObj);\n    //         charts.push(dauNumObj);\n    //     })\n    //     this.charts = charts;\n    //     this.pyaGroupChart.changeData(this.charts);\n    // },\n    // G2Online() {\n    //     // 分组柱状图\n    //     this.pyaGroupChart = new G2.Chart({\n    //         container: 'onlineG2',\n    //         forceFit: true,\n    //         height: 350\n    //     });\n    //     this.pyaGroupChart.source(this.charts);\n    //     this.pyaGroupChart.interval().position('duration*value').color('name')\n    //         .adjust([{\n    //             type: 'dodge',\n    //             marginRatio: 1 / 32\n    //         }]);\n    //     this.pyaGroupChart.render();\n    // },\n    compare: function compare(obj1, obj2) {\n      var val1 = obj1.ds;\n      var val2 = obj2.ds;\n\n      if (val1 < val2) {\n        return 1;\n      } else if (val1 > val2) {\n        return -1;\n      } else {\n        return 0;\n      }\n    }\n  },\n  mounted: function mounted() {\n    // this.G2Online();\n    this.init();\n  }\n};",{"version":3,"sources":["reportOnline.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAyBA,SAAA,WAAA,IAAA,YAAA,EAAA,UAAA,QAAA,aAAA;AACA,SAAA,UAAA,QAAA,mBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,cADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,aAAA,EAAA,IADA;AAEA,MAAA,WAAA,EAAA;AACA,QAAA,QAAA,EAAA,CADA;AAEA,QAAA,IAAA,EAAA,CAFA;AAGA,QAAA,KAAA,EAAA;AAHA,OAFA;AAOA,MAAA,IAAA,EAAA,GAPA;AAQA,MAAA,OAAA,EAAA,CACA;AACA,QAAA,KAAA,EAAA,QADA;AAEA,QAAA,GAAA,EAAA,IAFA;AAGA,QAAA,KAAA,EAAA,GAHA;AAIA,QAAA,KAAA,EAAA,MAJA;AAKA,QAAA,KAAA,EAAA;AALA,OADA,EAOA;AACA,QAAA,KAAA,EAAA,OADA;AAEA,QAAA,KAAA,EAAA,GAFA;AAGA,QAAA,KAAA,EAAA,QAHA;AAIA,QAAA,QAAA,EAAA,CACA;AACA,UAAA,KAAA,EAAA,IADA;AAEA,UAAA,GAAA,EAAA,mBAFA;AAGA,UAAA,KAAA,EAAA,QAHA;AAIA,UAAA,KAAA,EAAA;AAJA,SADA,EAMA;AACA,UAAA,KAAA,EAAA,OADA;AAEA,UAAA,GAAA,EAAA,4BAFA;AAGA,UAAA,KAAA,EAAA,QAHA;AAIA,UAAA,KAAA,EAAA;AAJA,SANA,EAWA;AACA,UAAA,KAAA,EAAA,QADA;AAEA,UAAA,GAAA,EAAA,iBAFA;AAGA,UAAA,KAAA,EAAA,QAHA;AAIA,UAAA,KAAA,EAAA;AAJA,SAXA,EAgBA;AACA,UAAA,KAAA,EAAA,QADA;AAEA,UAAA,GAAA,EAAA,kBAFA;AAGA,UAAA,KAAA,EAAA,QAHA;AAIA,UAAA,KAAA,EAAA;AAJA,SAhBA;AAJA,OAPA,EAkCA;AACA,QAAA,KAAA,EAAA,OADA;AAEA,QAAA,KAAA,EAAA,GAFA;AAGA,QAAA,KAAA,EAAA,QAHA;AAIA,QAAA,QAAA,EAAA,CACA;AACA,UAAA,KAAA,EAAA,IADA;AAEA,UAAA,GAAA,EAAA,mBAFA;AAGA,UAAA,KAAA,EAAA,QAHA;AAIA,UAAA,KAAA,EAAA;AAJA,SADA,EAMA;AACA,UAAA,KAAA,EAAA,OADA;AAEA,UAAA,GAAA,EAAA,4BAFA;AAGA,UAAA,KAAA,EAAA,QAHA;AAIA,UAAA,KAAA,EAAA;AAJA,SANA,EAWA;AACA,UAAA,KAAA,EAAA,QADA;AAEA,UAAA,GAAA,EAAA,iBAFA;AAGA,UAAA,KAAA,EAAA,QAHA;AAIA,UAAA,KAAA,EAAA;AAJA,SAXA,EAgBA;AACA,UAAA,KAAA,EAAA,QADA;AAEA,UAAA,GAAA,EAAA,kBAFA;AAGA,UAAA,KAAA,EAAA,QAHA;AAIA,UAAA,KAAA,EAAA;AAJA,SAhBA;AAJA,OAlCA,EA6DA;AACA,QAAA,KAAA,EAAA,QADA;AAEA,QAAA,KAAA,EAAA,GAFA;AAGA,QAAA,KAAA,EAAA,QAHA;AAIA,QAAA,QAAA,EAAA,CACA;AACA,UAAA,KAAA,EAAA,IADA;AAEA,UAAA,GAAA,EAAA,oBAFA;AAGA,UAAA,KAAA,EAAA,QAHA;AAIA,UAAA,KAAA,EAAA;AAJA,SADA,EAMA;AACA,UAAA,KAAA,EAAA,OADA;AAEA,UAAA,GAAA,EAAA,6BAFA;AAGA,UAAA,KAAA,EAAA,QAHA;AAIA,UAAA,KAAA,EAAA;AAJA,SANA,EAWA;AACA,UAAA,KAAA,EAAA,QADA;AAEA,UAAA,GAAA,EAAA,kBAFA;AAGA,UAAA,KAAA,EAAA,QAHA;AAIA,UAAA,KAAA,EAAA;AAJA,SAXA,EAgBA;AACA,UAAA,KAAA,EAAA,QADA;AAEA,UAAA,GAAA,EAAA,mBAFA;AAGA,UAAA,KAAA,EAAA,QAHA;AAIA,UAAA,KAAA,EAAA;AAJA,SAhBA;AAJA,OA7DA,EAyFA;AACA,QAAA,KAAA,EAAA,SADA;AAEA,QAAA,KAAA,EAAA,GAFA;AAGA,QAAA,KAAA,EAAA,QAHA;AAIA,QAAA,QAAA,EAAA,CACA;AACA,UAAA,KAAA,EAAA,IADA;AAEA,UAAA,GAAA,EAAA,qBAFA;AAGA,UAAA,KAAA,EAAA,QAHA;AAIA,UAAA,KAAA,EAAA;AAJA,SADA,EAMA;AACA,UAAA,KAAA,EAAA,OADA;AAEA,UAAA,GAAA,EAAA,8BAFA;AAGA,UAAA,KAAA,EAAA,QAHA;AAIA,UAAA,KAAA,EAAA;AAJA,SANA,EAWA;AACA,UAAA,KAAA,EAAA,QADA;AAEA,UAAA,GAAA,EAAA,mBAFA;AAGA,UAAA,KAAA,EAAA,QAHA;AAIA,UAAA,KAAA,EAAA;AAJA,SAXA,EAgBA;AACA,UAAA,KAAA,EAAA,QADA;AAEA,UAAA,GAAA,EAAA,oBAFA;AAGA,UAAA,KAAA,EAAA,QAHA;AAIA,UAAA,KAAA,EAAA;AAJA,SAhBA;AAJA,OAzFA,EAqHA;AACA,QAAA,KAAA,EAAA,SADA;AAEA,QAAA,KAAA,EAAA,GAFA;AAGA,QAAA,KAAA,EAAA,QAHA;AAIA,QAAA,QAAA,EAAA,CACA;AACA,UAAA,KAAA,EAAA,IADA;AAEA,UAAA,GAAA,EAAA,qBAFA;AAGA,UAAA,KAAA,EAAA,QAHA;AAIA,UAAA,KAAA,EAAA;AAJA,SADA,EAMA;AACA,UAAA,KAAA,EAAA,OADA;AAEA,UAAA,GAAA,EAAA,8BAFA;AAGA,UAAA,KAAA,EAAA,QAHA;AAIA,UAAA,KAAA,EAAA;AAJA,SANA,EAWA;AACA,UAAA,KAAA,EAAA,QADA;AAEA,UAAA,GAAA,EAAA,mBAFA;AAGA,UAAA,KAAA,EAAA,QAHA;AAIA,UAAA,KAAA,EAAA;AAJA,SAXA,EAgBA;AACA,UAAA,KAAA,EAAA,QADA;AAEA,UAAA,GAAA,EAAA,oBAFA;AAGA,UAAA,KAAA,EAAA,QAHA;AAIA,UAAA,KAAA,EAAA;AAJA,SAhBA;AAJA,OArHA,EAgJA;AACA,QAAA,KAAA,EAAA,QADA;AAEA,QAAA,KAAA,EAAA,GAFA;AAGA,QAAA,KAAA,EAAA,QAHA;AAIA,QAAA,QAAA,EAAA,CACA;AACA,UAAA,KAAA,EAAA,IADA;AAEA,UAAA,GAAA,EAAA,mBAFA;AAGA,UAAA,KAAA,EAAA,QAHA;AAIA,UAAA,KAAA,EAAA;AAJA,SADA,EAMA;AACA,UAAA,KAAA,EAAA,OADA;AAEA,UAAA,GAAA,EAAA,4BAFA;AAGA,UAAA,KAAA,EAAA,QAHA;AAIA,UAAA,KAAA,EAAA;AAJA,SANA,EAWA;AACA,UAAA,KAAA,EAAA,QADA;AAEA,UAAA,GAAA,EAAA,iBAFA;AAGA,UAAA,KAAA,EAAA,QAHA;AAIA,UAAA,KAAA,EAAA;AAJA,SAXA,EAgBA;AACA,UAAA,KAAA,EAAA,QADA;AAEA,UAAA,GAAA,EAAA,kBAFA;AAGA,UAAA,KAAA,EAAA,QAHA;AAIA,UAAA,KAAA,EAAA;AAJA,SAhBA;AAJA,OAhJA,CARA;AAqLA,MAAA,MAAA,EAAA,EArLA;AAsLA,MAAA,MAAA,EAAA,EAtLA;AAuLA,MAAA,aAAA,EAAA,EAvLA;AAwLA,MAAA,qBAAA,EAAA,EAxLA;AAyLA,MAAA,WAAA,EAAA,EAzLA;AA0LA,MAAA,SAAA,EAAA,CA1LA;AA2LA,MAAA,QAAA,EAAA,CA3LA;AA4LA,MAAA,OAAA,EAAA;AACA,QAAA,YADA,wBACA,IADA,EACA;AACA,iBAAA,IAAA,IAAA,IAAA,CAAA,OAAA,MAAA,IAAA,CAAA,GAAA,KAAA,QAAA;AACA;AAHA;AA5LA,KAAA;AAkMA,GArMA;AAsMA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AACA,WAAA,WAAA,GAAA,EAAA;AACA,WAAA,SAAA,GAAA,CAAA;AACA,WAAA,QAAA,GAAA,CAAA;AACA,WAAA,IAAA;AACA,KANA;AAOA,IAAA,gBAPA,8BAOA;AACA,UAAA,OAAA,GAAA,IAAA,IAAA,EAAA;AACA,WAAA,QAAA,GAAA,CAAA;AACA,WAAA,SAAA,GAAA,CAAA;;AACA,UAAA,OAAA,GAAA,KAAA,WAAA,CAAA,CAAA,CAAA,GAAA,CAAA,EAAA;AACA,aAAA,SAAA,GAAA,QAAA,CAAA,CAAA,OAAA,GAAA,KAAA,WAAA,CAAA,CAAA,CAAA,KAAA,KAAA,EAAA,GAAA,EAAA,GAAA,IAAA,CAAA,CAAA;AACA;;AACA,UAAA,OAAA,GAAA,KAAA,WAAA,CAAA,CAAA,CAAA,GAAA,CAAA,EAAA;AACA,aAAA,QAAA,GAAA,QAAA,CAAA,CAAA,OAAA,GAAA,KAAA,WAAA,CAAA,CAAA,CAAA,KAAA,KAAA,EAAA,GAAA,EAAA,GAAA,IAAA,CAAA,CAAA;AACA;;AACA,WAAA,IAAA;AACA,KAlBA;AAmBA,IAAA,IAnBA,kBAmBA;AACA,WAAA,aAAA,GAAA,IAAA;AACA,WAAA,WAAA;AAEA,KAvBA;AAwBA,IAAA,WAxBA,yBAwBA;AAAA;;AACA,UAAA,OAAA,GAAA;AACA,QAAA,MAAA,EAAA,QAAA,CAAA,KAAA,QAAA,CAAA,QAAA,CAAA,CADA;AAEA,QAAA,UAAA,EAAA,CAFA;AAGA,QAAA,MAAA,EAAA,CAHA;AAIA,QAAA,IAAA,EAAA,QAAA,CAAA,KAAA,IAAA,CAJA;AAKA,QAAA,MAAA,EAAA;AALA,OAAA;;AAOA,UAAA,KAAA,SAAA,KAAA,CAAA,EAAA;AACA,QAAA,OAAA,CAAA,IAAA,GAAA,KAAA,SAAA;AACA,aAAA,IAAA,GAAA,KAAA,SAAA;AACA;;AACA,UAAA,KAAA,QAAA,KAAA,CAAA,EAAA;AACA,QAAA,OAAA,CAAA,QAAA,GAAA,KAAA,QAAA;AACA;;AACA,MAAA,UAAA,CAAA,OAAA,CAAA,CAAA,IAAA,CAAA,UAAA,CAAA,EAAA;AACA,QAAA,KAAA,CAAA,aAAA,GAAA,KAAA;;AACA,YAAA,CAAA,CAAA,OAAA,EAAA;AACA,cAAA,OAAA,GAAA,IAAA,GAAA,EAAA;AACA,UAAA,KAAA,CAAA,qBAAA,GAAA,CAAA,CAAA,qBAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA;AACA,YAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,EAAA,EAAA,IAAA,CAAA,UAAA;AACA,WAHA,CAAA;AAIA,cAAA,MAAA,GAAA;AACA,YAAA,MAAA,EAAA,QAAA,CAAA,KAAA,CAAA,QAAA,CAAA,QAAA,CAAA,CADA;AAEA,YAAA,IAAA,EAAA,QAAA,CAAA,KAAA,CAAA,IAAA;AAFA,WAAA;;AAIA,UAAA,YAAA,CAAA,MAAA,CAAA,CAAA,IAAA,CAAA,UAAA,CAAA,EAAA;AACA,gBAAA,CAAA,CAAA,OAAA,EAAA;AACA,kBAAA,OAAA,GAAA,CAAA,CAAA,2BAAA;AACA,kBAAA,MAAA,GAAA,EAAA;;AAFA,yCAGA,IAHA;AAIA,oBAAA,YAAA,GAAA,IAAA,MAAA,EAAA;AACA,gBAAA,OAAA,CAAA,IAAA,CAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,kBAAA,YAAA,CAAA,EAAA,GAAA,UAAA,CAAA,IAAA,CAAA,SAAA,CAAA;;AACA,sBAAA,IAAA,CAAA,QAAA,IAAA,OAAA,EAAA;AACA,oBAAA,YAAA,CAAA,mBAAA,CAAA,GAAA,IAAA,CAAA,eAAA;AACA,oBAAA,YAAA,CAAA,4BAAA,CAAA,GAAA,IAAA,CAAA,wBAAA;AACA,oBAAA,YAAA,CAAA,iBAAA,CAAA,GAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,SAAA,KAAA,EAAA,GAAA,EAAA,GAAA,CAAA,IAAA,CAAA,eAAA,GAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,SAAA,CAAA,GAAA,GAAA,EAAA,OAAA,CAAA,CAAA,CAAA;AACA,oBAAA,YAAA,CAAA,kBAAA,CAAA,GAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,SAAA,KAAA,EAAA,GAAA,EAAA,GAAA,CAAA,IAAA,CAAA,wBAAA,GAAA,IAAA,CAAA,eAAA,GAAA,GAAA,EAAA,OAAA,CAAA,CAAA,CAAA;AACA,mBALA,MAKA,IAAA,IAAA,CAAA,QAAA,IAAA,OAAA,EAAA;AACA,oBAAA,YAAA,CAAA,mBAAA,CAAA,GAAA,IAAA,CAAA,eAAA;AACA,oBAAA,YAAA,CAAA,4BAAA,CAAA,GAAA,IAAA,CAAA,wBAAA;AACA,oBAAA,YAAA,CAAA,iBAAA,CAAA,GAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,SAAA,KAAA,EAAA,GAAA,EAAA,GAAA,CAAA,IAAA,CAAA,eAAA,GAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,SAAA,CAAA,GAAA,GAAA,EAAA,OAAA,CAAA,CAAA,CAAA;AACA,oBAAA,YAAA,CAAA,kBAAA,CAAA,GAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,SAAA,KAAA,EAAA,GAAA,EAAA,GAAA,CAAA,IAAA,CAAA,wBAAA,GAAA,IAAA,CAAA,eAAA,GAAA,GAAA,EAAA,OAAA,CAAA,CAAA,CAAA;AACA,mBALA,MAKA,IAAA,IAAA,CAAA,QAAA,IAAA,QAAA,EAAA;AACA,oBAAA,YAAA,CAAA,oBAAA,CAAA,GAAA,IAAA,CAAA,eAAA;AACA,oBAAA,YAAA,CAAA,6BAAA,CAAA,GAAA,IAAA,CAAA,wBAAA;AACA,oBAAA,YAAA,CAAA,kBAAA,CAAA,GAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,SAAA,KAAA,EAAA,GAAA,EAAA,GAAA,CAAA,IAAA,CAAA,eAAA,GAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,SAAA,CAAA,GAAA,GAAA,EAAA,OAAA,CAAA,CAAA,CAAA;AACA,oBAAA,YAAA,CAAA,mBAAA,CAAA,GAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,SAAA,KAAA,EAAA,GAAA,EAAA,GAAA,CAAA,IAAA,CAAA,wBAAA,GAAA,IAAA,CAAA,eAAA,GAAA,GAAA,EAAA,OAAA,CAAA,CAAA,CAAA;AACA,mBALA,MAKA,IAAA,IAAA,CAAA,QAAA,IAAA,SAAA,EAAA;AACA,oBAAA,YAAA,CAAA,qBAAA,CAAA,GAAA,IAAA,CAAA,eAAA;AACA,oBAAA,YAAA,CAAA,8BAAA,CAAA,GAAA,IAAA,CAAA,wBAAA;AACA,oBAAA,YAAA,CAAA,mBAAA,CAAA,GAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,SAAA,KAAA,EAAA,GAAA,EAAA,GAAA,CAAA,IAAA,CAAA,eAAA,GAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,SAAA,CAAA,GAAA,GAAA,EAAA,OAAA,CAAA,CAAA,CAAA;AACA,oBAAA,YAAA,CAAA,oBAAA,CAAA,GAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,SAAA,KAAA,EAAA,GAAA,EAAA,GAAA,CAAA,IAAA,CAAA,wBAAA,GAAA,IAAA,CAAA,eAAA,GAAA,GAAA,EAAA,OAAA,CAAA,CAAA,CAAA;AACA,mBALA,MAKA,IAAA,IAAA,CAAA,QAAA,IAAA,SAAA,EAAA;AACA,oBAAA,YAAA,CAAA,qBAAA,CAAA,GAAA,IAAA,CAAA,eAAA;AACA,oBAAA,YAAA,CAAA,8BAAA,CAAA,GAAA,IAAA,CAAA,wBAAA;AACA,oBAAA,YAAA,CAAA,mBAAA,CAAA,GAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,SAAA,KAAA,EAAA,GAAA,EAAA,GAAA,CAAA,IAAA,CAAA,eAAA,GAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,SAAA,CAAA,GAAA,GAAA,EAAA,OAAA,CAAA,CAAA,CAAA;AACA,oBAAA,YAAA,CAAA,oBAAA,CAAA,GAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,SAAA,KAAA,EAAA,GAAA,EAAA,GAAA,CAAA,IAAA,CAAA,wBAAA,GAAA,IAAA,CAAA,eAAA,GAAA,GAAA,EAAA,OAAA,CAAA,CAAA,CAAA;AACA,mBALA,MAKA,IAAA,IAAA,CAAA,QAAA,IAAA,QAAA,EAAA;AACA,oBAAA,YAAA,CAAA,mBAAA,CAAA,GAAA,IAAA,CAAA,eAAA;AACA,oBAAA,YAAA,CAAA,4BAAA,CAAA,GAAA,IAAA,CAAA,wBAAA;AACA,oBAAA,YAAA,CAAA,iBAAA,CAAA,GAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,SAAA,KAAA,EAAA,GAAA,EAAA,GAAA,CAAA,IAAA,CAAA,eAAA,GAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,SAAA,CAAA,GAAA,GAAA,EAAA,OAAA,CAAA,CAAA,CAAA;AACA,oBAAA,YAAA,CAAA,kBAAA,CAAA,GAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,SAAA,KAAA,EAAA,GAAA,EAAA,GAAA,CAAA,IAAA,CAAA,wBAAA,GAAA,IAAA,CAAA,eAAA,GAAA,GAAA,EAAA,OAAA,CAAA,CAAA,CAAA;AACA;AACA,iBAjCA;AAkCA,gBAAA,MAAA,CAAA,IAAA,CAAA,YAAA;AAvCA;;AAGA,mBAAA,IAAA,IAAA,IAAA,OAAA,EAAA;AAAA,sBAAA,IAAA;AAqCA;;AACA,cAAA,MAAA,CAAA,IAAA,CAAA,KAAA,CAAA,OAAA,EAzCA,CA0CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,cAAA,KAAA,CAAA,MAAA,GAAA,MAAA,CAnEA,CAoEA;AACA;AACA,WAvEA;AAwEA;AACA,OArFA;AAwFA,KA/HA;AAgIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAA,OAAA,EAAA,iBAAA,IAAA,EAAA,IAAA,EAAA;AACA,UAAA,IAAA,GAAA,IAAA,CAAA,EAAA;AACA,UAAA,IAAA,GAAA,IAAA,CAAA,EAAA;;AACA,UAAA,IAAA,GAAA,IAAA,EAAA;AACA,eAAA,CAAA;AACA,OAFA,MAEA,IAAA,IAAA,GAAA,IAAA,EAAA;AACA,eAAA,CAAA,CAAA;AACA,OAFA,MAEA;AACA,eAAA,CAAA;AACA;AACA;AAjLA,GAtMA;AAyXA,EAAA,OAzXA,qBAyXA;AACA;AACA,SAAA,IAAA;AACA;AA5XA,CAAA","sourcesContent":["<template>\n    <div style=\"background-color:#fff;height: 1000px\">\n        <!--时间-->\n        <div>\n            <RadioGroup v-model=\"data\" type=\"button\" @on-change=\"dayEvent()\">\n                <Radio style=\"margin: 10px 10px\" label=\"1\">昨天</Radio>\n                <Radio style=\"margin: 10px 10px\" label=\"7\">7日</Radio>\n                <Radio style=\"margin: 10px 10px\" label=\"30\">30日</Radio>\n            </RadioGroup>\n            <DatePicker v-model=\"timeSection\" :options=\"options\" confirm @on-ok=\"timeSectionEvent()\"\n                        type=\"daterange\" show-week-numbers\n                        placement=\"bottom-end\" placeholder=\"选择起始日期\"\n                        style=\"margin-left:100px;width: 200px\"></DatePicker>\n        </div>\n        <Row style=\"margin-top: 20px\">\n            <Table :loading=\"loadingOnline\" height=\"435\" highlight-row @on-row-click=\"clickOnlineTable\" border\n                   :columns=\"columns\" :data=\"tableV\"\n                   ref=\"table\"></Table>\n        </Row>\n        <!--        <div style=\"background-color:#fff;border-radius: 10px 10px 10px 10px\"-->\n        <!--             id=\"onlineG2\"></div>-->\n    </div>\n</template>\n\n<script>\n    import {queryOnline, queryDaily} from '@/api/index';\n    import {weekChange} from '@/libs/changeWeek';\n\n    export default {\n        name: \"reportOnline\",\n        data() {\n            return {\n                loadingOnline: true,\n                defaultData: {\n                    yestoday: 1,\n                    week: 7,\n                    month: 30\n                },\n                data: \"7\",\n                columns: [\n                    {\n                        title: '日期（星期）',\n                        key: 'ds',\n                        width: 150,\n                        fixed: 'left',\n                        align: 'center'\n                    }, {\n                        title: '0-1分钟',\n                        width: 150,\n                        align: 'center',\n                        children: [\n                            {\n                                title: '人数',\n                                key: '01durationNumbers',\n                                align: 'center',\n                                width: 100\n                            }, {\n                                title: '留存用户数',\n                                key: '01durationRetentionNumbers',\n                                align: 'center',\n                                width: 100\n                            }, {\n                                title: '新增率（%）',\n                                key: '01installPeople',\n                                align: 'center',\n                                width: 130\n                            }, {\n                                title: '留存率（%）',\n                                key: '01installRention',\n                                align: 'center',\n                                width: 130\n                            }\n                        ]\n                    }, {\n                        title: '1-5分钟',\n                        width: 150,\n                        align: 'center',\n                        children: [\n                            {\n                                title: '人数',\n                                key: '15durationNumbers',\n                                align: 'center',\n                                width: 100\n                            }, {\n                                title: '留存用户数',\n                                key: '15durationRetentionNumbers',\n                                align: 'center',\n                                width: 100\n                            }, {\n                                title: '新增率（%）',\n                                key: '15installPeople',\n                                align: 'center',\n                                width: 130\n                            }, {\n                                title: '留存率（%）',\n                                key: '15installRention',\n                                align: 'center',\n                                width: 130\n                            }\n                        ]\n                    }, {\n                        title: '5-10分钟',\n                        width: 150,\n                        align: 'center',\n                        children: [\n                            {\n                                title: '人数',\n                                key: '510durationNumbers',\n                                align: 'center',\n                                width: 100\n                            }, {\n                                title: '留存用户数',\n                                key: '510durationRetentionNumbers',\n                                align: 'center',\n                                width: 100\n                            }, {\n                                title: '新增率（%）',\n                                key: '510installPeople',\n                                align: 'center',\n                                width: 130\n                            }, {\n                                title: '留存率（%）',\n                                key: '510installRention',\n                                align: 'center',\n                                width: 130\n                            }\n                        ]\n                    },\n                    {\n                        title: '10-20分钟',\n                        width: 150,\n                        align: 'center',\n                        children: [\n                            {\n                                title: '人数',\n                                key: '1020durationNumbers',\n                                align: 'center',\n                                width: 100\n                            }, {\n                                title: '留存用户数',\n                                key: '1020durationRetentionNumbers',\n                                align: 'center',\n                                width: 100\n                            }, {\n                                title: '新增率（%）',\n                                key: '1020installPeople',\n                                align: 'center',\n                                width: 130\n                            }, {\n                                title: '留存率（%）',\n                                key: '1020installRention',\n                                align: 'center',\n                                width: 130\n                            }\n                        ]\n                    },\n                    {\n                        title: '20-30分钟',\n                        width: 150,\n                        align: 'center',\n                        children: [\n                            {\n                                title: '人数',\n                                key: '2030durationNumbers',\n                                align: 'center',\n                                width: 100\n                            }, {\n                                title: '留存用户数',\n                                key: '2030durationRetentionNumbers',\n                                align: 'center',\n                                width: 100\n                            }, {\n                                title: '新增率（%）',\n                                key: '2030installPeople',\n                                align: 'center',\n                                width: 130\n                            }, {\n                                title: '留存率（%）',\n                                key: '2030installRention',\n                                align: 'center',\n                                width: 130\n                            }\n                        ]\n                    }, {\n                        title: '大于30分钟',\n                        width: 150,\n                        align: 'center',\n                        children: [\n                            {\n                                title: '人数',\n                                key: '30durationNumbers',\n                                align: 'center',\n                                width: 100\n                            }, {\n                                title: '留存用户数',\n                                key: '30durationRetentionNumbers',\n                                align: 'center',\n                                width: 100\n                            }, {\n                                title: '新增率（%）',\n                                key: '30installPeople',\n                                align: 'center',\n                                width: 130\n                            }, {\n                                title: '留存率（%）',\n                                key: '30installRention',\n                                align: 'center',\n                                width: 130\n                            }\n                        ]\n                    },\n                ],\n                tableV: [],\n                charts: [],\n                pyaGroupChart: {},\n                shareDailyResultTypes: [],\n                timeSection: [],\n                startTime: 0,\n                overTime: 0,\n                options: {\n                    disabledDate(date) {\n                        return date && date.valueOf() >= Date.now() - 86400000;\n                    }\n                },\n            }\n        },\n        methods: {\n            dayEvent() {\n                this.timeSection = [];\n                this.startTime = 0;\n                this.overTime = 0;\n                this.init()\n            },\n            timeSectionEvent() {\n                let nowTime = new Date()\n                this.overTime = 0;\n                this.startTime = 0;\n                if (nowTime - this.timeSection[0] > 0) {\n                    this.startTime = parseInt((nowTime - this.timeSection[0]) / (24 * 60 * 60 * 1000))\n                }\n                if (nowTime - this.timeSection[1] > 0) {\n                    this.overTime = parseInt((nowTime - this.timeSection[1]) / (24 * 60 * 60 * 1000))\n                }\n                this.init()\n            },\n            init() {\n                this.loadingOnline = true;\n                this.queryOnline();\n\n            },\n            queryOnline() {\n                let paramss = {\n                    gameid: parseInt(this.getStore('gameid')),\n                    deviceType: 0,\n                    osType: 0,\n                    data: parseInt(this.data),\n                    hxType: 0,\n                }\n                if (this.startTime !== 0) {\n                    paramss.data = this.startTime\n                    this.data = this.startTime\n                }\n                if (this.overTime !== 0) {\n                    paramss.overTime = this.overTime\n                }\n                queryDaily(paramss).then(e => {\n                    this.loadingOnline = false;\n                    if (e.success) {\n                        let install = new Map();\n                        this.shareDailyResultTypes = (e.shareDailyResultTypes).forEach(item => {\n                            // item.ds = weekChange(item.ds)\n                            install.set(item.ds, item.installNum)\n                        })\n                        let params = {\n                            gameid: parseInt(this.getStore('gameid')),\n                            date: parseInt(this.data)\n                        }\n                        queryOnline(params).then(e => {\n                            if (e.success) {\n                                let onlines = e.onlineDurationDistributions;\n                                let tables = [];\n                                for (let info in onlines) {\n                                    let tablesObject = new Object();\n                                    onlines[info].forEach(item => {\n                                        tablesObject.ds = weekChange(item.installDs);\n                                        if (item.duration == '0-1分钟') {\n                                            tablesObject['01durationNumbers'] = item.durationNumbers;\n                                            tablesObject['01durationRetentionNumbers'] = item.durationRetentionNumbers;\n                                            tablesObject['01installPeople'] = install.get(item.installDs) == '' ? '' : (item.durationNumbers / install.get(item.installDs) * 100).toFixed(2);\n                                            tablesObject['01installRention'] = install.get(item.installDs) == '' ? '' : (item.durationRetentionNumbers / item.durationNumbers * 100).toFixed(2);\n                                        } else if (item.duration == '1-5分钟') {\n                                            tablesObject['15durationNumbers'] = item.durationNumbers;\n                                            tablesObject['15durationRetentionNumbers'] = item.durationRetentionNumbers;\n                                            tablesObject['15installPeople'] = install.get(item.installDs) == '' ? '' : (item.durationNumbers / install.get(item.installDs) * 100).toFixed(2);\n                                            tablesObject['15installRention'] = install.get(item.installDs) == '' ? '' : (item.durationRetentionNumbers / item.durationNumbers * 100).toFixed(2);\n                                        } else if (item.duration == '5-10分钟') {\n                                            tablesObject['510durationNumbers'] = item.durationNumbers;\n                                            tablesObject['510durationRetentionNumbers'] = item.durationRetentionNumbers;\n                                            tablesObject['510installPeople'] = install.get(item.installDs) == '' ? '' : (item.durationNumbers / install.get(item.installDs) * 100).toFixed(2);\n                                            tablesObject['510installRention'] = install.get(item.installDs) == '' ? '' : (item.durationRetentionNumbers / item.durationNumbers * 100).toFixed(2);\n                                        } else if (item.duration == '10-20分钟') {\n                                            tablesObject['1020durationNumbers'] = item.durationNumbers;\n                                            tablesObject['1020durationRetentionNumbers'] = item.durationRetentionNumbers;\n                                            tablesObject['1020installPeople'] = install.get(item.installDs) == '' ? '' : (item.durationNumbers / install.get(item.installDs) * 100).toFixed(2);\n                                            tablesObject['1020installRention'] = install.get(item.installDs) == '' ? '' : (item.durationRetentionNumbers / item.durationNumbers * 100).toFixed(2);\n                                        } else if (item.duration == '20-30分钟') {\n                                            tablesObject['2030durationNumbers'] = item.durationNumbers;\n                                            tablesObject['2030durationRetentionNumbers'] = item.durationRetentionNumbers;\n                                            tablesObject['2030installPeople'] = install.get(item.installDs) == '' ? '' : (item.durationNumbers / install.get(item.installDs) * 100).toFixed(2);\n                                            tablesObject['2030installRention'] = install.get(item.installDs) == '' ? '' : (item.durationRetentionNumbers / item.durationNumbers * 100).toFixed(2);\n                                        } else if (item.duration == '大于30分钟') {\n                                            tablesObject['30durationNumbers'] = item.durationNumbers;\n                                            tablesObject['30durationRetentionNumbers'] = item.durationRetentionNumbers;\n                                            tablesObject['30installPeople'] = install.get(item.installDs) == '' ? '' : (item.durationNumbers / install.get(item.installDs) * 100).toFixed(2);\n                                            tablesObject['30installRention'] = install.get(item.installDs) == '' ? '' : (item.durationRetentionNumbers / item.durationNumbers * 100).toFixed(2);\n                                        }\n                                    })\n                                    tables.push(tablesObject)\n                                }\n                                tables.sort(this.compare);\n                                // let firstData = [];\n                                // onlines.forEach(item => {\n                                //     item.ds = weekChange(item.ds);\n                                //     item.installPeople = (item.durationNumbers / install.get(item.ds) * 100).toFixed(2) + '%';\n                                //     item.installRention = (item.durationRetentionNumbers / install.get(item.ds) * 100).toFixed(2) + '%';\n                                //     //取出最近一天的\n                                //     if (item.ds == onlines[0].ds) {\n                                //         firstData.push(item);\n                                //     }\n                                // })\n                                // //处理分组柱状图数据\n                                // let charts = [];\n                                // firstData.forEach(item => {\n                                //     let peoplesObj = new Object();\n                                //     peoplesObj.name = '人数';\n                                //     peoplesObj.duration = item.duration;\n                                //     peoplesObj.value = item.durationNumbers;\n                                //     let dauNumObj = new Object();\n                                //     dauNumObj.name = '留存用户数';\n                                //     dauNumObj.duration = item.duration;\n                                //     dauNumObj.value = item.durationRetentionNumbers;\n                                //     charts.push(peoplesObj);\n                                //     charts.push(dauNumObj);\n                                // })\n                                // this.charts = charts;\n                                this.tableV = tables;\n                                // this.pyaGroupChart.changeData(this.charts);\n                            }\n                        })\n                    }\n                })\n\n\n            },\n            // clickOnlineTable(data) {\n            //     let firstData = [];\n            //     this.tableV.forEach(item => {\n            //         if (item.ds == data.ds) {\n            //             firstData.push(item);\n            //         }\n            //         }\n            //     })\n            //     let charts = [];\n            //     firstData.forEach(item => {\n            //         let peoplesObj = new Object();\n            //         peoplesObj.name = '人数';\n            //         peoplesObj.duration = item.duration;\n            //         peoplesObj.value = item.durationNumbers;\n            //         let dauNumObj = new Object();\n            //         dauNumObj.name = '留存用户数';\n            //         dauNumObj.duration = item.duration;\n            //         dauNumObj.value = item.durationRetentionNumbers;\n            //         charts.push(peoplesObj);\n            //         charts.push(dauNumObj);\n            //     })\n            //     this.charts = charts;\n            //     this.pyaGroupChart.changeData(this.charts);\n            // },\n            // G2Online() {\n            //     // 分组柱状图\n            //     this.pyaGroupChart = new G2.Chart({\n            //         container: 'onlineG2',\n            //         forceFit: true,\n            //         height: 350\n            //     });\n            //     this.pyaGroupChart.source(this.charts);\n            //     this.pyaGroupChart.interval().position('duration*value').color('name')\n            //         .adjust([{\n            //             type: 'dodge',\n            //             marginRatio: 1 / 32\n            //         }]);\n            //     this.pyaGroupChart.render();\n            // },\n            compare: function (obj1, obj2) {\n                var val1 = obj1.ds;\n                var val2 = obj2.ds;\n                if (val1 < val2) {\n                    return 1;\n                } else if (val1 > val2) {\n                    return -1;\n                } else {\n                    return 0;\n                }\n            },\n        },\n        mounted() {\n            // this.G2Online();\n            this.init();\n        }\n        ,\n    }\n</script>\n\n<style scoped>\n\n</style>\n"],"sourceRoot":"src/views/reportdata/reportOnline"}]}