{"remainingRequest":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/report/report/report.vue?vue&type=style&index=0&id=88a9e424&scoped=true&lang=css&","dependencies":[{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/report/report/report.vue","mtime":1586858666677},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.container {\n    width: 900px;\n    height: 900px;\n}\n\n#myEcharts {\n    width: 100%;\n    height: 600px;\n    margin: 10px auto;\n}\n\n.rpcStyle {\n    width: 50%;\n    height: 300px;\n    position: relative;\n    left: 40%;\n    top: -100px;\n}\n",{"version":3,"sources":["report.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6NA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"report.vue","sourceRoot":"src/views/report/report","sourcesContent":["<template>\n    <div>\n        <div>\n            <Select v-model=\"searchForm.gameid\" style=\"width:200px\">\n                <Option v-for=\"item in games\" :value=\"item.gameid\" :key=\"item.gameid\">{{ item.gamename }}</Option>\n            </Select>\n            <Row>\n                <Col span=\"12\">\n                    <DatePicker v-model=\"time\" type=\"daterange\" format=\"yyyy-MM-dd\" placeholder=\"选择开始时间\"\n                                style=\"width: 200px\"></DatePicker>\n                </Col>\n            </Row>\n            <Button @click=\"download\" type=\"info\">下载</Button>\n            <!-- 创建图表容器 -->\n            <!--        <div id=\"c1\"></div>-->\n            <!--        <Button @click=\"changeAntvData\" type=\"info\">Antv</Button>-->\n            <!--        <div style=\"min-height: 500px; justify-content: center;position: relative\" id=\"map\"/>-->\n        </div>\n        <div class=\"rpcStyle\">\n            <Select v-model=\"rpc.gameid\" style=\"width:200px\">\n                <Option v-for=\"item in games\" :value=\"item.gameid\" :key=\"item.gameid\">{{ item.gamename }}</Option>\n            </Select>\n            <Row>\n                <Col span=\"12\">\n                    <DatePicker v-model=\"date\" type=\"date\" placeholder=\"Select date\" style=\"width: 200px\"></DatePicker>\n                </Col>\n            </Row>\n            <Button @click=\"selectRpc\" type=\"info\">查询</Button>\n        </div>\n    </div>\n\n</template>\n\n<script>\n    import {queryAllAdvertReq, queryRpc,queryTableConsoleGames, downloadReportReq, queryIpAddress} from '@/api/index';\n    import {Scene, PolygonLayer, LineLayer} from '@antv/l7';\n    import {GaodeMap} from '@antv/l7-maps';\n    import $ from 'jquery'\n    import '../../../../node_modules/echarts/map/js/china.js' // 引入中国地图数据\n    export default {\n        name: \"report\",\n        data() {\n            return {\n                games: [],\n                searchForm: {\n                    gameid: '',\n                },\n                rpc: {\n                    gameid: '',\n                },\n                time: [],\n                date: \"\",\n                data: [\n                    {genre: 'Sports', sold: 275},\n                    {genre: 'Strategy', sold: 115},\n                    {genre: 'Action', sold: 120},\n                    {genre: 'Shooter', sold: 350},\n                    {genre: 'Other', sold: 150}\n                ],\n                chart: {},\n                dauIpAddress: []\n            }\n        },\n        methods: {\n            init() {\n                this.getGames();\n                // this.antvG2Text();\n                this.antvL();\n            },\n            changeAntvData() {\n                const data = [\n                    {genre: 'Sports', sold: 105},\n                    {genre: 'Strategy', sold: 105},\n                    {genre: 'Action', sold: 105},\n                    {genre: 'Shooter', sold: 105},\n                    {genre: 'Other', sold: 105}\n                ]\n                this.chart.changeData(data);\n            },\n            antvG2Text() {\n                this.chart = new G2.Chart({\n                    container: 'c1', // 指定图表容器 ID\n                    width: 600, // 指定图表宽度\n                    height: 300 // 指定图表高度\n                });\n                // Step 2: 载入数据源\n                this.chart.source(this.data);\n                // Step 3：创建图形语法，绘制柱状图，由 genre 和 sold 两个属性决定图形位置，genre 映射至 x 轴，sold 映射至 y 轴\n                this.chart.interval().position('genre*sold').color('genre')\n                // Step 4: 渲染图表\n                this.chart.render();\n            },\n\n            antvL() {\n                const scene = new Scene({\n                    id: 'map',\n                    map: new GaodeMap({\n                        pitch: 0,\n                        style: 'light',\n                        center: [107.042225, 37.66565],\n                        zoom: 3.87\n                    })\n                });\n                scene.on('loaded', () => {\n                    fetch('https://gw.alipayobjects.com/os/rmsportal/JToMOWvicvJOISZFCkEI.json')\n                        .then(res => res.json())\n                        .then(data => {\n                            debugger\n                            const colors = [\n                                '#D7F9F0',\n                                '#A6E1E0',\n                                '#72BED6',\n                                '#5B8FF9',\n                                '#3474DB',\n                                '#005CBE',\n                                '#00419F',\n                                '#00287E'\n                            ];\n                            const layer = new PolygonLayer({})\n                                .source(data)\n                                .color('name', colors)\n                                .shape('fill')\n                                .active(true)\n                                .style({\n                                    opacity: 0.9\n                                });\n\n                            const layer2 = new LineLayer({\n                                zIndex: 2\n                            })\n                                .source(data)\n                                .color('#fff')\n                                .size(0.3)\n                                .style({\n                                    opacity: 1\n                                });\n\n                            scene.addLayer(layer);\n                            scene.addLayer(layer2);\n                        });\n                });\n            },\n            getGames() {\n                queryTableConsoleGames().then(res => {\n                    if (res.success) {\n                        this.games = res.result;\n                    }\n                });\n\n            },\n            selectRpc() {\n                this.startRpc()\n            },\n            startRpc() {\n                let param = {\n                    gameid: this.rpc.gameid.toString(),\n                    ds: this.timeUtil(this.date).toString(),\n                    snid: \"1\"\n                }\n                queryRpc(param).then(res => {\n                    if (res.success) {\n                        alert(\"success\")\n                    }\n                })\n            },\n\n            download() {\n                let t = this.time;\n                if (this.searchForm.gameid == '' || undefined) {\n                    alert('请选择游戏');\n                    return;\n                }\n                if (this.time[0] == '') {\n                    alert(\"请输入时间\");\n                    return;\n                }\n                let gameid = this.searchForm.gameid,\n                    beginData = this.timeUtil(this.time[0]),\n                    overData = this.timeUtil(this.time[1]);\n                // let url = `https://report.nuojuekeji.com/api/report/generateReport?startDs=${beginData}&endDs=${overData}&gameId=${gameid}`;\n                window.location.href = `https://report.nuojuekeji.com/api/report/generateReport?startDs=${beginData}&endDs=${overData}&gameId=${gameid}&snid=1`;\n                //\n                // let url = 'https://report.nuojuekeji.com/api/report/generateReport?startDs=2019-11-18&endDs=2019-12-16&gameId=8';\n                // downloadReportReq(url).then(res => {\n                //     debugger\n                //     // const blob = new Blob([response.data]);\n                //     // const fileName = 'user.xls';\n                //     // const linkNode = document.createElement('a');\n                //     //\n                //     // linkNode.download = fileName; //a标签的download属性规定下载文件的名称\n                //     // linkNode.style.display = 'none';\n                //     // linkNode.href = URL.createObjectURL(blob); //生成一个Blob URL\n                //     // document.body.appendChild(linkNode);\n                //     // linkNode.click();  //模拟在按钮上的一次鼠标单击\n                //     //\n                //     // URL.revokeObjectURL(linkNode.href); // 释放URL 对象\n                //     // document.body.removeChild(linkNode);\n                //\n                // });\n            },\n            timeUtil(time) {\n                return time.getFullYear() + \"-\" + ((time.getMonth() + 1) < 10 ? \"0\" + (time.getMonth() + 1) : (time.getMonth() + 1)) + \"-\" + (time.getDate() < 10 ? \"0\" + time.getDate() : time.getDate());\n            },\n            compute(datas) {\n                let data = datas.map(info => {\n                    return {\n                        name: (info.province).replace(\"省\", \"\"),\n                        value: info.provinceNum\n                    }\n                })\n                return data\n            },\n        }\n        ,\n        mounted() {\n            this.init();\n        }\n    }\n</script>\n\n<style scoped>\n    .container {\n        width: 900px;\n        height: 900px;\n    }\n\n    #myEcharts {\n        width: 100%;\n        height: 600px;\n        margin: 10px auto;\n    }\n\n    .rpcStyle {\n        width: 50%;\n        height: 300px;\n        position: relative;\n        left: 40%;\n        top: -100px;\n    }\n</style>\n"]}]}