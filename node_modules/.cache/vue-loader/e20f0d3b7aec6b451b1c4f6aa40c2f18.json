{"remainingRequest":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/home/home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/home/home.vue","mtime":1586870066338},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n    import Cookies from \"js-cookie\";\n    import \"gitalk/dist/gitalk.css\";\n    import {queryTableConsoleGames} from '@/api/index';\n    import {router} from '@/router/index';\n\n    export default {\n        name: \"home\",\n        components: {},\n        data() {\n            return {\n                username: \"\",\n                games: [],\n                gamesForm: {\n                    gameid: 0,\n                    name: ''\n                }\n            };\n        },\n        computed: {\n            avatarPath() {\n                return localStorage.avatorImgPath;\n            }\n        },\n        methods: {\n            init() {\n                let userInfo = JSON.parse(Cookies.get(\"userInfo\"));\n                this.username = userInfo.username;\n                this.queryAllGames()\n            },\n            queryAllGames() {\n                queryTableConsoleGames().then(res => {\n                    if (res.success) {\n                        this.games = res.result;\n                        if (this.games.length <= 0) {\n                            this.$Notice.open({\n                                title: '⚠️',\n                                desc: '请联系管理员分配游戏！请勿有其它操作！1秒后自动退出管理台！'\n                            });\n                            // alert(\"请联系管理员分配游戏！请勿有其它操作！1秒后自动退出管理台！\")\n                            var that = this;\n                            window.setTimeout(function () {\n                                that.$store.commit(\"logout\", that);\n                                that.$store.commit(\"clearOpenedSubmenu\");\n                                that.setStore(\"accessToken\", \"\");\n                                // 强制刷新页面 重新加载router\n                                location.reload();\n                            }, 1500)\n                        }else {\n                                this.setStore(\"gameid\",  this.games[0].gameid);\n                                this.gamesForm.name =  this.games[0].gamename;\n\t\t\t\t\t\t\t\tthis.gamesForm.gameid =  this.games[0].gamename;\n                                this.setStore(\"currencyRate\",  this.games[0].currencyrate);\n                                this.setStore(\"parentId\",  this.games[0].parentid);\n                                this.$emit('sendMsg',  this.games[0].gamename);\n\t\t\t\t\t\t\t\n                        }\n                    }\n                });\n            },\n\n            changeGame(info) {\n                let gameid = info;\n                this.gamesForm.gameid = gameid;\n                this.setStore(\"gameid\", gameid);\n                this.games.forEach(item => {\n                    if (item.gameid === gameid) {\n                        this.gamesForm.name = item.gamename;\n                        this.setStore(\"currencyRate\", item.currencyrate);\n                        this.setStore(\"parentId\", item.parentid);\n                    }\n                })\n                this.$emit('sendMsg', this.gamesForm.name)\n                this.$store.commit(\"clearAllTags\");\n                var that = this;            \n                    that.$router.push({\n                        name: 'reportdata',\n\t\t\t\t\t\t})\n            },\n            getGameInfo() {\n                return this.gamesForm.name\n            }\n        },\n        mounted() {\n            this.init();\n        }\n    };\n",null]}