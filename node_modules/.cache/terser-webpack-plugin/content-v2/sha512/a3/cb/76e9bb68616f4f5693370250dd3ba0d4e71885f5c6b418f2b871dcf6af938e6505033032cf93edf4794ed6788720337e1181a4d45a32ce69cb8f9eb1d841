{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-7fae624f\"],{\"2db3\":function(e,t,a){\"use strict\";var n=a(\"7fdb\"),i=a.n(n);i.a},\"7fdb\":function(e,t,a){},e7ae:function(e,t,a){\"use strict\";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.isShow,expression:\"isShow\"}]},[a(\"RadioGroup\",{on:{\"on-change\":function(t){return e.init()}},model:{value:e.isDevice,callback:function(t){e.isDevice=t},expression:\"isDevice\"}},[a(\"Radio\",{attrs:{label:\"用户\"}}),a(\"Radio\",{attrs:{label:\"设备\"}})],1)],1),a(\"div\",[a(\"RadioGroup\",{on:{\"on-change\":function(t){return e.init()}},model:{value:e.phone,callback:function(t){e.phone=t},expression:\"phone\"}},[a(\"Radio\",{attrs:{label:\"ALL\"}},[a(\"Icon\",{attrs:{type:\"logo-windows\"}}),a(\"span\",[e._v(\"ALL\")])],1),a(\"Radio\",{attrs:{label:\"ANDROID\"}},[a(\"Icon\",{attrs:{type:\"logo-android\"}}),a(\"span\",[e._v(\"ANDROID\")])],1),a(\"Radio\",{attrs:{label:\"IOS\"}},[a(\"Icon\",{attrs:{type:\"logo-apple\"}}),a(\"span\",[e._v(\"IOS\")])],1)],1)],1),a(\"div\",[a(\"RadioGroup\",{attrs:{type:\"button\",size:\"large\"},on:{\"on-change\":function(t){return e.init()}},model:{value:e.data,callback:function(t){e.data=t},expression:\"data\"}},[e._v(\">\\n            \"),a(\"Radio\",{attrs:{label:\"今天\"}}),a(\"Radio\",{attrs:{label:\"昨天\"}}),a(\"Radio\",{attrs:{label:\"7日\"}}),a(\"Radio\",{attrs:{label:\"30日\"}})],1)],1),a(\"div\",[a(\"RadioGroup\",{on:{\"on-change\":function(t){return e.init()}},model:{value:e.dauOrInstall,callback:function(t){e.dauOrInstall=t},expression:\"dauOrInstall\"}},[a(\"Radio\",{attrs:{label:\"活跃\"}}),a(\"Radio\",{attrs:{label:\"新增\"}})],1)],1),a(\"div\",{attrs:{id:\"surveyOneLine\"}}),e._m(0),a(\"Row\",[a(\"Table\",{ref:\"table\",attrs:{height:\"300\",\"highlight-row\":\"\",border:\"\",columns:e.columns,data:e.listData}})],1),a(\"div\",{attrs:{id:\"surveyManyLine\"}}),a(\"Row\",[a(\"Table\",{ref:\"table\",attrs:{height:\"300\",\"highlight-row\":\"\",border:\"\",columns:e.retentionTable,data:e.retentionDataList}})],1)],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"roundChart\"},[a(\"div\",{attrs:{id:\"davChart\"}}),a(\"div\",{attrs:{id:\"installChart\"}})])}],s=a(\"365c\"),r={\"今天\":0,\"昨天\":1,\"7日\":7,\"30日\":30},o={ALL:0,ANDROID:1,IOS:2},l={name:\"reportData\",data:function(){return{isShow:!0,isDevice:\"用户\",phone:\"ALL\",data:\"7日\",dauOrInstall:\"活跃\",listData:[],payList:[],retentionDataList:[],datas:[],realtimeStatis:[],handelPayCount:[],finalTable:[],columnsHeadrReal:[{title:\"日期（星期）\",key:\"ds\",width:150,fixed:\"left\"},{title:\"～时\",key:\"dayOfHour\",width:150,fixed:\"left\"}],columnsHeadr:[{title:\"日期（星期）\",key:\"ds\",width:150,fixed:\"left\"}],columnsOver:[{title:\"注册数\",key:\"installNum\",width:150},{title:\"活跃数\",key:\"dauNum\",width:150},{title:\"付费人数\",key:\"payCount\",width:150},{title:\"付费总额\",key:\"payAmount\",width:150},{title:\"付费率\",key:\"payRate\",width:150},{title:\"ARPU\",key:\"ARPU\",width:150},{title:\"ARPPU\",key:\"ARPPU\",width:150},{title:\"注册付费率\",key:\"payInstallRate\",width:150},{title:\"注册付费人数\",key:\"payInstallCount\",width:150},{title:\"注册付费总额\",key:\"payInstallAmount\",width:150},{title:\"注付ARPU\",key:\"payInstallARPU\",width:150},{title:\"注付ARPPU\",key:\"payInstallARPPU\",width:150},{title:\"付费次数\",key:\"payTimes\",width:150},{title:\"注册付费次数\",key:\"payInstallTimes\",width:150}],columns:[],retentionTable:[{title:\"日期（星期）\",key:\"ds\",width:150,fixed:\"left\"},{title:\"1日\",key:\"oneRetentionPercentage\",width:150},{title:\"2日\",key:\"twoRetentionPercentage\",width:150},{title:\"3日\",key:\"threeRetentionPercentage\",width:150},{title:\"4日\",key:\"fourRetentionPercentage\",width:150},{title:\"5日\",key:\"fiveRetentionPercentage\",width:150},{title:\"6日\",key:\"sixRetentionPercentage\",width:150},{title:\"7日\",key:\"sevenRetentionPercentage\",width:150},{title:\"8日\",key:\"eightRetentionPercentage\",width:150},{title:\"9日\",key:\"nineRetentionPercentage\",width:150},{title:\"10日\",key:\"tenRetentionPercentage\",width:150},{title:\"11日\",key:\"elevenRetentionPercentage\",width:150},{title:\"12日\",key:\"twelveRetentionPercentage\",width:150},{title:\"13日\",key:\"thirteenRetentionPercentage\",width:150},{title:\"14日\",key:\"fourteenRetentionPercentage\",width:150},{title:\"15日\",key:\"fifteenRetentionPercentage\",width:150},{title:\"16日\",key:\"sixteenRetentionPercentage\",width:150},{title:\"17日\",key:\"seventeenRetentionPercentage\",width:150},{title:\"18日\",key:\"eighteenRetentionPercentage\",width:150},{title:\"19日\",key:\"nineteenRetentionPercentage\",width:150},{title:\"20日\",key:\"twentyteenRetentionPercentage\",width:150},{title:\"21日\",key:\"twentyOneteenRetentionPercentage\",width:150},{title:\"22日\",key:\"twentyTwoRetentionPercentage\",width:150},{title:\"23日\",key:\"twentyThreeRetentionPercentage\",width:150},{title:\"24日\",key:\"twentyFourRetentionPercentage\",width:150},{title:\"25日\",key:\"twentyFiveRetentionPercentage\",width:150},{title:\"26日\",key:\"twentySixRetentionPercentage\",width:150},{title:\"27日\",key:\"twentySevenRetentionPercentage\",width:150},{title:\"28日\",key:\"twentyEightRetentionPercentage\",width:150},{title:\"29日\",key:\"twentyNineRetentionPercentage\",width:150},{title:\"30日\",key:\"thirtyRetentionPercentage\",width:150}],surveyOneLine:{},surveyManyLine:{},davChart:{},chartData:[],map_pieChartD:{},map_pieChartI:{}}},methods:{init:function(){0==this.getStore(\"parentId\")?this.isShow=!0:this.isShow=!1,this.initTable(),this.queryDaily()},surveyManyLineChart:function(){this.surveyManyLine=new G2.Chart({container:\"surveyManyLine\",forceFit:!0,height:500}),this.surveyManyLine.source(this.handelPayCount,{}),this.surveyManyLine.scale(\"value\",{min:0,alias:\"人数\"}),this.surveyManyLine.scale(\"time\",{tickCount:6}),this.surveyManyLine.tooltip({crosshairs:{type:\"line\"}}),this.surveyManyLine.axis(\"time\",{label:{rotate:-Math.PI/2.5,textAlign:\"end\",textBaseline:\"middle\"}}),this.surveyManyLine.axis(\"time\",{label:{formatter:function(e){return e}}}),this.surveyManyLine.legend({position:\"bottom\",align:\"center\",itemWidth:null}),this.surveyManyLine.line().position(\"time*value\").color(\"type\").shape(\"smooth\"),this.surveyManyLine.point().position(\"time*value\").color(\"type\").size(4).shape(\"circle\").style({stroke:\"#fff\",lineWidth:1}),this.surveyManyLine.render()},surveyOneLineChart:function(){this.surveyOneLine=new G2.Chart({container:\"surveyOneLine\",forceFit:!0,height:500}),this.surveyOneLine.source(this.datas,{}),this.surveyOneLine.scale(\"value\",{min:0,alias:\"人数\"}),this.surveyOneLine.scale(\"time\",{tickCount:6}),this.surveyOneLine.tooltip({crosshairs:{type:\"line\"}}),this.surveyOneLine.axis(\"time\",{label:{rotate:-Math.PI/2.5,textAlign:\"end\",textBaseline:\"middle\"}}),this.surveyOneLine.line().position(\"time*value\").shape(\"smooth\").color(\"l(0) 0:#F2C587 0.5:#ED7973 1:#8659AF\"),this.surveyOneLine.point().position(\"time*value\").size(4).shape(\"circle\").style({stroke:\"#fff\",lineWidth:1}).color(\"l(0) 0:#F2C587 0.5:#ED7973 1:#8659AF\"),this.surveyOneLine.area().position(\"time*value\").shape(\"smooth\").color(\"l(0) 0:#F2C587 0.5:#ED7973 1:#8659AF\"),this.surveyOneLine.render()},roundChart:function(){var e=this;this.davChart=new G2.Chart({container:\"davChart\",height:500,width:500}),this.davChart.source(this.chartData,{}),this.davChart.coord(\"theta\",{radius:.75}),this.davChart.tooltip({showTitle:!1}),this.davChart.intervalStack().position(\"dauNum\").color(\"os\").label(\"dauNum\",{formatter:function(t,a){return e.map_pieChartD[a.point.os]+\"|\"+t}}).tooltip(\"os*dauNum\",(function(e,t){return{name:e,value:t}})).style({lineWidth:1,stroke:\"#fff\"}),this.davChart.render(),this.installChart=new G2.Chart({container:\"installChart\",height:500,width:500}),this.installChart.source(this.chartData,{}),this.installChart.coord(\"theta\",{radius:.75}),this.installChart.tooltip({showTitle:!1}),this.installChart.intervalStack().position(\"installNum\").color(\"os\").label(\"installNum\",{formatter:function(t,a){return e.map_pieChartI[a.point.os]+\"|\"+t}}).tooltip(\"os*installNum\",(function(e,t){return{name:e,value:t}})).style({lineWidth:1,stroke:\"#fff\"}),this.installChart.render()},initTable:function(){1==r[this.data]||0==r[this.data]?this.columns=this.columnsHeadrReal.concat(this.columnsOver):this.columns=this.columnsHeadr.concat(this.columnsOver);var e=[],t=new Object;t.type=\"selection\",t.width=60,t.align=\"center\",t.fixed=\"left\";var a=new Object;a.type=\"index\",a.width=60,a.align=\"center\",a.fixed=\"left\";var n=new Object;n.title=\"日期（星期）\",n.key=\"ds\",n.width=150,n.fixed=\"left\",e.push(t),e.push(a),e.push(n)},queryDaily:function(){var e=this,t={gameid:parseInt(this.getStore(\"gameid\")),deviceType:parseInt(\"用户\"===this.isDevice?0:1),osType:o[this.phone],data:parseInt(r[this.data]),hxType:parseInt(\"活跃\"===this.dauOrInstall?0:1)};Object(s[\"Pb\"])(t).then((function(t){if(t.success){var a=e.androidIosProportions(t.androidIosProportions);e.listData=e.tableDataProcess(t.shareDailyResultTypes,a),e.payList=t.payList,e.retentionDataList=e.saturday(t.shareRetentionList),e.datas=e.f2DI(t.dauNumOrInstallNumList,r[e.data].toString(),e.listData,parseInt(\"活跃\"===e.dauOrInstall?0:1)),e.handelPayCount=e.makeCavas(e.listData,r[e.data]),e.chartData=e.makePieChart(t.androidIosProportions),e.surveyOneLine.changeData(e.datas),e.surveyManyLine.changeData(e.handelPayCount),e.davChart.changeData(e.chartData),e.installChart.changeData(e.chartData)}}))},makePieChart:function(e){var t=0,a=0;e.forEach((function(e){t+=e.dauNum,a+=e.installNum}));var n={},i={};return e.map((function(e){n[e.os]=(e.dauNum/t*100).toFixed(2)+\"%\",i[e.os]=(e.installNum/a*100).toFixed(2)+\"%\"})),this.map_pieChartD=n,this.map_pieChartI=i,e},androidIosProportions:function(e){if(e){var t=0,a=0,n=0,i=0,s=0,r=0,o=[];return e.forEach((function(e){t+=e.dauNum,a+=e.installNum,\"android\"==e.os&&(n=e.dauNum,i=e.installNum),\"iOS\"==e.os&&(s=e.dauNum,r=e.installNum)})),o.push((n/t*100).toFixed(2)+\"%\"),o.push((s/t*100).toFixed(2)+\"%\"),o.push((i/a*100).toFixed(2)+\"%\"),o.push((r/a*100).toFixed(2)+\"%\"),o}},tableDataProcess:function(e,t){var a=this;if(e){var n=0,i=0,s=0,r=0;e.forEach((function(e){n+=e.dauNum,i+=e.installNum,s+=e.payAmount,r+=e.payCount,e.ds=a.weekFunction(e.ds),e.payAmount=e.payAmount/a.getStore(\"currencyRate\"),e.payRate=0==e.dauNum?0:(100*e.payCount/e.dauNum).toFixed(2)+\"%\",e.ARPU=0==e.dauNum?0:(e.payAmount/e.dauNum).toFixed(2),e.ARPPU=0==e.payCount?0:(e.payAmount/e.payCount).toFixed(2),e.payInstallAmount=e.payInstallAmount/a.getStore(\"currencyRate\"),e.payInstallRate=0==e.installNum?0:(100*e.payInstallCount/e.installNum).toFixed(2)+\"%\",e.payInstallARPU=0==e.installNum?0:(e.payInstallAmount/e.installNum).toFixed(2),e.payInstallARPPU=0==e.payInstallCount?0:(e.payInstallAmount/e.payInstallCount).toFixed(2)}));var o=[],l=new Object;l.title=\"活跃\",l.value=\"人数:\"+n,l.payRate=\"Android:\"+t[0],l.payARPU=\"iOS:\"+t[1];var u=new Object;u.title=\"新增\",u.payRate=\"Android:\"+t[2],u.payARPU=\"iOS:\"+t[3],u.value=\"人数:\"+i;var h=new Object;h.title=\"付费\",h.value=\"总额:\"+s/this.getStore(\"currencyRate\"),h.payRate=\" 付费率:\"+(0==n?0:(100*r/n).toFixed(2)+\"%\"),h.payARPUs=\"ARPU:\"+(0==n?0:(s/this.getStore(\"currencyRate\")/n).toFixed(2)),h.payARPPU=\"ARPPU:\"+(0==r?0:(s/this.getStore(\"currencyRate\")/r).toFixed(2)),o.push(l),o.push(u),o.push(h),this.realtimeStatis=o}return e},saturday:function(e){if(e)return e.forEach((function(e,t){var a=new Date(e.ds),n=a.getDay(),i=7-n,s=[];switch(i){case 7:s=[\"oneRetentionPercentage\",\"eightRetentionPercentage\",\"fifteenRetentionPercentage\"],e.ds=e.ds+\"(七)\";break;case 1:s=[\"sevenRetentionPercentage\",\"fourteenRetentionPercentage\"],e.ds=e.ds+\"(六)\";break;case 2:s=[\"sixRetentionPercentage\",\"thirteenRetentionPercentage\"],e.ds=e.ds+\"(五)\";break;case 3:s=[\"fiveRetentionPercentage\",\"twelveRetentionPercentage\"],e.ds=e.ds+\"(四)\";break;case 4:s=[\"fourRetentionPercentage\",\"elevenRetentionPercentage\"],e.ds=e.ds+\"(三)\";break;case 5:s=[\"threeRetentionPercentage\",\"tenRetentionPercentage\"],e.ds=e.ds+\"(二)\";break;case 6:s=[\"twoRetentionPercentage\",\"nineRetentionPercentage\"],e.ds=e.ds+\"(一)\";break;default:}e.special=s,e.oneSpecial=s[0],e.twoSpecial=s[1]})),e},f2DI:function(e,t,a,n){var i=this,s=[];return 0==t||1==t?a.forEach((function(e){var t=new Object;t.value=0==n?e.dauNum:e.installNum,t.time=e.dayOfHour+\"时\",s.push(t)})):e.forEach((function(e,t){var a=new Object;a.time=i.getTime(t),a.value=e,s.push(a)})),\"7\"!=t&&\"30\"!=t&&\"0\"!=t||s.reverse(),s},getTime:function(e){var t=new Date;t.setTime(t.getTime()-864e5*(e+1));var a=t.getMonth()+1+\"-\"+t.getDate();return a},weekFunction:function(e){var t=new Date(e),a=t.getDay(),n=7-a;switch(n){case 7:e+=\"(七)\";break;case 1:e+=\"(六)\";break;case 2:e+=\"(五)\";break;case 3:e+=\"(四)\";break;case 4:e+=\"(三)\";break;case 5:e+=\"(二)\";break;case 6:e+=\"(一)\";break;default:}return e},makeCavas:function(e,t){if(e){0==t&&e.sort((function(e,t){return t.dayOfHour-e.dayOfHour}));var a=[];return e.forEach((function(e,n){var i=new Object;i.time=7!=t&&30!=t?e.dayOfHour+\"时\":e.ds.substr(5,5),i.value=e.payCount,i.type=\"付费人数\",a.push(i);var s=new Object;s.time=7!=t&&30!=t?e.dayOfHour+\"时\":e.ds.substr(5,5),s.value=e.payAmount,s.type=\"付费金额\",a.push(s);var r=new Object;r.time=7!=t&&30!=t?e.dayOfHour+\"时\":e.ds.substr(5,5),r.value=e.payTimes,r.type=\"付费次数\",a.push(r);var o=new Object;o.time=7!=t&&30!=t?e.dayOfHour+\"时\":e.ds.substr(5,5),o.value=e.payInstallCount,o.type=\"安装付费人数\",a.push(o);var l=new Object;l.time=7!=t&&30!=t?e.dayOfHour+\"时\":e.ds.substr(5,5),l.value=e.payInstallAmount,l.type=\"安装付费金额\",a.push(l);var u=new Object;u.time=7!=t&&30!=t?e.dayOfHour+\"时\":e.ds.substr(5,5),u.value=e.payInstallTimes,u.type=\"安装付费次数\",a.push(u)})),7!=t&&30!=t&&0!=t||a.reverse(),a}}},mounted:function(){this.surveyOneLineChart(),this.surveyManyLineChart(),this.roundChart(),this.init()}},u=l,h=(a(\"2db3\"),a(\"2877\")),d=Object(h[\"a\"])(u,n,i,!1,null,\"bbe40a5c\",null);t[\"default\"]=d.exports}}]);","extractedComments":[]}