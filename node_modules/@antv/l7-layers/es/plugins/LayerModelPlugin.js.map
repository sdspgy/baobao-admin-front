{"version":3,"sources":["../../src/plugins/LayerModelPlugin.ts"],"names":["injectable","LayerModelPlugin","layer","hooks","init","tap","prepareBuildModel","buildModels","beforeRenderData","layerModelNeedUpdate"],"mappings":";;;;;AACA,SAASA,UAAT,QAA2B,WAA3B;IAKqBC,gB,WADpBD,UAAU,E;;;;;;;0BAEIE,K,EAAe;AAC1BA,MAAAA,KAAK,CAACC,KAAN,CAAYC,IAAZ,CAAiBC,GAAjB,CAAqB,kBAArB,EAAyC,YAAM;AAE7CH,QAAAA,KAAK,CAACI,iBAAN;AAEAJ,QAAAA,KAAK,CAACK,WAAN;AACD,OALD;AAOAL,MAAAA,KAAK,CAACC,KAAN,CAAYK,gBAAZ,CAA6BH,GAA7B,CAAiC,kBAAjC,EAAqD,YAAM;AAEzDH,QAAAA,KAAK,CAACI,iBAAN;AAEAJ,QAAAA,KAAK,CAACK,WAAN;AACAL,QAAAA,KAAK,CAACO,oBAAN,GAA6B,KAA7B;AACA,eAAO,KAAP;AACD,OAPD;AAQD;;;;;SAjBkBR,gB","sourcesContent":["import { ILayer, ILayerPlugin, IMapService, TYPES } from '@antv/l7-core';\nimport { injectable } from 'inversify';\n/**\n * Layer Model 初始化，更新，销毁\n */\n@injectable()\nexport default class LayerModelPlugin implements ILayerPlugin {\n  public apply(layer: ILayer) {\n    layer.hooks.init.tap('LayerModelPlugin', () => {\n      // 更新Model 配置项\n      layer.prepareBuildModel();\n      // 初始化 Model\n      layer.buildModels();\n    });\n\n    layer.hooks.beforeRenderData.tap('DataSourcePlugin', () => {\n      // 更新Model 配置项\n      layer.prepareBuildModel();\n      // 初始化 Model\n      layer.buildModels();\n      layer.layerModelNeedUpdate = false;\n      return false;\n    });\n  }\n}\n"],"file":"LayerModelPlugin.js"}